\doxysection{googletest-\/port-\/test.cc}
\hypertarget{googletest-port-test_8cc_source}{}\label{googletest-port-test_8cc_source}\index{/home/who/standard-\/extended-\/cpp-\/lib/dependencies/googletest-\/1.14.0/googletest/test/googletest-\/port-\/test.cc@{/home/who/standard-\/extended-\/cpp-\/lib/dependencies/googletest-\/1.14.0/googletest/test/googletest-\/port-\/test.cc}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2008,\ Google\ Inc.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ All\ rights\ reserved.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Redistribution\ and\ use\ in\ source\ and\ binary\ forms,\ with\ or\ without}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ modification,\ are\ permitted\ provided\ that\ the\ following\ conditions\ are}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ met:}}
\DoxyCodeLine{00007\ \textcolor{comment}{//}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ of\ source\ code\ must\ retain\ the\ above\ copyright}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer.}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ in\ binary\ form\ must\ reproduce\ the\ above}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ copyright\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ in\ the\ documentation\ and/or\ other\ materials\ provided\ with\ the}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ distribution.}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ \ \ \ \ *\ Neither\ the\ name\ of\ Google\ Inc.\ nor\ the\ names\ of\ its}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ contributors\ may\ be\ used\ to\ endorse\ or\ promote\ products\ derived\ from}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ this\ software\ without\ specific\ prior\ written\ permission.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ THIS\ SOFTWARE\ IS\ PROVIDED\ BY\ THE\ COPYRIGHT\ HOLDERS\ AND\ CONTRIBUTORS}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ "{}AS\ IS"{}\ AND\ ANY\ EXPRESS\ OR\ IMPLIED\ WARRANTIES,\ INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND\ FITNESS\ FOR}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ A\ PARTICULAR\ PURPOSE\ ARE\ DISCLAIMED.\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ OWNER\ OR\ CONTRIBUTORS\ BE\ LIABLE\ FOR\ ANY\ DIRECT,\ INDIRECT,\ INCIDENTAL,}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ SPECIAL,\ EXEMPLARY,\ OR\ CONSEQUENTIAL\ DAMAGES\ (INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ LIMITED\ TO,\ PROCUREMENT\ OF\ SUBSTITUTE\ GOODS\ OR\ SERVICES;\ LOSS\ OF\ USE,}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ DATA,\ OR\ PROFITS;\ OR\ BUSINESS\ INTERRUPTION)\ HOWEVER\ CAUSED\ AND\ ON\ ANY}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ THEORY\ OF\ LIABILITY,\ WHETHER\ IN\ CONTRACT,\ STRICT\ LIABILITY,\ OR\ TORT}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ (INCLUDING\ NEGLIGENCE\ OR\ OTHERWISE)\ ARISING\ IN\ ANY\ WAY\ OUT\ OF\ THE\ USE}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ OF\ THIS\ SOFTWARE,\ EVEN\ IF\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH\ DAMAGE.}}
\DoxyCodeLine{00029\ \textcolor{comment}{//}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ This\ file\ tests\ the\ internal\ cross-\/platform\ support\ utilities.}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}gtest/internal/gtest-\/port.h"{}}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_MAC}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_OS\_MAC}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ <chrono>}\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <list>}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <thread>}\ \ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <utility>}\ \ \textcolor{comment}{//\ For\ std::pair\ and\ std::make\_pair.}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ "{}gtest/gtest-\/spi.h"{}}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#include\ "{}gtest/gtest.h"{}}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#include\ "{}src/gtest-\/internal-\/inl.h"{}}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{using\ }std::make\_pair;}
\DoxyCodeLine{00052\ \textcolor{keyword}{using\ }std::pair;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{namespace\ }testing\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ TEST(IsXDigitTest,\ WorksForNarrowAscii)\ \{}
\DoxyCodeLine{00058\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00059\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00060\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'A'}));}
\DoxyCodeLine{00061\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'F'}));}
\DoxyCodeLine{00062\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00063\ \ \ EXPECT\_TRUE(IsXDigit(\textcolor{charliteral}{'f'}));}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00066\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{charliteral}{'g'}));}
\DoxyCodeLine{00067\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{charliteral}{'G'}));}
\DoxyCodeLine{00068\ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ TEST(IsXDigitTest,\ ReturnsFalseForNarrowNonAscii)\ \{}
\DoxyCodeLine{00071\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{stringliteral}{'\(\backslash\)x80'})));}
\DoxyCodeLine{00072\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\textcolor{charliteral}{'0'}\ |\ \textcolor{stringliteral}{'\(\backslash\)x80'})));}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ TEST(IsXDigitTest,\ WorksForWideAscii)\ \{}
\DoxyCodeLine{00076\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00077\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00078\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'A'}));}
\DoxyCodeLine{00079\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'F'}));}
\DoxyCodeLine{00080\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00081\ \ \ EXPECT\_TRUE(IsXDigit(L\textcolor{charliteral}{'f'}));}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ EXPECT\_FALSE(IsXDigit(L\textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00084\ \ \ EXPECT\_FALSE(IsXDigit(L\textcolor{charliteral}{'g'}));}
\DoxyCodeLine{00085\ \ \ EXPECT\_FALSE(IsXDigit(L\textcolor{charliteral}{'G'}));}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ TEST(IsXDigitTest,\ ReturnsFalseForWideNonAscii)\ \{}
\DoxyCodeLine{00089\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{wchar\_t}\textcolor{keyword}{>}(0x80)));}
\DoxyCodeLine{00090\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{wchar\_t}\textcolor{keyword}{>}(L\textcolor{charliteral}{'0'}\ |\ 0x80)));}
\DoxyCodeLine{00091\ \ \ EXPECT\_FALSE(IsXDigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{wchar\_t}\textcolor{keyword}{>}(L\textcolor{charliteral}{'0'}\ |\ 0x100)));}
\DoxyCodeLine{00092\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{keyword}{class\ }Base\ \{}
\DoxyCodeLine{00095\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00096\ \ \ Base()\ :\ member\_(0)\ \{\}}
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{explicit}\ Base(\textcolor{keywordtype}{int}\ n)\ :\ member\_(n)\ \{\}}
\DoxyCodeLine{00098\ \ \ Base(\textcolor{keyword}{const}\ Base\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00099\ \ \ Base\&\ operator=(\textcolor{keyword}{const}\ Base\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{virtual}\ \string~Base()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordtype}{int}\ member()\ \{\ \textcolor{keywordflow}{return}\ member\_;\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordtype}{int}\ member\_;}
\DoxyCodeLine{00105\ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{class\ }Derived\ :\ \textcolor{keyword}{public}\ Base\ \{}
\DoxyCodeLine{00108\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{explicit}\ Derived(\textcolor{keywordtype}{int}\ n)\ :\ Base(n)\ \{\}}
\DoxyCodeLine{00110\ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ TEST(ImplicitCastTest,\ ConvertsPointers)\ \{}
\DoxyCodeLine{00113\ \ \ Derived\ derived(0);}
\DoxyCodeLine{00114\ \ \ EXPECT\_TRUE(\&derived\ ==\ ::testing::internal::ImplicitCast\_<Base*>(\&derived));}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ TEST(ImplicitCastTest,\ CanUseInheritance)\ \{}
\DoxyCodeLine{00118\ \ \ Derived\ derived(1);}
\DoxyCodeLine{00119\ \ \ Base\ base\ =\ ::testing::internal::ImplicitCast\_<Base>(derived);}
\DoxyCodeLine{00120\ \ \ EXPECT\_EQ(derived.member(),\ base.member());}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtesting_1_1internal_1_1Castable}{Castable}}\ \{}
\DoxyCodeLine{00124\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtesting_1_1internal_1_1Castable}{Castable}}(\textcolor{keywordtype}{bool}*\ converted)\ :\ converted\_(converted)\ \{\}}
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{operator}\ Base()\ \{}
\DoxyCodeLine{00127\ \ \ \ \ *converted\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{return}\ Base();}
\DoxyCodeLine{00129\ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordtype}{bool}*\ converted\_;}
\DoxyCodeLine{00133\ \};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ TEST(ImplicitCastTest,\ CanUseNonConstCastOperator)\ \{}
\DoxyCodeLine{00136\ \ \ \textcolor{keywordtype}{bool}\ converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00137\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1Castable}{Castable}}\ castable(\&converted);}
\DoxyCodeLine{00138\ \ \ Base\ base\ =\ ::testing::internal::ImplicitCast\_<Base>(castable);}
\DoxyCodeLine{00139\ \ \ EXPECT\_TRUE(converted);}
\DoxyCodeLine{00140\ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtesting_1_1internal_1_1ConstCastable}{ConstCastable}}\ \{}
\DoxyCodeLine{00143\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtesting_1_1internal_1_1ConstCastable}{ConstCastable}}(\textcolor{keywordtype}{bool}*\ converted)\ :\ converted\_(converted)\ \{\}}
\DoxyCodeLine{00145\ \ \ \textcolor{keyword}{operator}\ Base()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00146\ \ \ \ \ *converted\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ Base();}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{bool}*\ converted\_;}
\DoxyCodeLine{00152\ \};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ TEST(ImplicitCastTest,\ CanUseConstCastOperatorOnConstValues)\ \{}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordtype}{bool}\ converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00156\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtesting_1_1internal_1_1ConstCastable}{ConstCastable}}\ const\_castable(\&converted);}
\DoxyCodeLine{00157\ \ \ Base\ base\ =\ ::testing::internal::ImplicitCast\_<Base>(const\_castable);}
\DoxyCodeLine{00158\ \ \ EXPECT\_TRUE(converted);}
\DoxyCodeLine{00159\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtesting_1_1internal_1_1ConstAndNonConstCastable}{ConstAndNonConstCastable}}\ \{}
\DoxyCodeLine{00162\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00163\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1ConstAndNonConstCastable}{ConstAndNonConstCastable}}(\textcolor{keywordtype}{bool}*\ converted,\ \textcolor{keywordtype}{bool}*\ const\_converted)}
\DoxyCodeLine{00164\ \ \ \ \ \ \ :\ converted\_(converted),\ const\_converted\_(const\_converted)\ \{\}}
\DoxyCodeLine{00165\ \ \ \textcolor{keyword}{operator}\ Base()\ \{}
\DoxyCodeLine{00166\ \ \ \ \ *converted\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordflow}{return}\ Base();}
\DoxyCodeLine{00168\ \ \ \}}
\DoxyCodeLine{00169\ \ \ \textcolor{keyword}{operator}\ Base()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00170\ \ \ \ \ *const\_converted\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{return}\ Base();}
\DoxyCodeLine{00172\ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{bool}*\ converted\_;}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{bool}*\ const\_converted\_;}
\DoxyCodeLine{00177\ \};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ TEST(ImplicitCastTest,\ CanSelectBetweenConstAndNonConstCasrAppropriately)\ \{}
\DoxyCodeLine{00180\ \ \ \textcolor{keywordtype}{bool}\ converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordtype}{bool}\ const\_converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00182\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1ConstAndNonConstCastable}{ConstAndNonConstCastable}}\ castable(\&converted,\ \&const\_converted);}
\DoxyCodeLine{00183\ \ \ Base\ base\ =\ ::testing::internal::ImplicitCast\_<Base>(castable);}
\DoxyCodeLine{00184\ \ \ EXPECT\_TRUE(converted);}
\DoxyCodeLine{00185\ \ \ EXPECT\_FALSE(const\_converted);}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00188\ \ \ const\_converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00189\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtesting_1_1internal_1_1ConstAndNonConstCastable}{ConstAndNonConstCastable}}\ const\_castable(\&converted,\ \&const\_converted);}
\DoxyCodeLine{00190\ \ \ base\ =\ ::testing::internal::ImplicitCast\_<Base>(const\_castable);}
\DoxyCodeLine{00191\ \ \ EXPECT\_FALSE(converted);}
\DoxyCodeLine{00192\ \ \ EXPECT\_TRUE(const\_converted);}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtesting_1_1internal_1_1To}{To}}\ \{}
\DoxyCodeLine{00196\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00197\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1To}{To}}(\textcolor{keywordtype}{bool}*\ converted)\ \{\ *converted\ =\ \textcolor{keyword}{true};\ \}\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00198\ \};}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ TEST(ImplicitCastTest,\ CanUseImplicitConstructor)\ \{}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{bool}\ converted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00202\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1To}{To}}\ to\ =\ ::testing::internal::ImplicitCast\_<To>(\&converted);}
\DoxyCodeLine{00203\ \ \ (void)to;}
\DoxyCodeLine{00204\ \ \ EXPECT\_TRUE(converted);}
\DoxyCodeLine{00205\ \}}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \textcolor{comment}{//\ The\ following\ code\ intentionally\ tests\ a\ suboptimal\ syntax.}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#ifdef\ \_\_GNUC\_\_}}
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wdangling-\/else"{}}}
\DoxyCodeLine{00211\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wempty-\/body"{}}}
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wpragmas"{}}}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00214\ TEST(GtestCheckSyntaxTest,\ BehavesLikeASingleStatement)\ \{}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{if}\ (AlwaysFalse())}
\DoxyCodeLine{00216\ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{false})\ <<\ \textcolor{stringliteral}{"{}This\ should\ never\ be\ executed;\ "{}}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}It's\ a\ compilation\ test\ only."{}};}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{if}\ (AlwaysTrue())}
\DoxyCodeLine{00220\ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{true});}
\DoxyCodeLine{00221\ \ \ else}
\DoxyCodeLine{00222\ \ \ \ \ ;\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{keywordflow}{if}\ (AlwaysFalse())}
\DoxyCodeLine{00225\ \ \ \ \ ;\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00227\ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{true})\ <<\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#ifdef\ \_\_GNUC\_\_}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ TEST(GtestCheckSyntaxTest,\ WorksWithSwitch)\ \{}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{switch}\ (0)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00238\ \ \ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{true});}
\DoxyCodeLine{00239\ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \textcolor{keywordflow}{switch}\ (0)}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00243\ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{true})\ <<\ \textcolor{stringliteral}{"{}Check\ failed\ in\ switch\ case"{}};}
\DoxyCodeLine{00244\ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \textcolor{comment}{//\ Verifies\ behavior\ of\ FormatFileLocation.}}
\DoxyCodeLine{00247\ TEST(FormatFileLocationTest,\ FormatsFileLocation)\ \{}
\DoxyCodeLine{00248\ \ \ EXPECT\_PRED\_FORMAT2(IsSubstring,\ \textcolor{stringliteral}{"{}foo.cc"{}},\ FormatFileLocation(\textcolor{stringliteral}{"{}foo.cc"{}},\ 42));}
\DoxyCodeLine{00249\ \ \ EXPECT\_PRED\_FORMAT2(IsSubstring,\ \textcolor{stringliteral}{"{}42"{}},\ FormatFileLocation(\textcolor{stringliteral}{"{}foo.cc"{}},\ 42));}
\DoxyCodeLine{00250\ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ TEST(FormatFileLocationTest,\ FormatsUnknownFile)\ \{}
\DoxyCodeLine{00253\ \ \ EXPECT\_PRED\_FORMAT2(IsSubstring,\ \textcolor{stringliteral}{"{}unknown\ file"{}},}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FormatFileLocation(\textcolor{keyword}{nullptr},\ 42));}
\DoxyCodeLine{00255\ \ \ EXPECT\_PRED\_FORMAT2(IsSubstring,\ \textcolor{stringliteral}{"{}42"{}},\ FormatFileLocation(\textcolor{keyword}{nullptr},\ 42));}
\DoxyCodeLine{00256\ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ TEST(FormatFileLocationTest,\ FormatsUknownLine)\ \{}
\DoxyCodeLine{00259\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}foo.cc:"{}},\ FormatFileLocation(\textcolor{stringliteral}{"{}foo.cc"{}},\ -\/1));}
\DoxyCodeLine{00260\ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ TEST(FormatFileLocationTest,\ FormatsUknownFileAndLine)\ \{}
\DoxyCodeLine{00263\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}unknown\ file:"{}},\ FormatFileLocation(\textcolor{keyword}{nullptr},\ -\/1));}
\DoxyCodeLine{00264\ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \textcolor{comment}{//\ Verifies\ behavior\ of\ FormatCompilerIndependentFileLocation.}}
\DoxyCodeLine{00267\ TEST(FormatCompilerIndependentFileLocationTest,\ FormatsFileLocation)\ \{}
\DoxyCodeLine{00268\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}foo.cc:42"{}},\ FormatCompilerIndependentFileLocation(\textcolor{stringliteral}{"{}foo.cc"{}},\ 42));}
\DoxyCodeLine{00269\ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ TEST(FormatCompilerIndependentFileLocationTest,\ FormatsUknownFile)\ \{}
\DoxyCodeLine{00272\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}unknown\ file:42"{}},}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ FormatCompilerIndependentFileLocation(\textcolor{keyword}{nullptr},\ 42));}
\DoxyCodeLine{00274\ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ TEST(FormatCompilerIndependentFileLocationTest,\ FormatsUknownLine)\ \{}
\DoxyCodeLine{00277\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}foo.cc"{}},\ FormatCompilerIndependentFileLocation(\textcolor{stringliteral}{"{}foo.cc"{}},\ -\/1));}
\DoxyCodeLine{00278\ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ TEST(FormatCompilerIndependentFileLocationTest,\ FormatsUknownFileAndLine)\ \{}
\DoxyCodeLine{00281\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}unknown\ file"{}},\ FormatCompilerIndependentFileLocation(\textcolor{keyword}{nullptr},\ -\/1));}
\DoxyCodeLine{00282\ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \textcolor{preprocessor}{\#if\ defined(GTEST\_OS\_LINUX)\ ||\ defined(GTEST\_OS\_MAC)\ ||\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\ \ \ \ defined(GTEST\_OS\_QNX)\ ||\ defined(GTEST\_OS\_FUCHSIA)\ ||\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\ \ \ \ defined(GTEST\_OS\_DRAGONFLY)\ ||\ defined(GTEST\_OS\_FREEBSD)\ ||\ \ \ \(\backslash\)}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\ \ \ \ defined(GTEST\_OS\_GNU\_KFREEBSD)\ ||\ defined(GTEST\_OS\_NETBSD)\ ||\ \(\backslash\)}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\ \ \ \ defined(GTEST\_OS\_OPENBSD)\ ||\ defined(GTEST\_OS\_GNU\_HURD)}}
\DoxyCodeLine{00289\ \textcolor{keywordtype}{void}*\ ThreadFunc(\textcolor{keywordtype}{void}*\ data)\ \{}
\DoxyCodeLine{00290\ \ \ internal::Mutex*\ mutex\ =\ \textcolor{keyword}{static\_cast<}internal::Mutex*\textcolor{keyword}{>}(data);}
\DoxyCodeLine{00291\ \ \ mutex-\/>Lock();}
\DoxyCodeLine{00292\ \ \ mutex-\/>Unlock();}
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ TEST(GetThreadCountTest,\ ReturnsCorrectValue)\ \{}
\DoxyCodeLine{00297\ \ \ \textcolor{keywordtype}{size\_t}\ starting\_count;}
\DoxyCodeLine{00298\ \ \ \textcolor{keywordtype}{size\_t}\ thread\_count\_after\_create;}
\DoxyCodeLine{00299\ \ \ \textcolor{keywordtype}{size\_t}\ thread\_count\_after\_join;}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \textcolor{comment}{//\ We\ can't\ guarantee\ that\ no\ other\ thread\ was\ created\ or\ destroyed\ between}}
\DoxyCodeLine{00302\ \ \ \textcolor{comment}{//\ any\ two\ calls\ to\ GetThreadCount().\ We\ make\ multiple\ attempts,\ hoping\ that}}
\DoxyCodeLine{00303\ \ \ \textcolor{comment}{//\ background\ noise\ is\ not\ constant\ and\ we\ would\ see\ the\ "{}right"{}\ values\ at}}
\DoxyCodeLine{00304\ \ \ \textcolor{comment}{//\ some\ point.}}
\DoxyCodeLine{00305\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ attempt\ =\ 0;\ attempt\ <\ 20;\ ++attempt)\ \{}
\DoxyCodeLine{00306\ \ \ \ \ starting\_count\ =\ GetThreadCount();}
\DoxyCodeLine{00307\ \ \ \ \ pthread\_t\ thread\_id;}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \ \ internal::Mutex\ mutex;}
\DoxyCodeLine{00310\ \ \ \ \ \{}
\DoxyCodeLine{00311\ \ \ \ \ \ \ internal::MutexLock\ lock(\&mutex);}
\DoxyCodeLine{00312\ \ \ \ \ \ \ pthread\_attr\_t\ attr;}
\DoxyCodeLine{00313\ \ \ \ \ \ \ ASSERT\_EQ(0,\ pthread\_attr\_init(\&attr));}
\DoxyCodeLine{00314\ \ \ \ \ \ \ ASSERT\_EQ(0,\ pthread\_attr\_setdetachstate(\&attr,\ PTHREAD\_CREATE\_JOINABLE));}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ status\ =\ pthread\_create(\&thread\_id,\ \&attr,\ \&ThreadFunc,\ \&mutex);}
\DoxyCodeLine{00317\ \ \ \ \ \ \ ASSERT\_EQ(0,\ pthread\_attr\_destroy(\&attr));}
\DoxyCodeLine{00318\ \ \ \ \ \ \ ASSERT\_EQ(0,\ status);}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ thread\_count\_after\_create\ =\ GetThreadCount();}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordtype}{void}*\ dummy;}
\DoxyCodeLine{00324\ \ \ \ \ ASSERT\_EQ(0,\ pthread\_join(thread\_id,\ \&dummy));}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{comment}{//\ Join\ before\ we\ decide\ whether\ we\ need\ to\ retry\ the\ test.\ Retry\ if\ an}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{comment}{//\ arbitrary\ other\ thread\ was\ created\ or\ destroyed\ in\ the\ meantime.}}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_count\_after\_create\ !=\ starting\_count\ +\ 1)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{comment}{//\ The\ OS\ may\ not\ immediately\ report\ the\ updated\ thread\ count\ after}}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{comment}{//\ joining\ a\ thread,\ causing\ flakiness\ in\ this\ test.\ To\ counter\ that,\ we}}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{//\ wait\ for\ up\ to\ .5\ seconds\ for\ the\ OS\ to\ report\ the\ correct\ value.}}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordtype}{bool}\ thread\_count\_matches\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 5;\ ++i)\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ thread\_count\_after\_join\ =\ GetThreadCount();}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_count\_after\_join\ ==\ starting\_count)\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ thread\_count\_matches\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::milliseconds(100));}
\DoxyCodeLine{00342\ \ \ \ \ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ Retry\ if\ an\ arbitrary\ other\ thread\ was\ created\ or\ destroyed.}}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordflow}{if}\ (!thread\_count\_matches)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00348\ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ EXPECT\_EQ(thread\_count\_after\_create,\ starting\_count\ +\ 1);}
\DoxyCodeLine{00351\ \ \ EXPECT\_EQ(thread\_count\_after\_join,\ starting\_count);}
\DoxyCodeLine{00352\ \}}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00354\ TEST(GetThreadCountTest,\ ReturnsZeroWhenUnableToCountThreads)\ \{}
\DoxyCodeLine{00355\ \ \ EXPECT\_EQ(0U,\ GetThreadCount());}
\DoxyCodeLine{00356\ \}}
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_OS\_LINUX\ ||\ GTEST\_OS\_MAC\ ||\ GTEST\_OS\_QNX\ ||\ GTEST\_OS\_FUCHSIA}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ TEST(GtestCheckDeathTest,\ DiesWithCorrectOutputOnFailure)\ \{}
\DoxyCodeLine{00360\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ a\_false\_condition\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00361\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ regex[]\ =}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}googletest-\/port-\/test\(\backslash\)\(\backslash\).cc\(\backslash\)\(\backslash\)(\(\backslash\)\(\backslash\)d+\(\backslash\)\(\backslash\)):"{}}}
\DoxyCodeLine{00364\ \textcolor{preprocessor}{\#elif\ defined(GTEST\_USES\_POSIX\_RE)}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}googletest-\/port-\/test\(\backslash\)\(\backslash\).cc:[0-\/9]+"{}}}
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}googletest-\/port-\/test\(\backslash\)\(\backslash\).cc:\(\backslash\)\(\backslash\)d+"{}}}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ \_MSC\_VER}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}.*a\_false\_condition.*Extra\ info.*"{}};}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ EXPECT\_DEATH\_IF\_SUPPORTED(GTEST\_CHECK\_(a\_false\_condition)\ <<\ \textcolor{stringliteral}{"{}Extra\ info"{}},}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ regex);}
\DoxyCodeLine{00373\ \}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#ifdef\ GTEST\_HAS\_DEATH\_TEST}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ TEST(GtestCheckDeathTest,\ LivesSilentlyOnSuccess)\ \{}
\DoxyCodeLine{00378\ \ \ EXPECT\_EXIT(}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ GTEST\_CHECK\_(\textcolor{keyword}{true})\ <<\ \textcolor{stringliteral}{"{}Extra\ info"{}};}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ ::std::cerr\ <<\ \textcolor{stringliteral}{"{}Success\(\backslash\)n"{}};}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ exit(0);}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \},}
\DoxyCodeLine{00384\ \ \ \ \ \ \ ::testing::ExitedWithCode(0),\ \textcolor{stringliteral}{"{}Success"{}});}
\DoxyCodeLine{00385\ \}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_HAS\_DEATH\_TEST}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \textcolor{comment}{//\ Verifies\ that\ Google\ Test\ choose\ regular\ expression\ engine\ appropriate\ to}}
\DoxyCodeLine{00390\ \textcolor{comment}{//\ the\ platform.\ The\ test\ will\ produce\ compiler\ errors\ in\ case\ of\ failure.}}
\DoxyCodeLine{00391\ \textcolor{comment}{//\ For\ simplicity,\ we\ only\ cover\ the\ most\ important\ platforms\ here.}}
\DoxyCodeLine{00392\ TEST(RegexEngineSelectionTest,\ SelectsCorrectRegexEngine)\ \{}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\#ifdef\ GTEST\_HAS\_ABSL}}
\DoxyCodeLine{00394\ \ \ EXPECT\_TRUE(GTEST\_USES\_RE2);}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#elif\ GTEST\_HAS\_POSIX\_RE}}
\DoxyCodeLine{00396\ \ \ EXPECT\_TRUE(GTEST\_USES\_POSIX\_RE);}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00398\ \ \ EXPECT\_TRUE(GTEST\_USES\_SIMPLE\_RE);}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00400\ \}}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\#ifdef\ GTEST\_USES\_POSIX\_RE}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Str>}
\DoxyCodeLine{00405\ \textcolor{keyword}{class\ }RETest\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtesting_1_1Test}{::testing::Test}}\ \{\};}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \textcolor{comment}{//\ Defines\ StringTypes\ as\ the\ list\ of\ all\ string\ types\ that\ class\ RE}}
\DoxyCodeLine{00408\ \textcolor{comment}{//\ supports.}}
\DoxyCodeLine{00409\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structtesting_1_1internal_1_1ProxyTypeList}{testing::Types<\ ::std::string,\ const\ char*>}}\ StringTypes;}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ TYPED\_TEST\_SUITE(RETest,\ StringTypes);}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{comment}{//\ Tests\ RE's\ implicit\ constructors.}}
\DoxyCodeLine{00414\ TYPED\_TEST(RETest,\ ImplicitConstructorWorks)\ \{}
\DoxyCodeLine{00415\ \ \ \textcolor{keyword}{const}\ RE\ empty(TypeParam(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00416\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}"{}},\ empty.pattern());}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \textcolor{keyword}{const}\ RE\ simple(TypeParam(\textcolor{stringliteral}{"{}hello"{}}));}
\DoxyCodeLine{00419\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}hello"{}},\ simple.pattern());}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \textcolor{keyword}{const}\ RE\ normal(TypeParam(\textcolor{stringliteral}{"{}.*(\(\backslash\)\(\backslash\)w+)"{}}));}
\DoxyCodeLine{00422\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}.*(\(\backslash\)\(\backslash\)w+)"{}},\ normal.pattern());}
\DoxyCodeLine{00423\ \}}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \textcolor{comment}{//\ Tests\ that\ RE's\ constructors\ reject\ invalid\ regular\ expressions.}}
\DoxyCodeLine{00426\ TYPED\_TEST(RETest,\ RejectsInvalidRegex)\ \{}
\DoxyCodeLine{00427\ \ \ EXPECT\_NONFATAL\_FAILURE(}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \{\ \textcolor{keyword}{const}\ RE\ invalid(TypeParam(\textcolor{stringliteral}{"{}?"{}}));\ \},}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}?\(\backslash\)"{}\ is\ not\ a\ valid\ POSIX\ Extended\ regular\ expression."{}});}
\DoxyCodeLine{00430\ \}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \textcolor{comment}{//\ Tests\ RE::FullMatch().}}
\DoxyCodeLine{00433\ TYPED\_TEST(RETest,\ FullMatchWorks)\ \{}
\DoxyCodeLine{00434\ \ \ \textcolor{keyword}{const}\ RE\ empty(TypeParam(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00435\ \ \ EXPECT\_TRUE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}"{}}),\ empty));}
\DoxyCodeLine{00436\ \ \ EXPECT\_FALSE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}a"{}}),\ empty));}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \textcolor{keyword}{const}\ RE\ re(TypeParam(\textcolor{stringliteral}{"{}a.*z"{}}));}
\DoxyCodeLine{00439\ \ \ EXPECT\_TRUE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}az"{}}),\ re));}
\DoxyCodeLine{00440\ \ \ EXPECT\_TRUE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}axyz"{}}),\ re));}
\DoxyCodeLine{00441\ \ \ EXPECT\_FALSE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}baz"{}}),\ re));}
\DoxyCodeLine{00442\ \ \ EXPECT\_FALSE(RE::FullMatch(TypeParam(\textcolor{stringliteral}{"{}azy"{}}),\ re));}
\DoxyCodeLine{00443\ \}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \textcolor{comment}{//\ Tests\ RE::PartialMatch().}}
\DoxyCodeLine{00446\ TYPED\_TEST(RETest,\ PartialMatchWorks)\ \{}
\DoxyCodeLine{00447\ \ \ \textcolor{keyword}{const}\ RE\ empty(TypeParam(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00448\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}"{}}),\ empty));}
\DoxyCodeLine{00449\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}a"{}}),\ empty));}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \textcolor{keyword}{const}\ RE\ re(TypeParam(\textcolor{stringliteral}{"{}a.*z"{}}));}
\DoxyCodeLine{00452\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}az"{}}),\ re));}
\DoxyCodeLine{00453\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}axyz"{}}),\ re));}
\DoxyCodeLine{00454\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}baz"{}}),\ re));}
\DoxyCodeLine{00455\ \ \ EXPECT\_TRUE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}azy"{}}),\ re));}
\DoxyCodeLine{00456\ \ \ EXPECT\_FALSE(RE::PartialMatch(TypeParam(\textcolor{stringliteral}{"{}zza"{}}),\ re));}
\DoxyCodeLine{00457\ \}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\#elif\ defined(GTEST\_USES\_SIMPLE\_RE)}}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ TEST(IsInSetTest,\ NulCharIsNotInAnySet)\ \{}
\DoxyCodeLine{00462\ \ \ EXPECT\_FALSE(IsInSet(\textcolor{charliteral}{'\(\backslash\)0'},\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00463\ \ \ EXPECT\_FALSE(IsInSet(\textcolor{charliteral}{'\(\backslash\)0'},\ \textcolor{stringliteral}{"{}\(\backslash\)0"{}}));}
\DoxyCodeLine{00464\ \ \ EXPECT\_FALSE(IsInSet(\textcolor{charliteral}{'\(\backslash\)0'},\ \textcolor{stringliteral}{"{}a"{}}));}
\DoxyCodeLine{00465\ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ TEST(IsInSetTest,\ WorksForNonNulChars)\ \{}
\DoxyCodeLine{00468\ \ \ EXPECT\_FALSE(IsInSet(\textcolor{charliteral}{'a'},\ \textcolor{stringliteral}{"{}Ab"{}}));}
\DoxyCodeLine{00469\ \ \ EXPECT\_FALSE(IsInSet(\textcolor{charliteral}{'c'},\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ EXPECT\_TRUE(IsInSet(\textcolor{charliteral}{'b'},\ \textcolor{stringliteral}{"{}bcd"{}}));}
\DoxyCodeLine{00472\ \ \ EXPECT\_TRUE(IsInSet(\textcolor{charliteral}{'b'},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00473\ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ TEST(IsAsciiDigitTest,\ IsFalseForNonDigit)\ \{}
\DoxyCodeLine{00476\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00477\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00478\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00479\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00480\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00481\ \ \ EXPECT\_FALSE(IsAsciiDigit(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00482\ \}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ TEST(IsAsciiDigitTest,\ IsTrueForDigit)\ \{}
\DoxyCodeLine{00485\ \ \ EXPECT\_TRUE(IsAsciiDigit(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00486\ \ \ EXPECT\_TRUE(IsAsciiDigit(\textcolor{charliteral}{'1'}));}
\DoxyCodeLine{00487\ \ \ EXPECT\_TRUE(IsAsciiDigit(\textcolor{charliteral}{'5'}));}
\DoxyCodeLine{00488\ \ \ EXPECT\_TRUE(IsAsciiDigit(\textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00489\ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ TEST(IsAsciiPunctTest,\ IsFalseForNonPunct)\ \{}
\DoxyCodeLine{00492\ \ \ EXPECT\_FALSE(IsAsciiPunct(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00493\ \ \ EXPECT\_FALSE(IsAsciiPunct(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00494\ \ \ EXPECT\_FALSE(IsAsciiPunct(\textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00495\ \ \ EXPECT\_FALSE(IsAsciiPunct(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00496\ \ \ EXPECT\_FALSE(IsAsciiPunct(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00497\ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ TEST(IsAsciiPunctTest,\ IsTrueForPunct)\ \{}
\DoxyCodeLine{00500\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p\ =\ \textcolor{stringliteral}{"{}\string^-\/!\(\backslash\)"{}\#\$\%\&'()*+,./:;<=>?@[\(\backslash\)\(\backslash\)]\_`\{|\}\string~"{}};\ *p;\ p++)\ \{}
\DoxyCodeLine{00501\ \ \ \ \ EXPECT\_PRED1(IsAsciiPunct,\ *p);}
\DoxyCodeLine{00502\ \ \ \}}
\DoxyCodeLine{00503\ \}}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ TEST(IsRepeatTest,\ IsFalseForNonRepeatChar)\ \{}
\DoxyCodeLine{00506\ \ \ EXPECT\_FALSE(IsRepeat(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00507\ \ \ EXPECT\_FALSE(IsRepeat(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00508\ \ \ EXPECT\_FALSE(IsRepeat(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00509\ \ \ EXPECT\_FALSE(IsRepeat(\textcolor{charliteral}{'1'}));}
\DoxyCodeLine{00510\ \ \ EXPECT\_FALSE(IsRepeat(\textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00511\ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ TEST(IsRepeatTest,\ IsTrueForRepeatChar)\ \{}
\DoxyCodeLine{00514\ \ \ EXPECT\_TRUE(IsRepeat(\textcolor{charliteral}{'?'}));}
\DoxyCodeLine{00515\ \ \ EXPECT\_TRUE(IsRepeat(\textcolor{charliteral}{'*'}));}
\DoxyCodeLine{00516\ \ \ EXPECT\_TRUE(IsRepeat(\textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00517\ \}}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ TEST(IsAsciiWhiteSpaceTest,\ IsFalseForNonWhiteSpace)\ \{}
\DoxyCodeLine{00520\ \ \ EXPECT\_FALSE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00521\ \ \ EXPECT\_FALSE(IsAsciiWhiteSpace(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00522\ \ \ EXPECT\_FALSE(IsAsciiWhiteSpace(\textcolor{charliteral}{'1'}));}
\DoxyCodeLine{00523\ \ \ EXPECT\_FALSE(IsAsciiWhiteSpace(\textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00524\ \ \ EXPECT\_FALSE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00525\ \}}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ TEST(IsAsciiWhiteSpaceTest,\ IsTrueForWhiteSpace)\ \{}
\DoxyCodeLine{00528\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00529\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00530\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)r'}));}
\DoxyCodeLine{00531\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)t'}));}
\DoxyCodeLine{00532\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)v'}));}
\DoxyCodeLine{00533\ \ \ EXPECT\_TRUE(IsAsciiWhiteSpace(\textcolor{charliteral}{'\(\backslash\)f'}));}
\DoxyCodeLine{00534\ \}}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ TEST(IsAsciiWordCharTest,\ IsFalseForNonWordChar)\ \{}
\DoxyCodeLine{00537\ \ \ EXPECT\_FALSE(IsAsciiWordChar(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00538\ \ \ EXPECT\_FALSE(IsAsciiWordChar(\textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00539\ \ \ EXPECT\_FALSE(IsAsciiWordChar(\textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00540\ \ \ EXPECT\_FALSE(IsAsciiWordChar(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00541\ \ \ EXPECT\_FALSE(IsAsciiWordChar(\textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00542\ \}}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ TEST(IsAsciiWordCharTest,\ IsTrueForLetter)\ \{}
\DoxyCodeLine{00545\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00546\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'b'}));}
\DoxyCodeLine{00547\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'A'}));}
\DoxyCodeLine{00548\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'Z'}));}
\DoxyCodeLine{00549\ \}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ TEST(IsAsciiWordCharTest,\ IsTrueForDigit)\ \{}
\DoxyCodeLine{00552\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00553\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'1'}));}
\DoxyCodeLine{00554\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'7'}));}
\DoxyCodeLine{00555\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00556\ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ TEST(IsAsciiWordCharTest,\ IsTrueForUnderscore)\ \{}
\DoxyCodeLine{00559\ \ \ EXPECT\_TRUE(IsAsciiWordChar(\textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00560\ \}}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ TEST(IsValidEscapeTest,\ IsFalseForNonPrintable)\ \{}
\DoxyCodeLine{00563\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00564\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'\(\backslash\)007'}));}
\DoxyCodeLine{00565\ \}}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ TEST(IsValidEscapeTest,\ IsFalseForDigit)\ \{}
\DoxyCodeLine{00568\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00569\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00570\ \}}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ TEST(IsValidEscapeTest,\ IsFalseForWhiteSpace)\ \{}
\DoxyCodeLine{00573\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00574\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00575\ \}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ TEST(IsValidEscapeTest,\ IsFalseForSomeLetter)\ \{}
\DoxyCodeLine{00578\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00579\ \ \ EXPECT\_FALSE(IsValidEscape(\textcolor{charliteral}{'Z'}));}
\DoxyCodeLine{00580\ \}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ TEST(IsValidEscapeTest,\ IsTrueForPunct)\ \{}
\DoxyCodeLine{00583\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00584\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00585\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'\string^'}));}
\DoxyCodeLine{00586\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'\$'}));}
\DoxyCodeLine{00587\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'('}));}
\DoxyCodeLine{00588\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{']'}));}
\DoxyCodeLine{00589\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'\{'}));}
\DoxyCodeLine{00590\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'|'}));}
\DoxyCodeLine{00591\ \}}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ TEST(IsValidEscapeTest,\ IsTrueForSomeLetter)\ \{}
\DoxyCodeLine{00594\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'d'}));}
\DoxyCodeLine{00595\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'D'}));}
\DoxyCodeLine{00596\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'s'}));}
\DoxyCodeLine{00597\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'S'}));}
\DoxyCodeLine{00598\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'w'}));}
\DoxyCodeLine{00599\ \ \ EXPECT\_TRUE(IsValidEscape(\textcolor{charliteral}{'W'}));}
\DoxyCodeLine{00600\ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ TEST(AtomMatchesCharTest,\ EscapedPunct)\ \{}
\DoxyCodeLine{00603\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00604\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00605\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'\_'},\ \textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00606\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}));}
\DoxyCodeLine{00609\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'\_'},\ \textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00610\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'+'},\ \textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00611\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00612\ \}}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ TEST(AtomMatchesCharTest,\ Escaped\_d)\ \{}
\DoxyCodeLine{00615\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'d'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00616\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'d'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00617\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'d'},\ \textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'d'},\ \textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00620\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'d'},\ \textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00621\ \}}
\DoxyCodeLine{00622\ }
\DoxyCodeLine{00623\ TEST(AtomMatchesCharTest,\ Escaped\_D)\ \{}
\DoxyCodeLine{00624\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00625\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00628\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00629\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'-\/'}));}
\DoxyCodeLine{00630\ \}}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00632\ TEST(AtomMatchesCharTest,\ Escaped\_s)\ \{}
\DoxyCodeLine{00633\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00634\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00635\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00636\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00639\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00640\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'s'},\ \textcolor{charliteral}{'\(\backslash\)t'}));}
\DoxyCodeLine{00641\ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ TEST(AtomMatchesCharTest,\ Escaped\_S)\ \{}
\DoxyCodeLine{00644\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'S'},\ \textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00645\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'S'},\ \textcolor{charliteral}{'\(\backslash\)r'}));}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'S'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00648\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'S'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00649\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'S'},\ \textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00650\ \}}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ TEST(AtomMatchesCharTest,\ Escaped\_w)\ \{}
\DoxyCodeLine{00653\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00654\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'+'}));}
\DoxyCodeLine{00655\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00656\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'0'}));}
\DoxyCodeLine{00659\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'b'}));}
\DoxyCodeLine{00660\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'C'}));}
\DoxyCodeLine{00661\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00662\ \}}
\DoxyCodeLine{00663\ }
\DoxyCodeLine{00664\ TEST(AtomMatchesCharTest,\ Escaped\_W)\ \{}
\DoxyCodeLine{00665\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'A'}));}
\DoxyCodeLine{00666\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'b'}));}
\DoxyCodeLine{00667\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'9'}));}
\DoxyCodeLine{00668\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'\_'}));}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00671\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'*'}));}
\DoxyCodeLine{00672\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'W'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00673\ \}}
\DoxyCodeLine{00674\ }
\DoxyCodeLine{00675\ TEST(AtomMatchesCharTest,\ EscapedWhiteSpace)\ \{}
\DoxyCodeLine{00676\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'f'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00677\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'f'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00678\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'n'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00679\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'n'},\ \textcolor{charliteral}{'\(\backslash\)r'}));}
\DoxyCodeLine{00680\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'r'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00681\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'r'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00682\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'t'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00683\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'t'},\ \textcolor{charliteral}{'t'}));}
\DoxyCodeLine{00684\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'v'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00685\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'v'},\ \textcolor{charliteral}{'\(\backslash\)f'}));}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'f'},\ \textcolor{charliteral}{'\(\backslash\)f'}));}
\DoxyCodeLine{00688\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'n'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00689\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'r'},\ \textcolor{charliteral}{'\(\backslash\)r'}));}
\DoxyCodeLine{00690\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'t'},\ \textcolor{charliteral}{'\(\backslash\)t'}));}
\DoxyCodeLine{00691\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{true},\ \textcolor{charliteral}{'v'},\ \textcolor{charliteral}{'\(\backslash\)v'}));}
\DoxyCodeLine{00692\ \}}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ TEST(AtomMatchesCharTest,\ UnescapedDot)\ \{}
\DoxyCodeLine{00695\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00698\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'.'}));}
\DoxyCodeLine{00699\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00700\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'\ '}));}
\DoxyCodeLine{00701\ \}}
\DoxyCodeLine{00702\ }
\DoxyCodeLine{00703\ TEST(AtomMatchesCharTest,\ UnescapedChar)\ \{}
\DoxyCodeLine{00704\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'\(\backslash\)0'}));}
\DoxyCodeLine{00705\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'b'}));}
\DoxyCodeLine{00706\ \ \ EXPECT\_FALSE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'\$'},\ \textcolor{charliteral}{'a'}));}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'\$'},\ \textcolor{charliteral}{'\$'}));}
\DoxyCodeLine{00709\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'5'},\ \textcolor{charliteral}{'5'}));}
\DoxyCodeLine{00710\ \ \ EXPECT\_TRUE(AtomMatchesChar(\textcolor{keyword}{false},\ \textcolor{charliteral}{'Z'},\ \textcolor{charliteral}{'Z'}));}
\DoxyCodeLine{00711\ \}}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ TEST(ValidateRegexTest,\ GeneratesFailureAndReturnsFalseForInvalid)\ \{}
\DoxyCodeLine{00714\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(NULL)),}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}NULL\ is\ not\ a\ valid\ simple\ regular\ expression"{}});}
\DoxyCodeLine{00716\ \ \ EXPECT\_NONFATAL\_FAILURE(}
\DoxyCodeLine{00717\ \ \ \ \ \ \ ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}a\(\backslash\)\(\backslash\)"{}})),}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Syntax\ error\ at\ index\ 1\ in\ simple\ regular\ expression\ \(\backslash\)"{}a\(\backslash\)\(\backslash\)\(\backslash\)"{}:\ "{}});}
\DoxyCodeLine{00719\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}a\(\backslash\)\(\backslash\)"{}})),}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\(\backslash\)\(\backslash\)'\ cannot\ appear\ at\ the\ end"{}});}
\DoxyCodeLine{00721\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)n\(\backslash\)\(\backslash\)"{}})),}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\(\backslash\)\(\backslash\)'\ cannot\ appear\ at\ the\ end"{}});}
\DoxyCodeLine{00723\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)s\(\backslash\)\(\backslash\)hb"{}})),}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}invalid\ escape\ sequence\ \(\backslash\)"{}\(\backslash\)\(\backslash\)h\(\backslash\)"{}"{}});}
\DoxyCodeLine{00725\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\string^\string^"{}})),}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\string^'\ can\ only\ appear\ at\ the\ beginning"{}});}
\DoxyCodeLine{00727\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}.*\string^b"{}})),}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\string^'\ can\ only\ appear\ at\ the\ beginning"{}});}
\DoxyCodeLine{00729\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\$\$"{}})),}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\$'\ can\ only\ appear\ at\ the\ end"{}});}
\DoxyCodeLine{00731\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\string^\$a"{}})),}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\$'\ can\ only\ appear\ at\ the\ end"{}});}
\DoxyCodeLine{00733\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}a(b"{}})),}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'('\ is\ unsupported"{}});}
\DoxyCodeLine{00735\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}ab)"{}})),}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}')'\ is\ unsupported"{}});}
\DoxyCodeLine{00737\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}[ab"{}})),}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'['\ is\ unsupported"{}});}
\DoxyCodeLine{00739\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}a\{2"{}})),}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'\{'\ is\ unsupported"{}});}
\DoxyCodeLine{00741\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}?"{}})),}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'?'\ can\ only\ follow\ a\ repeatable\ token"{}});}
\DoxyCodeLine{00743\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}\string^*"{}})),}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'*'\ can\ only\ follow\ a\ repeatable\ token"{}});}
\DoxyCodeLine{00745\ \ \ EXPECT\_NONFATAL\_FAILURE(ASSERT\_FALSE(ValidateRegex(\textcolor{stringliteral}{"{}5*+"{}})),}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'+'\ can\ only\ follow\ a\ repeatable\ token"{}});}
\DoxyCodeLine{00747\ \}}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ TEST(ValidateRegexTest,\ ReturnsTrueForValid)\ \{}
\DoxyCodeLine{00750\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00751\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}a"{}}));}
\DoxyCodeLine{00752\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}.*"{}}));}
\DoxyCodeLine{00753\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}\string^a\_+"{}}));}
\DoxyCodeLine{00754\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}\string^a\(\backslash\)\(\backslash\)t\(\backslash\)\(\backslash\)\&?"{}}));}
\DoxyCodeLine{00755\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}09*\$"{}}));}
\DoxyCodeLine{00756\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}\string^Z\$"{}}));}
\DoxyCodeLine{00757\ \ \ EXPECT\_TRUE(ValidateRegex(\textcolor{stringliteral}{"{}a\(\backslash\)\(\backslash\)\string^Z\(\backslash\)\(\backslash\)\$\(\backslash\)\(\backslash\)(\(\backslash\)\(\backslash\))\(\backslash\)\(\backslash\)|\(\backslash\)\(\backslash\)[\(\backslash\)\(\backslash\)]\(\backslash\)\(\backslash\)\{\(\backslash\)\(\backslash\)\}"{}}));}
\DoxyCodeLine{00758\ \}}
\DoxyCodeLine{00759\ }
\DoxyCodeLine{00760\ TEST(MatchRepetitionAndRegexAtHeadTest,\ WorksForZeroOrOne)\ \{}
\DoxyCodeLine{00761\ \ \ EXPECT\_FALSE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'?'},\ \textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}ba"{}}));}
\DoxyCodeLine{00762\ \ \ \textcolor{comment}{//\ Repeating\ more\ than\ once.}}
\DoxyCodeLine{00763\ \ \ EXPECT\_FALSE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'?'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}aab"{}}));}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \ \ \textcolor{comment}{//\ Repeating\ zero\ times.}}
\DoxyCodeLine{00766\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'?'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}ba"{}}));}
\DoxyCodeLine{00767\ \ \ \textcolor{comment}{//\ Repeating\ once.}}
\DoxyCodeLine{00768\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'a'},\ \textcolor{charliteral}{'?'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00769\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'\#'},\ \textcolor{charliteral}{'?'},\ \textcolor{stringliteral}{"{}."{}},\ \textcolor{stringliteral}{"{}\#\#"{}}));}
\DoxyCodeLine{00770\ \}}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ TEST(MatchRepetitionAndRegexAtHeadTest,\ WorksForZeroOrMany)\ \{}
\DoxyCodeLine{00773\ \ \ EXPECT\_FALSE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'*'},\ \textcolor{stringliteral}{"{}a\$"{}},\ \textcolor{stringliteral}{"{}baab"{}}));}
\DoxyCodeLine{00774\ }
\DoxyCodeLine{00775\ \ \ \textcolor{comment}{//\ Repeating\ zero\ times.}}
\DoxyCodeLine{00776\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'*'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}bc"{}}));}
\DoxyCodeLine{00777\ \ \ \textcolor{comment}{//\ Repeating\ once.}}
\DoxyCodeLine{00778\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'*'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}abc"{}}));}
\DoxyCodeLine{00779\ \ \ \textcolor{comment}{//\ Repeating\ more\ than\ once.}}
\DoxyCodeLine{00780\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'*'},\ \textcolor{stringliteral}{"{}-\/"{}},\ \textcolor{stringliteral}{"{}ab\_1-\/g"{}}));}
\DoxyCodeLine{00781\ \}}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ TEST(MatchRepetitionAndRegexAtHeadTest,\ WorksForOneOrMany)\ \{}
\DoxyCodeLine{00784\ \ \ EXPECT\_FALSE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'+'},\ \textcolor{stringliteral}{"{}a\$"{}},\ \textcolor{stringliteral}{"{}baab"{}}));}
\DoxyCodeLine{00785\ \ \ \textcolor{comment}{//\ Repeating\ zero\ times.}}
\DoxyCodeLine{00786\ \ \ EXPECT\_FALSE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'+'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}bc"{}}));}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \textcolor{comment}{//\ Repeating\ once.}}
\DoxyCodeLine{00789\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{false},\ \textcolor{charliteral}{'.'},\ \textcolor{charliteral}{'+'},\ \textcolor{stringliteral}{"{}b"{}},\ \textcolor{stringliteral}{"{}abc"{}}));}
\DoxyCodeLine{00790\ \ \ \textcolor{comment}{//\ Repeating\ more\ than\ once.}}
\DoxyCodeLine{00791\ \ \ EXPECT\_TRUE(MatchRepetitionAndRegexAtHead(\textcolor{keyword}{true},\ \textcolor{charliteral}{'w'},\ \textcolor{charliteral}{'+'},\ \textcolor{stringliteral}{"{}-\/"{}},\ \textcolor{stringliteral}{"{}ab\_1-\/g"{}}));}
\DoxyCodeLine{00792\ \}}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ TEST(MatchRegexAtHeadTest,\ ReturnsTrueForEmptyRegex)\ \{}
\DoxyCodeLine{00795\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00796\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00797\ \}}
\DoxyCodeLine{00798\ }
\DoxyCodeLine{00799\ TEST(MatchRegexAtHeadTest,\ WorksWhenDollarIsInRegex)\ \{}
\DoxyCodeLine{00800\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\$"{}},\ \textcolor{stringliteral}{"{}a"{}}));}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\$"{}},\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00803\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}a\$"{}},\ \textcolor{stringliteral}{"{}a"{}}));}
\DoxyCodeLine{00804\ \}}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ TEST(MatchRegexAtHeadTest,\ WorksWhenRegexStartsWithEscapeSequence)\ \{}
\DoxyCodeLine{00807\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)w"{}},\ \textcolor{stringliteral}{"{}+"{}}));}
\DoxyCodeLine{00808\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)W"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00810\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)sa"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)nab"{}}));}
\DoxyCodeLine{00811\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)d"{}},\ \textcolor{stringliteral}{"{}1a"{}}));}
\DoxyCodeLine{00812\ \}}
\DoxyCodeLine{00813\ }
\DoxyCodeLine{00814\ TEST(MatchRegexAtHeadTest,\ WorksWhenRegexStartsWithRepetition)\ \{}
\DoxyCodeLine{00815\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}.+a"{}},\ \textcolor{stringliteral}{"{}abc"{}}));}
\DoxyCodeLine{00816\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}a?b"{}},\ \textcolor{stringliteral}{"{}aab"{}}));}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}.*a"{}},\ \textcolor{stringliteral}{"{}bc12-\/ab"{}}));}
\DoxyCodeLine{00819\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}a?b"{}},\ \textcolor{stringliteral}{"{}b"{}}));}
\DoxyCodeLine{00820\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}a?b"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00821\ \}}
\DoxyCodeLine{00822\ }
\DoxyCodeLine{00823\ TEST(MatchRegexAtHeadTest,\ WorksWhenRegexStartsWithRepetionOfEscapeSequence)\ \{}
\DoxyCodeLine{00824\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\).+a"{}},\ \textcolor{stringliteral}{"{}abc"{}}));}
\DoxyCodeLine{00825\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)s?b"{}},\ \textcolor{stringliteral}{"{}\ \ b"{}}));}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)(*a"{}},\ \textcolor{stringliteral}{"{}((((ab"{}}));}
\DoxyCodeLine{00828\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)\string^?b"{}},\ \textcolor{stringliteral}{"{}\string^b"{}}));}
\DoxyCodeLine{00829\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)?b"{}},\ \textcolor{stringliteral}{"{}b"{}}));}
\DoxyCodeLine{00830\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)?b"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)b"{}}));}
\DoxyCodeLine{00831\ \}}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ TEST(MatchRegexAtHeadTest,\ MatchesSequentially)\ \{}
\DoxyCodeLine{00834\ \ \ EXPECT\_FALSE(MatchRegexAtHead(\textcolor{stringliteral}{"{}ab.*c"{}},\ \textcolor{stringliteral}{"{}acabc"{}}));}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \ \ EXPECT\_TRUE(MatchRegexAtHead(\textcolor{stringliteral}{"{}ab.*c"{}},\ \textcolor{stringliteral}{"{}ab-\/fsc"{}}));}
\DoxyCodeLine{00837\ \}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ TEST(MatchRegexAnywhereTest,\ ReturnsFalseWhenStringIsNull)\ \{}
\DoxyCodeLine{00840\ \ \ EXPECT\_FALSE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}"{}},\ NULL));}
\DoxyCodeLine{00841\ \}}
\DoxyCodeLine{00842\ }
\DoxyCodeLine{00843\ TEST(MatchRegexAnywhereTest,\ WorksWhenRegexStartsWithCaret)\ \{}
\DoxyCodeLine{00844\ \ \ EXPECT\_FALSE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\string^a"{}},\ \textcolor{stringliteral}{"{}ba"{}}));}
\DoxyCodeLine{00845\ \ \ EXPECT\_FALSE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\string^\$"{}},\ \textcolor{stringliteral}{"{}a"{}}));}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\string^a"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00848\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\string^"{}},\ \textcolor{stringliteral}{"{}ab"{}}));}
\DoxyCodeLine{00849\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\string^\$"{}},\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00850\ \}}
\DoxyCodeLine{00851\ }
\DoxyCodeLine{00852\ TEST(MatchRegexAnywhereTest,\ ReturnsFalseWhenNoMatch)\ \{}
\DoxyCodeLine{00853\ \ \ EXPECT\_FALSE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}a"{}},\ \textcolor{stringliteral}{"{}bcde123"{}}));}
\DoxyCodeLine{00854\ \ \ EXPECT\_FALSE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}a.+a"{}},\ \textcolor{stringliteral}{"{}-\/-\/aa88888888"{}}));}
\DoxyCodeLine{00855\ \}}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ TEST(MatchRegexAnywhereTest,\ ReturnsTrueWhenMatchingPrefix)\ \{}
\DoxyCodeLine{00858\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)w+"{}},\ \textcolor{stringliteral}{"{}ab1\_\ -\/\ 5"{}}));}
\DoxyCodeLine{00859\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}.*="{}},\ \textcolor{stringliteral}{"{}="{}}));}
\DoxyCodeLine{00860\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}x.*ab?.*bc"{}},\ \textcolor{stringliteral}{"{}xaaabc"{}}));}
\DoxyCodeLine{00861\ \}}
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ TEST(MatchRegexAnywhereTest,\ ReturnsTrueWhenMatchingNonPrefix)\ \{}
\DoxyCodeLine{00864\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)w+"{}},\ \textcolor{stringliteral}{"{}\$\$\$\ ab1\_\ -\/\ 5"{}}));}
\DoxyCodeLine{00865\ \ \ EXPECT\_TRUE(MatchRegexAnywhere(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\).+="{}},\ \textcolor{stringliteral}{"{}=\ \ ...="{}}));}
\DoxyCodeLine{00866\ \}}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \textcolor{comment}{//\ Tests\ RE's\ implicit\ constructors.}}
\DoxyCodeLine{00869\ TEST(RETest,\ ImplicitConstructorWorks)\ \{}
\DoxyCodeLine{00870\ \ \ \textcolor{keyword}{const}\ RE\ empty(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00871\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}"{}},\ empty.pattern());}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \ \ \textcolor{keyword}{const}\ RE\ simple(\textcolor{stringliteral}{"{}hello"{}});}
\DoxyCodeLine{00874\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}hello"{}},\ simple.pattern());}
\DoxyCodeLine{00875\ \}}
\DoxyCodeLine{00876\ }
\DoxyCodeLine{00877\ \textcolor{comment}{//\ Tests\ that\ RE's\ constructors\ reject\ invalid\ regular\ expressions.}}
\DoxyCodeLine{00878\ TEST(RETest,\ RejectsInvalidRegex)\ \{}
\DoxyCodeLine{00879\ \ \ EXPECT\_NONFATAL\_FAILURE(\{\ \textcolor{keyword}{const}\ RE\ normal(NULL);\ \},}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}NULL\ is\ not\ a\ valid\ simple\ regular\ expression"{}});}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \ \ EXPECT\_NONFATAL\_FAILURE(\{\ \textcolor{keyword}{const}\ RE\ normal(\textcolor{stringliteral}{"{}.*(\(\backslash\)\(\backslash\)w+"{}});\ \},}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'('\ is\ unsupported"{}});}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ EXPECT\_NONFATAL\_FAILURE(\{\ \textcolor{keyword}{const}\ RE\ invalid(\textcolor{stringliteral}{"{}\string^?"{}});\ \},}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}'?'\ can\ only\ follow\ a\ repeatable\ token"{}});}
\DoxyCodeLine{00887\ \}}
\DoxyCodeLine{00888\ }
\DoxyCodeLine{00889\ \textcolor{comment}{//\ Tests\ RE::FullMatch().}}
\DoxyCodeLine{00890\ TEST(RETest,\ FullMatchWorks)\ \{}
\DoxyCodeLine{00891\ \ \ \textcolor{keyword}{const}\ RE\ empty(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00892\ \ \ EXPECT\_TRUE(RE::FullMatch(\textcolor{stringliteral}{"{}"{}},\ empty));}
\DoxyCodeLine{00893\ \ \ EXPECT\_FALSE(RE::FullMatch(\textcolor{stringliteral}{"{}a"{}},\ empty));}
\DoxyCodeLine{00894\ }
\DoxyCodeLine{00895\ \ \ \textcolor{keyword}{const}\ RE\ re1(\textcolor{stringliteral}{"{}a"{}});}
\DoxyCodeLine{00896\ \ \ EXPECT\_TRUE(RE::FullMatch(\textcolor{stringliteral}{"{}a"{}},\ re1));}
\DoxyCodeLine{00897\ }
\DoxyCodeLine{00898\ \ \ \textcolor{keyword}{const}\ RE\ re(\textcolor{stringliteral}{"{}a.*z"{}});}
\DoxyCodeLine{00899\ \ \ EXPECT\_TRUE(RE::FullMatch(\textcolor{stringliteral}{"{}az"{}},\ re));}
\DoxyCodeLine{00900\ \ \ EXPECT\_TRUE(RE::FullMatch(\textcolor{stringliteral}{"{}axyz"{}},\ re));}
\DoxyCodeLine{00901\ \ \ EXPECT\_FALSE(RE::FullMatch(\textcolor{stringliteral}{"{}baz"{}},\ re));}
\DoxyCodeLine{00902\ \ \ EXPECT\_FALSE(RE::FullMatch(\textcolor{stringliteral}{"{}azy"{}},\ re));}
\DoxyCodeLine{00903\ \}}
\DoxyCodeLine{00904\ }
\DoxyCodeLine{00905\ \textcolor{comment}{//\ Tests\ RE::PartialMatch().}}
\DoxyCodeLine{00906\ TEST(RETest,\ PartialMatchWorks)\ \{}
\DoxyCodeLine{00907\ \ \ \textcolor{keyword}{const}\ RE\ empty(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00908\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}"{}},\ empty));}
\DoxyCodeLine{00909\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}a"{}},\ empty));}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \ \ \textcolor{keyword}{const}\ RE\ re(\textcolor{stringliteral}{"{}a.*z"{}});}
\DoxyCodeLine{00912\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}az"{}},\ re));}
\DoxyCodeLine{00913\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}axyz"{}},\ re));}
\DoxyCodeLine{00914\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}baz"{}},\ re));}
\DoxyCodeLine{00915\ \ \ EXPECT\_TRUE(RE::PartialMatch(\textcolor{stringliteral}{"{}azy"{}},\ re));}
\DoxyCodeLine{00916\ \ \ EXPECT\_FALSE(RE::PartialMatch(\textcolor{stringliteral}{"{}zza"{}},\ re));}
\DoxyCodeLine{00917\ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_USES\_POSIX\_RE}}
\DoxyCodeLine{00920\ }
\DoxyCodeLine{00921\ \textcolor{preprocessor}{\#ifndef\ GTEST\_OS\_WINDOWS\_MOBILE}}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ TEST(CaptureTest,\ CapturesStdout)\ \{}
\DoxyCodeLine{00924\ \ \ CaptureStdout();}
\DoxyCodeLine{00925\ \ \ fprintf(stdout,\ \textcolor{stringliteral}{"{}abc"{}});}
\DoxyCodeLine{00926\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}abc"{}},\ GetCapturedStdout().c\_str());}
\DoxyCodeLine{00927\ }
\DoxyCodeLine{00928\ \ \ CaptureStdout();}
\DoxyCodeLine{00929\ \ \ fprintf(stdout,\ \textcolor{stringliteral}{"{}def\%cghi"{}},\ \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{00930\ \ \ EXPECT\_EQ(::std::string(\textcolor{stringliteral}{"{}def\(\backslash\)0ghi"{}},\ 7),\ ::std::string(GetCapturedStdout()));}
\DoxyCodeLine{00931\ \}}
\DoxyCodeLine{00932\ }
\DoxyCodeLine{00933\ TEST(CaptureTest,\ CapturesStderr)\ \{}
\DoxyCodeLine{00934\ \ \ CaptureStderr();}
\DoxyCodeLine{00935\ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}jkl"{}});}
\DoxyCodeLine{00936\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}jkl"{}},\ GetCapturedStderr().c\_str());}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \ \ CaptureStderr();}
\DoxyCodeLine{00939\ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}jkl\%cmno"{}},\ \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{00940\ \ \ EXPECT\_EQ(::std::string(\textcolor{stringliteral}{"{}jkl\(\backslash\)0mno"{}},\ 7),\ ::std::string(GetCapturedStderr()));}
\DoxyCodeLine{00941\ \}}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00943\ \textcolor{comment}{//\ Tests\ that\ stdout\ and\ stderr\ capture\ don't\ interfere\ with\ each\ other.}}
\DoxyCodeLine{00944\ TEST(CaptureTest,\ CapturesStdoutAndStderr)\ \{}
\DoxyCodeLine{00945\ \ \ CaptureStdout();}
\DoxyCodeLine{00946\ \ \ CaptureStderr();}
\DoxyCodeLine{00947\ \ \ fprintf(stdout,\ \textcolor{stringliteral}{"{}pqr"{}});}
\DoxyCodeLine{00948\ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}stu"{}});}
\DoxyCodeLine{00949\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}pqr"{}},\ GetCapturedStdout().c\_str());}
\DoxyCodeLine{00950\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}stu"{}},\ GetCapturedStderr().c\_str());}
\DoxyCodeLine{00951\ \}}
\DoxyCodeLine{00952\ }
\DoxyCodeLine{00953\ TEST(CaptureDeathTest,\ CannotReenterStdoutCapture)\ \{}
\DoxyCodeLine{00954\ \ \ CaptureStdout();}
\DoxyCodeLine{00955\ \ \ EXPECT\_DEATH\_IF\_SUPPORTED(CaptureStdout(),}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Only\ one\ stdout\ capturer\ can\ exist\ at\ a\ time"{}});}
\DoxyCodeLine{00957\ \ \ GetCapturedStdout();}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \textcolor{comment}{//\ We\ cannot\ test\ stderr\ capturing\ using\ death\ tests\ as\ they\ use\ it}}
\DoxyCodeLine{00960\ \ \ \textcolor{comment}{//\ themselves.}}
\DoxyCodeLine{00961\ \}}
\DoxyCodeLine{00962\ }
\DoxyCodeLine{00963\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ !GTEST\_OS\_WINDOWS\_MOBILE}}
\DoxyCodeLine{00964\ }
\DoxyCodeLine{00965\ TEST(ThreadLocalTest,\ DefaultConstructorInitializesToDefaultValues)\ \{}
\DoxyCodeLine{00966\ \ \ ThreadLocal<int>\ t1;}
\DoxyCodeLine{00967\ \ \ EXPECT\_EQ(0,\ t1.get());}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ \ \ ThreadLocal<void*>\ t2;}
\DoxyCodeLine{00970\ \ \ EXPECT\_TRUE(t2.get()\ ==\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00971\ \}}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ TEST(ThreadLocalTest,\ SingleParamConstructorInitializesToParam)\ \{}
\DoxyCodeLine{00974\ \ \ ThreadLocal<int>\ t1(123);}
\DoxyCodeLine{00975\ \ \ EXPECT\_EQ(123,\ t1.get());}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00978\ \ \ ThreadLocal<int*>\ t2(\&i);}
\DoxyCodeLine{00979\ \ \ EXPECT\_EQ(\&i,\ t2.get());}
\DoxyCodeLine{00980\ \}}
\DoxyCodeLine{00981\ }
\DoxyCodeLine{00982\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtesting_1_1internal_1_1NoDefaultConstructor}{NoDefaultConstructor}}\ \{}
\DoxyCodeLine{00983\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00984\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtesting_1_1internal_1_1NoDefaultConstructor}{NoDefaultConstructor}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\ \{\}}
\DoxyCodeLine{00985\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1NoDefaultConstructor}{NoDefaultConstructor}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classtesting_1_1internal_1_1NoDefaultConstructor}{NoDefaultConstructor}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00986\ \};}
\DoxyCodeLine{00987\ }
\DoxyCodeLine{00988\ TEST(ThreadLocalTest,\ ValueDefaultContructorIsNotRequiredForParamVersion)\ \{}
\DoxyCodeLine{00989\ \ \ \mbox{\hyperlink{classtesting_1_1internal_1_1ThreadLocal}{ThreadLocal<NoDefaultConstructor>}}\ bar(\mbox{\hyperlink{classtesting_1_1internal_1_1NoDefaultConstructor}{NoDefaultConstructor}}(\textcolor{stringliteral}{"{}foo"{}}));}
\DoxyCodeLine{00990\ \ \ bar.pointer();}
\DoxyCodeLine{00991\ \}}
\DoxyCodeLine{00992\ }
\DoxyCodeLine{00993\ TEST(ThreadLocalTest,\ GetAndPointerReturnSameValue)\ \{}
\DoxyCodeLine{00994\ \ \ ThreadLocal<std::string>\ thread\_local\_string;}
\DoxyCodeLine{00995\ }
\DoxyCodeLine{00996\ \ \ EXPECT\_EQ(thread\_local\_string.pointer(),\ \&(thread\_local\_string.get()));}
\DoxyCodeLine{00997\ }
\DoxyCodeLine{00998\ \ \ \textcolor{comment}{//\ Verifies\ the\ condition\ still\ holds\ after\ calling\ set.}}
\DoxyCodeLine{00999\ \ \ thread\_local\_string.set(\textcolor{stringliteral}{"{}foo"{}});}
\DoxyCodeLine{01000\ \ \ EXPECT\_EQ(thread\_local\_string.pointer(),\ \&(thread\_local\_string.get()));}
\DoxyCodeLine{01001\ \}}
\DoxyCodeLine{01002\ }
\DoxyCodeLine{01003\ TEST(ThreadLocalTest,\ PointerAndConstPointerReturnSameValue)\ \{}
\DoxyCodeLine{01004\ \ \ ThreadLocal<std::string>\ thread\_local\_string;}
\DoxyCodeLine{01005\ \ \ \textcolor{keyword}{const}\ ThreadLocal<std::string>\&\ const\_thread\_local\_string\ =}
\DoxyCodeLine{01006\ \ \ \ \ \ \ thread\_local\_string;}
\DoxyCodeLine{01007\ }
\DoxyCodeLine{01008\ \ \ EXPECT\_EQ(thread\_local\_string.pointer(),\ const\_thread\_local\_string.pointer());}
\DoxyCodeLine{01009\ }
\DoxyCodeLine{01010\ \ \ thread\_local\_string.set(\textcolor{stringliteral}{"{}foo"{}});}
\DoxyCodeLine{01011\ \ \ EXPECT\_EQ(thread\_local\_string.pointer(),\ const\_thread\_local\_string.pointer());}
\DoxyCodeLine{01012\ \}}
\DoxyCodeLine{01013\ }
\DoxyCodeLine{01014\ \textcolor{preprocessor}{\#ifdef\ GTEST\_IS\_THREADSAFE}}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ \textcolor{keywordtype}{void}\ AddTwo(\textcolor{keywordtype}{int}*\ param)\ \{\ *param\ +=\ 2;\ \}}
\DoxyCodeLine{01017\ }
\DoxyCodeLine{01018\ TEST(ThreadWithParamTest,\ ConstructorExecutesThreadFunc)\ \{}
\DoxyCodeLine{01019\ \ \ \textcolor{keywordtype}{int}\ i\ =\ 40;}
\DoxyCodeLine{01020\ \ \ ThreadWithParam<int*>\ thread(\&AddTwo,\ \&i,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{01021\ \ \ thread.Join();}
\DoxyCodeLine{01022\ \ \ EXPECT\_EQ(42,\ i);}
\DoxyCodeLine{01023\ \}}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ TEST(MutexDeathTest,\ AssertHeldShouldAssertWhenNotLocked)\ \{}
\DoxyCodeLine{01026\ \ \ \textcolor{comment}{//\ AssertHeld()\ is\ flaky\ only\ in\ the\ presence\ of\ multiple\ threads\ accessing}}
\DoxyCodeLine{01027\ \ \ \textcolor{comment}{//\ the\ lock.\ In\ this\ case,\ the\ test\ is\ robust.}}
\DoxyCodeLine{01028\ \ \ EXPECT\_DEATH\_IF\_SUPPORTED(}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ Mutex\ m;}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \{\ MutexLock\ lock(\&m);\ \}}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ m.AssertHeld();}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \},}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}thread\ .*hold"{}});}
\DoxyCodeLine{01035\ \}}
\DoxyCodeLine{01036\ }
\DoxyCodeLine{01037\ TEST(MutexTest,\ AssertHeldShouldNotAssertWhenLocked)\ \{}
\DoxyCodeLine{01038\ \ \ Mutex\ m;}
\DoxyCodeLine{01039\ \ \ MutexLock\ lock(\&m);}
\DoxyCodeLine{01040\ \ \ m.AssertHeld();}
\DoxyCodeLine{01041\ \}}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \textcolor{keyword}{class\ }AtomicCounterWithMutex\ \{}
\DoxyCodeLine{01044\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01045\ \ \ \textcolor{keyword}{explicit}\ AtomicCounterWithMutex(Mutex*\ mutex)}
\DoxyCodeLine{01046\ \ \ \ \ \ \ :\ value\_(0),\ mutex\_(mutex),\ random\_(42)\ \{\}}
\DoxyCodeLine{01047\ }
\DoxyCodeLine{01048\ \ \ \textcolor{keywordtype}{void}\ Increment()\ \{}
\DoxyCodeLine{01049\ \ \ \ \ MutexLock\ lock(mutex\_);}
\DoxyCodeLine{01050\ \ \ \ \ \textcolor{keywordtype}{int}\ temp\ =\ value\_;}
\DoxyCodeLine{01051\ \ \ \ \ \{}
\DoxyCodeLine{01052\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ put\ up\ a\ memory\ barrier\ to\ prevent\ reads\ and\ writes\ to}}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \textcolor{comment}{//\ value\_\ rearranged\ with\ the\ call\ to\ sleep\_for\ when\ observed}}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \textcolor{comment}{//\ from\ other\ threads.}}
\DoxyCodeLine{01055\ \textcolor{preprocessor}{\#if\ GTEST\_HAS\_PTHREAD}}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \textcolor{comment}{//\ On\ POSIX,\ locking\ a\ mutex\ puts\ up\ a\ memory\ barrier.\ \ We\ cannot\ use}}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \textcolor{comment}{//\ Mutex\ and\ MutexLock\ here\ or\ rely\ on\ their\ memory\ barrier}}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \textcolor{comment}{//\ functionality\ as\ we\ are\ testing\ them\ here.}}
\DoxyCodeLine{01059\ \ \ \ \ \ \ pthread\_mutex\_t\ memory\_barrier\_mutex;}
\DoxyCodeLine{01060\ \ \ \ \ \ \ GTEST\_CHECK\_POSIX\_SUCCESS\_(}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ pthread\_mutex\_init(\&memory\_barrier\_mutex,\ \textcolor{keyword}{nullptr}));}
\DoxyCodeLine{01062\ \ \ \ \ \ \ GTEST\_CHECK\_POSIX\_SUCCESS\_(pthread\_mutex\_lock(\&memory\_barrier\_mutex));}
\DoxyCodeLine{01063\ }
\DoxyCodeLine{01064\ \ \ \ \ \ \ std::this\_thread::sleep\_for(}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \ \ std::chrono::milliseconds(random\_.Generate(30)));}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ \ \ \ \ GTEST\_CHECK\_POSIX\_SUCCESS\_(pthread\_mutex\_unlock(\&memory\_barrier\_mutex));}
\DoxyCodeLine{01068\ \ \ \ \ \ \ GTEST\_CHECK\_POSIX\_SUCCESS\_(pthread\_mutex\_destroy(\&memory\_barrier\_mutex));}
\DoxyCodeLine{01069\ \textcolor{preprocessor}{\#elif\ defined(GTEST\_OS\_WINDOWS)}}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \textcolor{comment}{//\ On\ Windows,\ performing\ an\ interlocked\ access\ puts\ up\ a\ memory\ barrier.}}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \textcolor{keyword}{volatile}\ LONG\ dummy\ =\ 0;}
\DoxyCodeLine{01072\ \ \ \ \ \ \ ::InterlockedIncrement(\&dummy);}
\DoxyCodeLine{01073\ \ \ \ \ \ \ std::this\_thread::sleep\_for(}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ std::chrono::milliseconds(random\_.Generate(30)));}
\DoxyCodeLine{01075\ \ \ \ \ \ \ ::InterlockedIncrement(\&dummy);}
\DoxyCodeLine{01076\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01077\ \textcolor{preprocessor}{\#error\ "{}Memory\ barrier\ not\ implemented\ on\ this\ platform."{}}}
\DoxyCodeLine{01078\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_HAS\_PTHREAD}}
\DoxyCodeLine{01079\ \ \ \ \ \}}
\DoxyCodeLine{01080\ \ \ \ \ value\_\ =\ temp\ +\ 1;}
\DoxyCodeLine{01081\ \ \ \}}
\DoxyCodeLine{01082\ \ \ \textcolor{keywordtype}{int}\ value()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ value\_;\ \}}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01085\ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{int}\ value\_;}
\DoxyCodeLine{01086\ \ \ Mutex*\ \textcolor{keyword}{const}\ mutex\_;\ \ \textcolor{comment}{//\ Protects\ value\_.}}
\DoxyCodeLine{01087\ \ \ Random\ random\_;}
\DoxyCodeLine{01088\ \};}
\DoxyCodeLine{01089\ }
\DoxyCodeLine{01090\ \textcolor{keywordtype}{void}\ CountingThreadFunc(pair<AtomicCounterWithMutex*,\ int>\ param)\ \{}
\DoxyCodeLine{01091\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ param.second;\ ++i)\ param.first-\/>Increment();}
\DoxyCodeLine{01092\ \}}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \textcolor{comment}{//\ Tests\ that\ the\ mutex\ only\ lets\ one\ thread\ at\ a\ time\ to\ lock\ it.}}
\DoxyCodeLine{01095\ TEST(MutexTest,\ OnlyOneThreadCanLockAtATime)\ \{}
\DoxyCodeLine{01096\ \ \ Mutex\ mutex;}
\DoxyCodeLine{01097\ \ \ AtomicCounterWithMutex\ locked\_counter(\&mutex);}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ \ \ \textcolor{keyword}{typedef}\ ThreadWithParam<pair<AtomicCounterWithMutex*,\ int>\ >\ ThreadType;}
\DoxyCodeLine{01100\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kCycleCount\ =\ 20;}
\DoxyCodeLine{01101\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kThreadCount\ =\ 7;}
\DoxyCodeLine{01102\ \ \ std::unique\_ptr<ThreadType>\ counting\_threads[kThreadCount];}
\DoxyCodeLine{01103\ \ \ Notification\ threads\_can\_start;}
\DoxyCodeLine{01104\ \ \ \textcolor{comment}{//\ Creates\ and\ runs\ kThreadCount\ threads\ that\ increment\ locked\_counter}}
\DoxyCodeLine{01105\ \ \ \textcolor{comment}{//\ kCycleCount\ times\ each.}}
\DoxyCodeLine{01106\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ kThreadCount;\ ++i)\ \{}
\DoxyCodeLine{01107\ \ \ \ \ counting\_threads[i]\ =\ std::make\_unique<ThreadType>(}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \&CountingThreadFunc,\ make\_pair(\&locked\_counter,\ kCycleCount),}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \&threads\_can\_start);}
\DoxyCodeLine{01110\ \ \ \}}
\DoxyCodeLine{01111\ \ \ threads\_can\_start.Notify();}
\DoxyCodeLine{01112\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ kThreadCount;\ ++i)\ counting\_threads[i]-\/>Join();}
\DoxyCodeLine{01113\ }
\DoxyCodeLine{01114\ \ \ \textcolor{comment}{//\ If\ the\ mutex\ lets\ more\ than\ one\ thread\ to\ increment\ the\ counter\ at\ a}}
\DoxyCodeLine{01115\ \ \ \textcolor{comment}{//\ time,\ they\ are\ likely\ to\ encounter\ a\ race\ condition\ and\ have\ some}}
\DoxyCodeLine{01116\ \ \ \textcolor{comment}{//\ increments\ overwritten,\ resulting\ in\ the\ lower\ then\ expected\ counter}}
\DoxyCodeLine{01117\ \ \ \textcolor{comment}{//\ value.}}
\DoxyCodeLine{01118\ \ \ EXPECT\_EQ(kCycleCount\ *\ kThreadCount,\ locked\_counter.value());}
\DoxyCodeLine{01119\ \}}
\DoxyCodeLine{01120\ }
\DoxyCodeLine{01121\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01122\ \textcolor{keywordtype}{void}\ RunFromThread(\textcolor{keywordtype}{void}(func)(T),\ T\ param)\ \{}
\DoxyCodeLine{01123\ \ \ ThreadWithParam<T>\ thread(func,\ param,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{01124\ \ \ thread.Join();}
\DoxyCodeLine{01125\ \}}
\DoxyCodeLine{01126\ }
\DoxyCodeLine{01127\ \textcolor{keywordtype}{void}\ RetrieveThreadLocalValue(}
\DoxyCodeLine{01128\ \ \ \ \ pair<ThreadLocal<std::string>*,\ std::string*>\ param)\ \{}
\DoxyCodeLine{01129\ \ \ *param.second\ =\ param.first-\/>get();}
\DoxyCodeLine{01130\ \}}
\DoxyCodeLine{01131\ }
\DoxyCodeLine{01132\ TEST(ThreadLocalTest,\ ParameterizedConstructorSetsDefault)\ \{}
\DoxyCodeLine{01133\ \ \ ThreadLocal<std::string>\ thread\_local\_string(\textcolor{stringliteral}{"{}foo"{}});}
\DoxyCodeLine{01134\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}foo"{}},\ thread\_local\_string.get().c\_str());}
\DoxyCodeLine{01135\ }
\DoxyCodeLine{01136\ \ \ thread\_local\_string.set(\textcolor{stringliteral}{"{}bar"{}});}
\DoxyCodeLine{01137\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}bar"{}},\ thread\_local\_string.get().c\_str());}
\DoxyCodeLine{01138\ }
\DoxyCodeLine{01139\ \ \ std::string\ result;}
\DoxyCodeLine{01140\ \ \ RunFromThread(\&RetrieveThreadLocalValue,}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ make\_pair(\&thread\_local\_string,\ \&result));}
\DoxyCodeLine{01142\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}foo"{}},\ result.c\_str());}
\DoxyCodeLine{01143\ \}}
\DoxyCodeLine{01144\ }
\DoxyCodeLine{01145\ \textcolor{comment}{//\ Keeps\ track\ of\ whether\ of\ destructors\ being\ called\ on\ instances\ of}}
\DoxyCodeLine{01146\ \textcolor{comment}{//\ DestructorTracker.\ \ On\ Windows,\ waits\ for\ the\ destructor\ call\ reports.}}
\DoxyCodeLine{01147\ \textcolor{keyword}{class\ }DestructorCall\ \{}
\DoxyCodeLine{01148\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01149\ \ \ DestructorCall()\ \{}
\DoxyCodeLine{01150\ \ \ \ \ invoked\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01151\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01152\ \ \ \ \ wait\_event\_.Reset(::CreateEvent(NULL,\ TRUE,\ FALSE,\ NULL));}
\DoxyCodeLine{01153\ \ \ \ \ GTEST\_CHECK\_(wait\_event\_.Get()\ !=\ NULL);}
\DoxyCodeLine{01154\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01155\ \ \ \}}
\DoxyCodeLine{01156\ }
\DoxyCodeLine{01157\ \ \ \textcolor{keywordtype}{bool}\ CheckDestroyed()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01158\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01159\ \ \ \ \ \textcolor{keywordflow}{if}\ (::WaitForSingleObject(wait\_event\_.Get(),\ 1000)\ !=\ WAIT\_OBJECT\_0)}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01161\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01162\ \ \ \ \ \textcolor{keywordflow}{return}\ invoked\_;}
\DoxyCodeLine{01163\ \ \ \}}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \ \ \textcolor{keywordtype}{void}\ ReportDestroyed()\ \{}
\DoxyCodeLine{01166\ \ \ \ \ invoked\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01167\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01168\ \ \ \ \ ::SetEvent(wait\_event\_.Get());}
\DoxyCodeLine{01169\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01170\ \ \ \}}
\DoxyCodeLine{01171\ }
\DoxyCodeLine{01172\ \ \ \textcolor{keyword}{static}\ std::vector<DestructorCall*>\&\ List()\ \{\ \textcolor{keywordflow}{return}\ *list\_;\ \}}
\DoxyCodeLine{01173\ }
\DoxyCodeLine{01174\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ ResetList()\ \{}
\DoxyCodeLine{01175\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ list\_-\/>size();\ ++i)\ \{}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ list\_-\/>at(i);}
\DoxyCodeLine{01177\ \ \ \ \ \}}
\DoxyCodeLine{01178\ \ \ \ \ list\_-\/>clear();}
\DoxyCodeLine{01179\ \ \ \}}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01182\ \ \ \textcolor{keywordtype}{bool}\ invoked\_;}
\DoxyCodeLine{01183\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01184\ \ \ AutoHandle\ wait\_event\_;}
\DoxyCodeLine{01185\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01186\ \ \ \textcolor{keyword}{static}\ std::vector<DestructorCall*>*\ \textcolor{keyword}{const}\ list\_;}
\DoxyCodeLine{01187\ }
\DoxyCodeLine{01188\ \ \ DestructorCall(\textcolor{keyword}{const}\ DestructorCall\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01189\ \ \ DestructorCall\&\ operator=(\textcolor{keyword}{const}\ DestructorCall\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01190\ \};}
\DoxyCodeLine{01191\ }
\DoxyCodeLine{01192\ std::vector<DestructorCall*>*\ \textcolor{keyword}{const}\ DestructorCall::list\_\ =}
\DoxyCodeLine{01193\ \ \ \ \ \textcolor{keyword}{new}\ std::vector<DestructorCall*>;}
\DoxyCodeLine{01194\ }
\DoxyCodeLine{01195\ \textcolor{comment}{//\ DestructorTracker\ keeps\ track\ of\ whether\ its\ instances\ have\ been}}
\DoxyCodeLine{01196\ \textcolor{comment}{//\ destroyed.}}
\DoxyCodeLine{01197\ \textcolor{keyword}{class\ }DestructorTracker\ \{}
\DoxyCodeLine{01198\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01199\ \ \ DestructorTracker()\ :\ index\_(GetNewIndex())\ \{\}}
\DoxyCodeLine{01200\ \ \ DestructorTracker(\textcolor{keyword}{const}\ DestructorTracker\&\ \textcolor{comment}{/*\ rhs\ */})}
\DoxyCodeLine{01201\ \ \ \ \ \ \ :\ index\_(GetNewIndex())\ \{\}}
\DoxyCodeLine{01202\ \ \ \string~DestructorTracker()\ \{}
\DoxyCodeLine{01203\ \ \ \ \ \textcolor{comment}{//\ We\ never\ access\ DestructorCall::List()\ concurrently,\ so\ we\ don't\ need}}
\DoxyCodeLine{01204\ \ \ \ \ \textcolor{comment}{//\ to\ protect\ this\ access\ with\ a\ mutex.}}
\DoxyCodeLine{01205\ \ \ \ \ DestructorCall::List()[index\_]-\/>ReportDestroyed();}
\DoxyCodeLine{01206\ \ \ \}}
\DoxyCodeLine{01207\ }
\DoxyCodeLine{01208\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01209\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ GetNewIndex()\ \{}
\DoxyCodeLine{01210\ \ \ \ \ DestructorCall::List().push\_back(\textcolor{keyword}{new}\ DestructorCall);}
\DoxyCodeLine{01211\ \ \ \ \ \textcolor{keywordflow}{return}\ DestructorCall::List().size()\ -\/\ 1;}
\DoxyCodeLine{01212\ \ \ \}}
\DoxyCodeLine{01213\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ index\_;}
\DoxyCodeLine{01214\ \};}
\DoxyCodeLine{01215\ }
\DoxyCodeLine{01216\ \textcolor{keyword}{typedef}\ ThreadLocal<DestructorTracker>*\ ThreadParam;}
\DoxyCodeLine{01217\ }
\DoxyCodeLine{01218\ \textcolor{keywordtype}{void}\ CallThreadLocalGet(ThreadParam\ thread\_local\_param)\ \{}
\DoxyCodeLine{01219\ \ \ thread\_local\_param-\/>get();}
\DoxyCodeLine{01220\ \}}
\DoxyCodeLine{01221\ }
\DoxyCodeLine{01222\ \textcolor{comment}{//\ Tests\ that\ when\ a\ ThreadLocal\ object\ dies\ in\ a\ thread,\ it\ destroys}}
\DoxyCodeLine{01223\ \textcolor{comment}{//\ the\ managed\ object\ for\ that\ thread.}}
\DoxyCodeLine{01224\ TEST(ThreadLocalTest,\ DestroysManagedObjectForOwnThreadWhenDying)\ \{}
\DoxyCodeLine{01225\ \ \ DestructorCall::ResetList();}
\DoxyCodeLine{01226\ }
\DoxyCodeLine{01227\ \ \ \{}
\DoxyCodeLine{01228\ \ \ \ \ ThreadLocal<DestructorTracker>\ thread\_local\_tracker;}
\DoxyCodeLine{01229\ \ \ \ \ ASSERT\_EQ(0U,\ DestructorCall::List().size());}
\DoxyCodeLine{01230\ }
\DoxyCodeLine{01231\ \ \ \ \ \textcolor{comment}{//\ This\ creates\ another\ DestructorTracker\ object\ for\ the\ main\ thread.}}
\DoxyCodeLine{01232\ \ \ \ \ thread\_local\_tracker.get();}
\DoxyCodeLine{01233\ \ \ \ \ ASSERT\_EQ(1U,\ DestructorCall::List().size());}
\DoxyCodeLine{01234\ \ \ \ \ ASSERT\_FALSE(DestructorCall::List()[0]-\/>CheckDestroyed());}
\DoxyCodeLine{01235\ \ \ \}}
\DoxyCodeLine{01236\ }
\DoxyCodeLine{01237\ \ \ \textcolor{comment}{//\ Now\ thread\_local\_tracker\ has\ died.}}
\DoxyCodeLine{01238\ \ \ ASSERT\_EQ(1U,\ DestructorCall::List().size());}
\DoxyCodeLine{01239\ \ \ EXPECT\_TRUE(DestructorCall::List()[0]-\/>CheckDestroyed());}
\DoxyCodeLine{01240\ }
\DoxyCodeLine{01241\ \ \ DestructorCall::ResetList();}
\DoxyCodeLine{01242\ \}}
\DoxyCodeLine{01243\ }
\DoxyCodeLine{01244\ \textcolor{comment}{//\ Tests\ that\ when\ a\ thread\ exits,\ the\ thread-\/local\ object\ for\ that}}
\DoxyCodeLine{01245\ \textcolor{comment}{//\ thread\ is\ destroyed.}}
\DoxyCodeLine{01246\ TEST(ThreadLocalTest,\ DestroysManagedObjectAtThreadExit)\ \{}
\DoxyCodeLine{01247\ \ \ DestructorCall::ResetList();}
\DoxyCodeLine{01248\ }
\DoxyCodeLine{01249\ \ \ \{}
\DoxyCodeLine{01250\ \ \ \ \ ThreadLocal<DestructorTracker>\ thread\_local\_tracker;}
\DoxyCodeLine{01251\ \ \ \ \ ASSERT\_EQ(0U,\ DestructorCall::List().size());}
\DoxyCodeLine{01252\ }
\DoxyCodeLine{01253\ \ \ \ \ \textcolor{comment}{//\ This\ creates\ another\ DestructorTracker\ object\ in\ the\ new\ thread.}}
\DoxyCodeLine{01254\ \ \ \ \ ThreadWithParam<ThreadParam>\ thread(\&CallThreadLocalGet,}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&thread\_local\_tracker,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{01256\ \ \ \ \ thread.Join();}
\DoxyCodeLine{01257\ }
\DoxyCodeLine{01258\ \ \ \ \ \textcolor{comment}{//\ The\ thread\ has\ exited,\ and\ we\ should\ have\ a\ DestroyedTracker}}
\DoxyCodeLine{01259\ \ \ \ \ \textcolor{comment}{//\ instance\ created\ for\ it.\ But\ it\ may\ not\ have\ been\ destroyed\ yet.}}
\DoxyCodeLine{01260\ \ \ \ \ ASSERT\_EQ(1U,\ DestructorCall::List().size());}
\DoxyCodeLine{01261\ \ \ \}}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ \ \ \textcolor{comment}{//\ The\ thread\ has\ exited\ and\ thread\_local\_tracker\ has\ died.}}
\DoxyCodeLine{01264\ \ \ ASSERT\_EQ(1U,\ DestructorCall::List().size());}
\DoxyCodeLine{01265\ \ \ EXPECT\_TRUE(DestructorCall::List()[0]-\/>CheckDestroyed());}
\DoxyCodeLine{01266\ }
\DoxyCodeLine{01267\ \ \ DestructorCall::ResetList();}
\DoxyCodeLine{01268\ \}}
\DoxyCodeLine{01269\ }
\DoxyCodeLine{01270\ TEST(ThreadLocalTest,\ ThreadLocalMutationsAffectOnlyCurrentThread)\ \{}
\DoxyCodeLine{01271\ \ \ ThreadLocal<std::string>\ thread\_local\_string;}
\DoxyCodeLine{01272\ \ \ thread\_local\_string.set(\textcolor{stringliteral}{"{}Foo"{}});}
\DoxyCodeLine{01273\ \ \ EXPECT\_STREQ(\textcolor{stringliteral}{"{}Foo"{}},\ thread\_local\_string.get().c\_str());}
\DoxyCodeLine{01274\ }
\DoxyCodeLine{01275\ \ \ std::string\ result;}
\DoxyCodeLine{01276\ \ \ RunFromThread(\&RetrieveThreadLocalValue,}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ make\_pair(\&thread\_local\_string,\ \&result));}
\DoxyCodeLine{01278\ \ \ EXPECT\_TRUE(result.empty());}
\DoxyCodeLine{01279\ \}}
\DoxyCodeLine{01280\ }
\DoxyCodeLine{01281\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_IS\_THREADSAFE}}
\DoxyCodeLine{01282\ }
\DoxyCodeLine{01283\ \textcolor{preprocessor}{\#ifdef\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01284\ TEST(WindowsTypesTest,\ HANDLEIsVoidStar)\ \{}
\DoxyCodeLine{01285\ \ \ StaticAssertTypeEq<HANDLE,\ void*>();}
\DoxyCodeLine{01286\ \}}
\DoxyCodeLine{01287\ }
\DoxyCodeLine{01288\ \textcolor{preprocessor}{\#if\ defined(GTEST\_OS\_WINDOWS\_MINGW)\ \&\&\ !defined(\_\_MINGW64\_VERSION\_MAJOR)}}
\DoxyCodeLine{01289\ TEST(WindowsTypesTest,\ \_CRITICAL\_SECTIONIs\_CRITICAL\_SECTION)\ \{}
\DoxyCodeLine{01290\ \ \ StaticAssertTypeEq<CRITICAL\_SECTION,\ \_CRITICAL\_SECTION>();}
\DoxyCodeLine{01291\ \}}
\DoxyCodeLine{01292\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01293\ TEST(WindowsTypesTest,\ CRITICAL\_SECTIONIs\_RTL\_CRITICAL\_SECTION)\ \{}
\DoxyCodeLine{01294\ \ \ StaticAssertTypeEq<CRITICAL\_SECTION,\ \_RTL\_CRITICAL\_SECTION>();}
\DoxyCodeLine{01295\ \}}
\DoxyCodeLine{01296\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ GTEST\_OS\_WINDOWS}}
\DoxyCodeLine{01299\ }
\DoxyCodeLine{01300\ \}\ \ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{01301\ \}\ \ \textcolor{comment}{//\ namespace\ testing}}

\end{DoxyCode}
