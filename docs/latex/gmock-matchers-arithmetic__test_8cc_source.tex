\doxysection{gmock-\/matchers-\/arithmetic\+\_\+test.cc}
\hypertarget{gmock-matchers-arithmetic__test_8cc_source}{}\label{gmock-matchers-arithmetic__test_8cc_source}\index{/home/who/standard-\/extended-\/cpp-\/lib/dependencies/googletest-\/1.14.0/googlemock/test/gmock-\/matchers-\/arithmetic\_test.cc@{/home/who/standard-\/extended-\/cpp-\/lib/dependencies/googletest-\/1.14.0/googlemock/test/gmock-\/matchers-\/arithmetic\_test.cc}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2007,\ Google\ Inc.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ All\ rights\ reserved.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Redistribution\ and\ use\ in\ source\ and\ binary\ forms,\ with\ or\ without}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ modification,\ are\ permitted\ provided\ that\ the\ following\ conditions\ are}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ met:}}
\DoxyCodeLine{00007\ \textcolor{comment}{//}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ of\ source\ code\ must\ retain\ the\ above\ copyright}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer.}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ \ \ \ \ *\ Redistributions\ in\ binary\ form\ must\ reproduce\ the\ above}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ copyright\ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ in\ the\ documentation\ and/or\ other\ materials\ provided\ with\ the}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ distribution.}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ \ \ \ \ *\ Neither\ the\ name\ of\ Google\ Inc.\ nor\ the\ names\ of\ its}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ contributors\ may\ be\ used\ to\ endorse\ or\ promote\ products\ derived\ from}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ this\ software\ without\ specific\ prior\ written\ permission.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ THIS\ SOFTWARE\ IS\ PROVIDED\ BY\ THE\ COPYRIGHT\ HOLDERS\ AND\ CONTRIBUTORS}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ "{}AS\ IS"{}\ AND\ ANY\ EXPRESS\ OR\ IMPLIED\ WARRANTIES,\ INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND\ FITNESS\ FOR}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ A\ PARTICULAR\ PURPOSE\ ARE\ DISCLAIMED.\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ OWNER\ OR\ CONTRIBUTORS\ BE\ LIABLE\ FOR\ ANY\ DIRECT,\ INDIRECT,\ INCIDENTAL,}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ SPECIAL,\ EXEMPLARY,\ OR\ CONSEQUENTIAL\ DAMAGES\ (INCLUDING,\ BUT\ NOT}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ LIMITED\ TO,\ PROCUREMENT\ OF\ SUBSTITUTE\ GOODS\ OR\ SERVICES;\ LOSS\ OF\ USE,}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ DATA,\ OR\ PROFITS;\ OR\ BUSINESS\ INTERRUPTION)\ HOWEVER\ CAUSED\ AND\ ON\ ANY}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ THEORY\ OF\ LIABILITY,\ WHETHER\ IN\ CONTRACT,\ STRICT\ LIABILITY,\ OR\ TORT}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ (INCLUDING\ NEGLIGENCE\ OR\ OTHERWISE)\ ARISING\ IN\ ANY\ WAY\ OUT\ OF\ THE\ USE}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ OF\ THIS\ SOFTWARE,\ EVEN\ IF\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH\ DAMAGE.}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{//\ Google\ Mock\ -\/\ a\ framework\ for\ writing\ C++\ mock\ classes.}}
\DoxyCodeLine{00031\ \textcolor{comment}{//}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ This\ file\ tests\ some\ commonly\ used\ argument\ matchers.}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ "{}test/gmock-\/matchers\_test.h"{}}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{comment}{//\ Silence\ warning\ C4244:\ 'initializing':\ conversion\ from\ 'int'\ to\ 'short',}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ possible\ loss\ of\ data\ and\ C4100,\ unreferenced\ local\ parameter}}
\DoxyCodeLine{00043\ GTEST\_DISABLE\_MSC\_WARNINGS\_PUSH\_(4244\ 4100)}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ namespace\ testing\ \{}
\DoxyCodeLine{00046\ \textcolor{keyword}{namespace\ }gmock\_matchers\_test\ \{}
\DoxyCodeLine{00047\ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ typedef\ ::std::tuple<long,\ int>\ Tuple2;\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{comment}{//\ Tests\ that\ Eq()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ ==\ the}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00053\ TEST(Eq2Test,\ MatchesEqualArguments)\ \{}
\DoxyCodeLine{00054\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Eq();}
\DoxyCodeLine{00055\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00056\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{comment}{//\ Tests\ that\ Eq()\ describes\ itself\ properly.}}
\DoxyCodeLine{00060\ TEST(Eq2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00061\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Eq();}
\DoxyCodeLine{00062\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{comment}{//\ Tests\ that\ Ge()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ >=\ the}}
\DoxyCodeLine{00066\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00067\ TEST(Ge2Test,\ MatchesGreaterThanOrEqualArguments)\ \{}
\DoxyCodeLine{00068\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Ge();}
\DoxyCodeLine{00069\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 4)));}
\DoxyCodeLine{00070\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00071\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{comment}{//\ Tests\ that\ Ge()\ describes\ itself\ properly.}}
\DoxyCodeLine{00075\ TEST(Ge2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00076\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Ge();}
\DoxyCodeLine{00077\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ a\ pair\ where\ the\ first\ >=\ the\ second"{}},\ Describe(m));}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{comment}{//\ Tests\ that\ Gt()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ >\ the}}
\DoxyCodeLine{00081\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00082\ TEST(Gt2Test,\ MatchesGreaterThanArguments)\ \{}
\DoxyCodeLine{00083\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Gt();}
\DoxyCodeLine{00084\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 4)));}
\DoxyCodeLine{00085\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00086\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{comment}{//\ Tests\ that\ Gt()\ describes\ itself\ properly.}}
\DoxyCodeLine{00090\ TEST(Gt2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00091\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Gt();}
\DoxyCodeLine{00092\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ a\ pair\ where\ the\ first\ >\ the\ second"{}},\ Describe(m));}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{comment}{//\ Tests\ that\ Le()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ <=\ the}}
\DoxyCodeLine{00096\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00097\ TEST(Le2Test,\ MatchesLessThanOrEqualArguments)\ \{}
\DoxyCodeLine{00098\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Le();}
\DoxyCodeLine{00099\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00100\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00101\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 4)));}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{comment}{//\ Tests\ that\ Le()\ describes\ itself\ properly.}}
\DoxyCodeLine{00105\ TEST(Le2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00106\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Le();}
\DoxyCodeLine{00107\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ a\ pair\ where\ the\ first\ <=\ the\ second"{}},\ Describe(m));}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{comment}{//\ Tests\ that\ Lt()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ <\ the}}
\DoxyCodeLine{00111\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00112\ TEST(Lt2Test,\ MatchesLessThanArguments)\ \{}
\DoxyCodeLine{00113\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Lt();}
\DoxyCodeLine{00114\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00115\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00116\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 4)));}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{comment}{//\ Tests\ that\ Lt()\ describes\ itself\ properly.}}
\DoxyCodeLine{00120\ TEST(Lt2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00121\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Lt();}
\DoxyCodeLine{00122\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ a\ pair\ where\ the\ first\ <\ the\ second"{}},\ Describe(m));}
\DoxyCodeLine{00123\ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \textcolor{comment}{//\ Tests\ that\ Ne()\ matches\ a\ 2-\/tuple\ where\ the\ first\ field\ !=\ the}}
\DoxyCodeLine{00126\ \textcolor{comment}{//\ second\ field.}}
\DoxyCodeLine{00127\ TEST(Ne2Test,\ MatchesUnequalArguments)\ \{}
\DoxyCodeLine{00128\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Ne();}
\DoxyCodeLine{00129\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 6)));}
\DoxyCodeLine{00130\ \ \ EXPECT\_TRUE(m.Matches(Tuple2(5L,\ 4)));}
\DoxyCodeLine{00131\ \ \ EXPECT\_FALSE(m.Matches(Tuple2(5L,\ 5)));}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{comment}{//\ Tests\ that\ Ne()\ describes\ itself\ properly.}}
\DoxyCodeLine{00135\ TEST(Ne2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00136\ \ \ Matcher<const\ Tuple2\&>\ m\ =\ Ne();}
\DoxyCodeLine{00137\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ unequal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ TEST(PairMatchBaseTest,\ WorksWithMoveOnly)\ \{}
\DoxyCodeLine{00141\ \ \ \textcolor{keyword}{using\ }Pointers\ =\ std::tuple<std::unique\_ptr<int>,\ std::unique\_ptr<int>>;}
\DoxyCodeLine{00142\ \ \ Matcher<Pointers>\ matcher\ =\ Eq();}
\DoxyCodeLine{00143\ \ \ Pointers\ pointers;}
\DoxyCodeLine{00144\ \ \ \textcolor{comment}{//\ Tested\ values\ don't\ matter;\ the\ point\ is\ that\ matcher\ does\ not\ copy\ the}}
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ matched\ values.}}
\DoxyCodeLine{00146\ \ \ EXPECT\_TRUE(matcher.Matches(pointers));}
\DoxyCodeLine{00147\ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ matches\ a\ NaN,\ with\ float.}}
\DoxyCodeLine{00150\ TEST(IsNan,\ FloatMatchesNan)\ \{}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{float}\ quiet\_nan\ =\ std::numeric\_limits<float>::quiet\_NaN();}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{float}\ other\_nan\ =\ std::nanf(\textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordtype}{float}\ real\_value\ =\ 1.0f;}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ Matcher<float>\ m\ =\ IsNan();}
\DoxyCodeLine{00156\ \ \ EXPECT\_TRUE(m.Matches(quiet\_nan));}
\DoxyCodeLine{00157\ \ \ EXPECT\_TRUE(m.Matches(other\_nan));}
\DoxyCodeLine{00158\ \ \ EXPECT\_FALSE(m.Matches(real\_value));}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ Matcher<float\&>\ m\_ref\ =\ IsNan();}
\DoxyCodeLine{00161\ \ \ EXPECT\_TRUE(m\_ref.Matches(quiet\_nan));}
\DoxyCodeLine{00162\ \ \ EXPECT\_TRUE(m\_ref.Matches(other\_nan));}
\DoxyCodeLine{00163\ \ \ EXPECT\_FALSE(m\_ref.Matches(real\_value));}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ Matcher<const\ float\&>\ m\_cref\ =\ IsNan();}
\DoxyCodeLine{00166\ \ \ EXPECT\_TRUE(m\_cref.Matches(quiet\_nan));}
\DoxyCodeLine{00167\ \ \ EXPECT\_TRUE(m\_cref.Matches(other\_nan));}
\DoxyCodeLine{00168\ \ \ EXPECT\_FALSE(m\_cref.Matches(real\_value));}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ matches\ a\ NaN,\ with\ double.}}
\DoxyCodeLine{00172\ TEST(IsNan,\ DoubleMatchesNan)\ \{}
\DoxyCodeLine{00173\ \ \ \textcolor{keywordtype}{double}\ quiet\_nan\ =\ std::numeric\_limits<double>::quiet\_NaN();}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{double}\ other\_nan\ =\ std::nan(\textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{double}\ real\_value\ =\ 1.0;}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ Matcher<double>\ m\ =\ IsNan();}
\DoxyCodeLine{00178\ \ \ EXPECT\_TRUE(m.Matches(quiet\_nan));}
\DoxyCodeLine{00179\ \ \ EXPECT\_TRUE(m.Matches(other\_nan));}
\DoxyCodeLine{00180\ \ \ EXPECT\_FALSE(m.Matches(real\_value));}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ Matcher<double\&>\ m\_ref\ =\ IsNan();}
\DoxyCodeLine{00183\ \ \ EXPECT\_TRUE(m\_ref.Matches(quiet\_nan));}
\DoxyCodeLine{00184\ \ \ EXPECT\_TRUE(m\_ref.Matches(other\_nan));}
\DoxyCodeLine{00185\ \ \ EXPECT\_FALSE(m\_ref.Matches(real\_value));}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ Matcher<const\ double\&>\ m\_cref\ =\ IsNan();}
\DoxyCodeLine{00188\ \ \ EXPECT\_TRUE(m\_cref.Matches(quiet\_nan));}
\DoxyCodeLine{00189\ \ \ EXPECT\_TRUE(m\_cref.Matches(other\_nan));}
\DoxyCodeLine{00190\ \ \ EXPECT\_FALSE(m\_cref.Matches(real\_value));}
\DoxyCodeLine{00191\ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ matches\ a\ NaN,\ with\ long\ double.}}
\DoxyCodeLine{00194\ TEST(IsNan,\ LongDoubleMatchesNan)\ \{}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{double}\ quiet\_nan\ =\ std::numeric\_limits<long\ double>::quiet\_NaN();}
\DoxyCodeLine{00196\ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{double}\ other\_nan\ =\ std::nan(\textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{double}\ real\_value\ =\ 1.0;}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ Matcher<long\ double>\ m\ =\ IsNan();}
\DoxyCodeLine{00200\ \ \ EXPECT\_TRUE(m.Matches(quiet\_nan));}
\DoxyCodeLine{00201\ \ \ EXPECT\_TRUE(m.Matches(other\_nan));}
\DoxyCodeLine{00202\ \ \ EXPECT\_FALSE(m.Matches(real\_value));}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ Matcher<long\ double\&>\ m\_ref\ =\ IsNan();}
\DoxyCodeLine{00205\ \ \ EXPECT\_TRUE(m\_ref.Matches(quiet\_nan));}
\DoxyCodeLine{00206\ \ \ EXPECT\_TRUE(m\_ref.Matches(other\_nan));}
\DoxyCodeLine{00207\ \ \ EXPECT\_FALSE(m\_ref.Matches(real\_value));}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ Matcher<const\ long\ double\&>\ m\_cref\ =\ IsNan();}
\DoxyCodeLine{00210\ \ \ EXPECT\_TRUE(m\_cref.Matches(quiet\_nan));}
\DoxyCodeLine{00211\ \ \ EXPECT\_TRUE(m\_cref.Matches(other\_nan));}
\DoxyCodeLine{00212\ \ \ EXPECT\_FALSE(m\_cref.Matches(real\_value));}
\DoxyCodeLine{00213\ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ works\ with\ Not.}}
\DoxyCodeLine{00216\ TEST(IsNan,\ NotMatchesNan)\ \{}
\DoxyCodeLine{00217\ \ \ Matcher<float>\ mf\ =\ Not(IsNan());}
\DoxyCodeLine{00218\ \ \ EXPECT\_FALSE(mf.Matches(std::numeric\_limits<float>::quiet\_NaN()));}
\DoxyCodeLine{00219\ \ \ EXPECT\_FALSE(mf.Matches(std::nanf(\textcolor{stringliteral}{"{}1"{}})));}
\DoxyCodeLine{00220\ \ \ EXPECT\_TRUE(mf.Matches(1.0));}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ Matcher<double>\ md\ =\ Not(IsNan());}
\DoxyCodeLine{00223\ \ \ EXPECT\_FALSE(md.Matches(std::numeric\_limits<double>::quiet\_NaN()));}
\DoxyCodeLine{00224\ \ \ EXPECT\_FALSE(md.Matches(std::nan(\textcolor{stringliteral}{"{}1"{}})));}
\DoxyCodeLine{00225\ \ \ EXPECT\_TRUE(md.Matches(1.0));}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ Matcher<long\ double>\ mld\ =\ Not(IsNan());}
\DoxyCodeLine{00228\ \ \ EXPECT\_FALSE(mld.Matches(std::numeric\_limits<long\ double>::quiet\_NaN()));}
\DoxyCodeLine{00229\ \ \ EXPECT\_FALSE(mld.Matches(std::nanl(\textcolor{stringliteral}{"{}1"{}})));}
\DoxyCodeLine{00230\ \ \ EXPECT\_TRUE(mld.Matches(1.0));}
\DoxyCodeLine{00231\ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ can\ describe\ itself.}}
\DoxyCodeLine{00234\ TEST(IsNan,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00235\ \ \ Matcher<float>\ mf\ =\ IsNan();}
\DoxyCodeLine{00236\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(mf));}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ Matcher<double>\ md\ =\ IsNan();}
\DoxyCodeLine{00239\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(md));}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ Matcher<long\ double>\ mld\ =\ IsNan();}
\DoxyCodeLine{00242\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(mld));}
\DoxyCodeLine{00243\ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \textcolor{comment}{//\ Tests\ that\ IsNan()\ can\ describe\ itself\ with\ Not.}}
\DoxyCodeLine{00246\ TEST(IsNan,\ CanDescribeSelfWithNot)\ \{}
\DoxyCodeLine{00247\ \ \ Matcher<float>\ mf\ =\ Not(IsNan());}
\DoxyCodeLine{00248\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ Describe(mf));}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ Matcher<double>\ md\ =\ Not(IsNan());}
\DoxyCodeLine{00251\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ Describe(md));}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ Matcher<long\ double>\ mld\ =\ Not(IsNan());}
\DoxyCodeLine{00254\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ Describe(mld));}
\DoxyCodeLine{00255\ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \textcolor{comment}{//\ Tests\ that\ FloatEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00258\ \textcolor{comment}{//\ FloatEq(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00259\ TEST(FloatEq2Test,\ MatchesEqualArguments)\ \{}
\DoxyCodeLine{00260\ \ \ typedef\ ::std::tuple<float,\ float>\ Tpl;}
\DoxyCodeLine{00261\ \ \ Matcher<const\ Tpl\&>\ m\ =\ FloatEq();}
\DoxyCodeLine{00262\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00263\ \ \ EXPECT\_TRUE(m.Matches(Tpl(0.3f,\ 0.1f\ +\ 0.1f\ +\ 0.1f)));}
\DoxyCodeLine{00264\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.1f,\ 1.0f)));}
\DoxyCodeLine{00265\ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \textcolor{comment}{//\ Tests\ that\ FloatEq()\ describes\ itself\ properly.}}
\DoxyCodeLine{00268\ TEST(FloatEq2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00269\ \ \ Matcher<const\ ::std::tuple<float,\ float>\&>\ m\ =\ FloatEq();}
\DoxyCodeLine{00270\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00271\ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveFloatEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00274\ \textcolor{comment}{//\ NanSensitiveFloatEq(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00275\ TEST(NanSensitiveFloatEqTest,\ MatchesEqualArgumentsWithNaN)\ \{}
\DoxyCodeLine{00276\ \ \ typedef\ ::std::tuple<float,\ float>\ Tpl;}
\DoxyCodeLine{00277\ \ \ Matcher<const\ Tpl\&>\ m\ =\ NanSensitiveFloatEq();}
\DoxyCodeLine{00278\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00279\ \ \ EXPECT\_TRUE(m.Matches(Tpl(std::numeric\_limits<float>::quiet\_NaN(),}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<float>::quiet\_NaN())));}
\DoxyCodeLine{00281\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.1f,\ 1.0f)));}
\DoxyCodeLine{00282\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.0f,\ std::numeric\_limits<float>::quiet\_NaN())));}
\DoxyCodeLine{00283\ \ \ EXPECT\_FALSE(m.Matches(Tpl(std::numeric\_limits<float>::quiet\_NaN(),\ 1.0f)));}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveFloatEq()\ describes\ itself\ properly.}}
\DoxyCodeLine{00287\ TEST(NanSensitiveFloatEqTest,\ CanDescribeSelfWithNaNs)\ \{}
\DoxyCodeLine{00288\ \ \ Matcher<const\ ::std::tuple<float,\ float>\&>\ m\ =\ NanSensitiveFloatEq();}
\DoxyCodeLine{00289\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00290\ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \textcolor{comment}{//\ Tests\ that\ DoubleEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00293\ \textcolor{comment}{//\ DoubleEq(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00294\ TEST(DoubleEq2Test,\ MatchesEqualArguments)\ \{}
\DoxyCodeLine{00295\ \ \ typedef\ ::std::tuple<double,\ double>\ Tpl;}
\DoxyCodeLine{00296\ \ \ Matcher<const\ Tpl\&>\ m\ =\ DoubleEq();}
\DoxyCodeLine{00297\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0,\ 1.0)));}
\DoxyCodeLine{00298\ \ \ EXPECT\_TRUE(m.Matches(Tpl(0.3,\ 0.1\ +\ 0.1\ +\ 0.1)));}
\DoxyCodeLine{00299\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.1,\ 1.0)));}
\DoxyCodeLine{00300\ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \textcolor{comment}{//\ Tests\ that\ DoubleEq()\ describes\ itself\ properly.}}
\DoxyCodeLine{00303\ TEST(DoubleEq2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00304\ \ \ Matcher<const\ ::std::tuple<double,\ double>\&>\ m\ =\ DoubleEq();}
\DoxyCodeLine{00305\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00306\ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveDoubleEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00309\ \textcolor{comment}{//\ NanSensitiveDoubleEq(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00310\ TEST(NanSensitiveDoubleEqTest,\ MatchesEqualArgumentsWithNaN)\ \{}
\DoxyCodeLine{00311\ \ \ typedef\ ::std::tuple<double,\ double>\ Tpl;}
\DoxyCodeLine{00312\ \ \ Matcher<const\ Tpl\&>\ m\ =\ NanSensitiveDoubleEq();}
\DoxyCodeLine{00313\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00314\ \ \ EXPECT\_TRUE(m.Matches(Tpl(std::numeric\_limits<double>::quiet\_NaN(),}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<double>::quiet\_NaN())));}
\DoxyCodeLine{00316\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.1f,\ 1.0f)));}
\DoxyCodeLine{00317\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.0f,\ std::numeric\_limits<double>::quiet\_NaN())));}
\DoxyCodeLine{00318\ \ \ EXPECT\_FALSE(m.Matches(Tpl(std::numeric\_limits<double>::quiet\_NaN(),\ 1.0f)));}
\DoxyCodeLine{00319\ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \textcolor{comment}{//\ Tests\ that\ DoubleEq()\ describes\ itself\ properly.}}
\DoxyCodeLine{00322\ TEST(NanSensitiveDoubleEqTest,\ CanDescribeSelfWithNaNs)\ \{}
\DoxyCodeLine{00323\ \ \ Matcher<const\ ::std::tuple<double,\ double>\&>\ m\ =\ NanSensitiveDoubleEq();}
\DoxyCodeLine{00324\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00325\ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \textcolor{comment}{//\ Tests\ that\ FloatEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00328\ \textcolor{comment}{//\ FloatNear(first\ field,\ max\_abs\_error)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00329\ TEST(FloatNear2Test,\ MatchesEqualArguments)\ \{}
\DoxyCodeLine{00330\ \ \ typedef\ ::std::tuple<float,\ float>\ Tpl;}
\DoxyCodeLine{00331\ \ \ Matcher<const\ Tpl\&>\ m\ =\ FloatNear(0.5f);}
\DoxyCodeLine{00332\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00333\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.3f,\ 1.0f)));}
\DoxyCodeLine{00334\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.8f,\ 1.0f)));}
\DoxyCodeLine{00335\ \}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \textcolor{comment}{//\ Tests\ that\ FloatNear()\ describes\ itself\ properly.}}
\DoxyCodeLine{00338\ TEST(FloatNear2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00339\ \ \ Matcher<const\ ::std::tuple<float,\ float>\&>\ m\ =\ FloatNear(0.5f);}
\DoxyCodeLine{00340\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00341\ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveFloatNear()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00344\ \textcolor{comment}{//\ NanSensitiveFloatNear(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00345\ TEST(NanSensitiveFloatNearTest,\ MatchesNearbyArgumentsWithNaN)\ \{}
\DoxyCodeLine{00346\ \ \ typedef\ ::std::tuple<float,\ float>\ Tpl;}
\DoxyCodeLine{00347\ \ \ Matcher<const\ Tpl\&>\ m\ =\ NanSensitiveFloatNear(0.5f);}
\DoxyCodeLine{00348\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00349\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.1f,\ 1.0f)));}
\DoxyCodeLine{00350\ \ \ EXPECT\_TRUE(m.Matches(Tpl(std::numeric\_limits<float>::quiet\_NaN(),}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<float>::quiet\_NaN())));}
\DoxyCodeLine{00352\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.6f,\ 1.0f)));}
\DoxyCodeLine{00353\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.0f,\ std::numeric\_limits<float>::quiet\_NaN())));}
\DoxyCodeLine{00354\ \ \ EXPECT\_FALSE(m.Matches(Tpl(std::numeric\_limits<float>::quiet\_NaN(),\ 1.0f)));}
\DoxyCodeLine{00355\ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveFloatNear()\ describes\ itself\ properly.}}
\DoxyCodeLine{00358\ TEST(NanSensitiveFloatNearTest,\ CanDescribeSelfWithNaNs)\ \{}
\DoxyCodeLine{00359\ \ \ Matcher<const\ ::std::tuple<float,\ float>\&>\ m\ =\ NanSensitiveFloatNear(0.5f);}
\DoxyCodeLine{00360\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00361\ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \textcolor{comment}{//\ Tests\ that\ FloatEq()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00364\ \textcolor{comment}{//\ DoubleNear(first\ field,\ max\_abs\_error)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00365\ TEST(DoubleNear2Test,\ MatchesEqualArguments)\ \{}
\DoxyCodeLine{00366\ \ \ typedef\ ::std::tuple<double,\ double>\ Tpl;}
\DoxyCodeLine{00367\ \ \ Matcher<const\ Tpl\&>\ m\ =\ DoubleNear(0.5);}
\DoxyCodeLine{00368\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0,\ 1.0)));}
\DoxyCodeLine{00369\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.3,\ 1.0)));}
\DoxyCodeLine{00370\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.8,\ 1.0)));}
\DoxyCodeLine{00371\ \}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \textcolor{comment}{//\ Tests\ that\ DoubleNear()\ describes\ itself\ properly.}}
\DoxyCodeLine{00374\ TEST(DoubleNear2Test,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00375\ \ \ Matcher<const\ ::std::tuple<double,\ double>\&>\ m\ =\ DoubleNear(0.5);}
\DoxyCodeLine{00376\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00377\ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveDoubleNear()\ matches\ a\ 2-\/tuple\ where}}
\DoxyCodeLine{00380\ \textcolor{comment}{//\ NanSensitiveDoubleNear(first\ field)\ matches\ the\ second\ field.}}
\DoxyCodeLine{00381\ TEST(NanSensitiveDoubleNearTest,\ MatchesNearbyArgumentsWithNaN)\ \{}
\DoxyCodeLine{00382\ \ \ typedef\ ::std::tuple<double,\ double>\ Tpl;}
\DoxyCodeLine{00383\ \ \ Matcher<const\ Tpl\&>\ m\ =\ NanSensitiveDoubleNear(0.5f);}
\DoxyCodeLine{00384\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.0f,\ 1.0f)));}
\DoxyCodeLine{00385\ \ \ EXPECT\_TRUE(m.Matches(Tpl(1.1f,\ 1.0f)));}
\DoxyCodeLine{00386\ \ \ EXPECT\_TRUE(m.Matches(Tpl(std::numeric\_limits<double>::quiet\_NaN(),}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<double>::quiet\_NaN())));}
\DoxyCodeLine{00388\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.6f,\ 1.0f)));}
\DoxyCodeLine{00389\ \ \ EXPECT\_FALSE(m.Matches(Tpl(1.0f,\ std::numeric\_limits<double>::quiet\_NaN())));}
\DoxyCodeLine{00390\ \ \ EXPECT\_FALSE(m.Matches(Tpl(std::numeric\_limits<double>::quiet\_NaN(),\ 1.0f)));}
\DoxyCodeLine{00391\ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \textcolor{comment}{//\ Tests\ that\ NanSensitiveDoubleNear()\ describes\ itself\ properly.}}
\DoxyCodeLine{00394\ TEST(NanSensitiveDoubleNearTest,\ CanDescribeSelfWithNaNs)\ \{}
\DoxyCodeLine{00395\ \ \ Matcher<const\ ::std::tuple<double,\ double>\&>\ m\ =\ NanSensitiveDoubleNear(0.5f);}
\DoxyCodeLine{00396\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}are\ an\ almost-\/equal\ pair"{}},\ Describe(m));}
\DoxyCodeLine{00397\ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \textcolor{comment}{//\ Tests\ that\ Not(m)\ matches\ any\ value\ that\ doesn't\ match\ m.}}
\DoxyCodeLine{00400\ TEST(NotTest,\ NegatesMatcher)\ \{}
\DoxyCodeLine{00401\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00402\ \ \ m\ =\ Not(Eq(2));}
\DoxyCodeLine{00403\ \ \ EXPECT\_TRUE(m.Matches(3));}
\DoxyCodeLine{00404\ \ \ EXPECT\_FALSE(m.Matches(2));}
\DoxyCodeLine{00405\ \}}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \textcolor{comment}{//\ Tests\ that\ Not(m)\ describes\ itself\ properly.}}
\DoxyCodeLine{00408\ TEST(NotTest,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00409\ \ \ Matcher<int>\ m\ =\ Not(Eq(5));}
\DoxyCodeLine{00410\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ equal\ to\ 5"{}},\ Describe(m));}
\DoxyCodeLine{00411\ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{comment}{//\ Tests\ that\ monomorphic\ matchers\ are\ safely\ cast\ by\ the\ Not\ matcher.}}
\DoxyCodeLine{00414\ TEST(NotTest,\ NotMatcherSafelyCastsMonomorphicMatchers)\ \{}
\DoxyCodeLine{00415\ \ \ \textcolor{comment}{//\ greater\_than\_5\ is\ a\ monomorphic\ matcher.}}
\DoxyCodeLine{00416\ \ \ Matcher<int>\ greater\_than\_5\ =\ Gt(5);}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ Matcher<const\ int\&>\ m\ =\ Not(greater\_than\_5);}
\DoxyCodeLine{00419\ \ \ Matcher<int\&>\ m2\ =\ Not(greater\_than\_5);}
\DoxyCodeLine{00420\ \ \ Matcher<int\&>\ m3\ =\ Not(m);}
\DoxyCodeLine{00421\ \}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \textcolor{comment}{//\ Helper\ to\ allow\ easy\ testing\ of\ AllOf\ matchers\ with\ num\ parameters.}}
\DoxyCodeLine{00424\ \textcolor{keywordtype}{void}\ AllOfMatches(\textcolor{keywordtype}{int}\ num,\ \textcolor{keyword}{const}\ Matcher<int>\&\ m)\ \{}
\DoxyCodeLine{00425\ \ \ SCOPED\_TRACE(Describe(m));}
\DoxyCodeLine{00426\ \ \ EXPECT\_TRUE(m.Matches(0));}
\DoxyCodeLine{00427\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <=\ num;\ ++i)\ \{}
\DoxyCodeLine{00428\ \ \ \ \ EXPECT\_FALSE(m.Matches(i));}
\DoxyCodeLine{00429\ \ \ \}}
\DoxyCodeLine{00430\ \ \ EXPECT\_TRUE(m.Matches(num\ +\ 1));}
\DoxyCodeLine{00431\ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ INSTANTIATE\_GTEST\_MATCHER\_TEST\_P(AllOfTest);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \textcolor{comment}{//\ Tests\ that\ AllOf(m1,\ ...,\ mn)\ matches\ any\ value\ that\ matches\ all\ of}}
\DoxyCodeLine{00436\ \textcolor{comment}{//\ the\ given\ matchers.}}
\DoxyCodeLine{00437\ TEST(AllOfTest,\ MatchesWhenAllMatch)\ \{}
\DoxyCodeLine{00438\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00439\ \ \ m\ =\ AllOf(Le(2),\ Ge(1));}
\DoxyCodeLine{00440\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00441\ \ \ EXPECT\_TRUE(m.Matches(2));}
\DoxyCodeLine{00442\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00443\ \ \ EXPECT\_FALSE(m.Matches(3));}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2));}
\DoxyCodeLine{00446\ \ \ EXPECT\_TRUE(m.Matches(3));}
\DoxyCodeLine{00447\ \ \ EXPECT\_FALSE(m.Matches(2));}
\DoxyCodeLine{00448\ \ \ EXPECT\_FALSE(m.Matches(1));}
\DoxyCodeLine{00449\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2),\ Ne(3));}
\DoxyCodeLine{00452\ \ \ EXPECT\_TRUE(m.Matches(4));}
\DoxyCodeLine{00453\ \ \ EXPECT\_FALSE(m.Matches(3));}
\DoxyCodeLine{00454\ \ \ EXPECT\_FALSE(m.Matches(2));}
\DoxyCodeLine{00455\ \ \ EXPECT\_FALSE(m.Matches(1));}
\DoxyCodeLine{00456\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ \ \ m\ =\ AllOf(Ge(0),\ Lt(10),\ Ne(3),\ Ne(5),\ Ne(7));}
\DoxyCodeLine{00459\ \ \ EXPECT\_TRUE(m.Matches(0));}
\DoxyCodeLine{00460\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00461\ \ \ EXPECT\_FALSE(m.Matches(3));}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ \textcolor{comment}{//\ The\ following\ tests\ for\ varying\ number\ of\ sub-\/matchers.\ Due\ to\ the\ way}}
\DoxyCodeLine{00464\ \ \ \textcolor{comment}{//\ the\ sub-\/matchers\ are\ handled\ it\ is\ enough\ to\ test\ every\ sub-\/matcher\ once}}
\DoxyCodeLine{00465\ \ \ \textcolor{comment}{//\ with\ sub-\/matchers\ using\ the\ same\ matcher\ type.\ Varying\ matcher\ types\ are}}
\DoxyCodeLine{00466\ \ \ \textcolor{comment}{//\ checked\ for\ above.}}
\DoxyCodeLine{00467\ \ \ AllOfMatches(2,\ AllOf(Ne(1),\ Ne(2)));}
\DoxyCodeLine{00468\ \ \ AllOfMatches(3,\ AllOf(Ne(1),\ Ne(2),\ Ne(3)));}
\DoxyCodeLine{00469\ \ \ AllOfMatches(4,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4)));}
\DoxyCodeLine{00470\ \ \ AllOfMatches(5,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5)));}
\DoxyCodeLine{00471\ \ \ AllOfMatches(6,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6)));}
\DoxyCodeLine{00472\ \ \ AllOfMatches(7,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7)));}
\DoxyCodeLine{00473\ \ \ AllOfMatches(8,}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7),\ Ne(8)));}
\DoxyCodeLine{00475\ \ \ AllOfMatches(}
\DoxyCodeLine{00476\ \ \ \ \ \ \ 9,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7),\ Ne(8),\ Ne(9)));}
\DoxyCodeLine{00477\ \ \ AllOfMatches(10,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7),\ Ne(8),}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(9),\ Ne(10)));}
\DoxyCodeLine{00479\ \ \ AllOfMatches(}
\DoxyCodeLine{00480\ \ \ \ \ \ \ 50,\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7),\ Ne(8),\ Ne(9),}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(10),\ Ne(11),\ Ne(12),\ Ne(13),\ Ne(14),\ Ne(15),\ Ne(16),\ Ne(17),}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(18),\ Ne(19),\ Ne(20),\ Ne(21),\ Ne(22),\ Ne(23),\ Ne(24),\ Ne(25),}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(26),\ Ne(27),\ Ne(28),\ Ne(29),\ Ne(30),\ Ne(31),\ Ne(32),\ Ne(33),}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(34),\ Ne(35),\ Ne(36),\ Ne(37),\ Ne(38),\ Ne(39),\ Ne(40),\ Ne(41),}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(42),\ Ne(43),\ Ne(44),\ Ne(45),\ Ne(46),\ Ne(47),\ Ne(48),\ Ne(49),}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Ne(50)));}
\DoxyCodeLine{00487\ \}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \textcolor{comment}{//\ Tests\ that\ AllOf(m1,\ ...,\ mn)\ describes\ itself\ properly.}}
\DoxyCodeLine{00490\ TEST(AllOfTest,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00491\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00492\ \ \ m\ =\ AllOf(Le(2),\ Ge(1));}
\DoxyCodeLine{00493\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(is\ <=\ 2)\ and\ (is\ >=\ 1)"{}},\ Describe(m));}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2));}
\DoxyCodeLine{00496\ \ \ std::string\ expected\_descr1\ =}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(is\ >\ 0)\ and\ (isn't\ equal\ to\ 1)\ and\ (isn't\ equal\ to\ 2)"{}};}
\DoxyCodeLine{00498\ \ \ EXPECT\_EQ(expected\_descr1,\ Describe(m));}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2),\ Ne(3));}
\DoxyCodeLine{00501\ \ \ std::string\ expected\_descr2\ =}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(is\ >\ 0)\ and\ (isn't\ equal\ to\ 1)\ and\ (isn't\ equal\ to\ 2)\ and\ (isn't\ equal\ "{}}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}to\ 3)"{}};}
\DoxyCodeLine{00504\ \ \ EXPECT\_EQ(expected\_descr2,\ Describe(m));}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ m\ =\ AllOf(Ge(0),\ Lt(10),\ Ne(3),\ Ne(5),\ Ne(7));}
\DoxyCodeLine{00507\ \ \ std::string\ expected\_descr3\ =}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(is\ >=\ 0)\ and\ (is\ <\ 10)\ and\ (isn't\ equal\ to\ 3)\ and\ (isn't\ equal\ to\ 5)\ "{}}}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}and\ (isn't\ equal\ to\ 7)"{}};}
\DoxyCodeLine{00510\ \ \ EXPECT\_EQ(expected\_descr3,\ Describe(m));}
\DoxyCodeLine{00511\ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \textcolor{comment}{//\ Tests\ that\ AllOf(m1,\ ...,\ mn)\ describes\ its\ negation\ properly.}}
\DoxyCodeLine{00514\ TEST(AllOfTest,\ CanDescribeNegation)\ \{}
\DoxyCodeLine{00515\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00516\ \ \ m\ =\ AllOf(Le(2),\ Ge(1));}
\DoxyCodeLine{00517\ \ \ std::string\ expected\_descr4\ =\ \textcolor{stringliteral}{"{}(isn't\ <=\ 2)\ or\ (isn't\ >=\ 1)"{}};}
\DoxyCodeLine{00518\ \ \ EXPECT\_EQ(expected\_descr4,\ DescribeNegation(m));}
\DoxyCodeLine{00519\ }
\DoxyCodeLine{00520\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2));}
\DoxyCodeLine{00521\ \ \ std::string\ expected\_descr5\ =}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(isn't\ >\ 0)\ or\ (is\ equal\ to\ 1)\ or\ (is\ equal\ to\ 2)"{}};}
\DoxyCodeLine{00523\ \ \ EXPECT\_EQ(expected\_descr5,\ DescribeNegation(m));}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ m\ =\ AllOf(Gt(0),\ Ne(1),\ Ne(2),\ Ne(3));}
\DoxyCodeLine{00526\ \ \ std::string\ expected\_descr6\ =}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(isn't\ >\ 0)\ or\ (is\ equal\ to\ 1)\ or\ (is\ equal\ to\ 2)\ or\ (is\ equal\ to\ 3)"{}};}
\DoxyCodeLine{00528\ \ \ EXPECT\_EQ(expected\_descr6,\ DescribeNegation(m));}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ m\ =\ AllOf(Ge(0),\ Lt(10),\ Ne(3),\ Ne(5),\ Ne(7));}
\DoxyCodeLine{00531\ \ \ std::string\ expected\_desr7\ =}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(isn't\ >=\ 0)\ or\ (isn't\ <\ 10)\ or\ (is\ equal\ to\ 3)\ or\ (is\ equal\ to\ 5)\ or\ "{}}}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(is\ equal\ to\ 7)"{}};}
\DoxyCodeLine{00534\ \ \ EXPECT\_EQ(expected\_desr7,\ DescribeNegation(m));}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ \ \ m\ =\ AllOf(Ne(1),\ Ne(2),\ Ne(3),\ Ne(4),\ Ne(5),\ Ne(6),\ Ne(7),\ Ne(8),\ Ne(9),}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ Ne(10),\ Ne(11));}
\DoxyCodeLine{00538\ \ \ AllOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10,\ 11);}
\DoxyCodeLine{00539\ \ \ EXPECT\_THAT(Describe(m),\ EndsWith(\textcolor{stringliteral}{"{}and\ (isn't\ equal\ to\ 11)"{}}));}
\DoxyCodeLine{00540\ \ \ AllOfMatches(11,\ m);}
\DoxyCodeLine{00541\ \}}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \textcolor{comment}{//\ Tests\ that\ monomorphic\ matchers\ are\ safely\ cast\ by\ the\ AllOf\ matcher.}}
\DoxyCodeLine{00544\ TEST(AllOfTest,\ AllOfMatcherSafelyCastsMonomorphicMatchers)\ \{}
\DoxyCodeLine{00545\ \ \ \textcolor{comment}{//\ greater\_than\_5\ and\ less\_than\_10\ are\ monomorphic\ matchers.}}
\DoxyCodeLine{00546\ \ \ Matcher<int>\ greater\_than\_5\ =\ Gt(5);}
\DoxyCodeLine{00547\ \ \ Matcher<int>\ less\_than\_10\ =\ Lt(10);}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \ \ Matcher<const\ int\&>\ m\ =\ AllOf(greater\_than\_5,\ less\_than\_10);}
\DoxyCodeLine{00550\ \ \ Matcher<int\&>\ m2\ =\ AllOf(greater\_than\_5,\ less\_than\_10);}
\DoxyCodeLine{00551\ \ \ Matcher<int\&>\ m3\ =\ AllOf(greater\_than\_5,\ m2);}
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ \ \ \textcolor{comment}{//\ Tests\ that\ BothOf\ works\ when\ composing\ itself.}}
\DoxyCodeLine{00554\ \ \ Matcher<const\ int\&>\ m4\ =\ AllOf(greater\_than\_5,\ less\_than\_10,\ less\_than\_10);}
\DoxyCodeLine{00555\ \ \ Matcher<int\&>\ m5\ =\ AllOf(greater\_than\_5,\ less\_than\_10,\ less\_than\_10);}
\DoxyCodeLine{00556\ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ TEST\_P(AllOfTestP,\ ExplainsResult)\ \{}
\DoxyCodeLine{00559\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ Both\ matchers\ need\ to\ explain.\ \ The\ second}}
\DoxyCodeLine{00562\ \ \ \textcolor{comment}{//\ matcher\ doesn't\ give\ an\ explanation,\ so\ only\ the\ first\ matcher's}}
\DoxyCodeLine{00563\ \ \ \textcolor{comment}{//\ explanation\ is\ printed.}}
\DoxyCodeLine{00564\ \ \ m\ =\ AllOf(GreaterThan(10),\ Lt(30));}
\DoxyCodeLine{00565\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 15\ more\ than\ 10"{}},\ Explain(m,\ 25));}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ Both\ matchers\ need\ to\ explain.}}
\DoxyCodeLine{00568\ \ \ m\ =\ AllOf(GreaterThan(10),\ GreaterThan(20));}
\DoxyCodeLine{00569\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 20\ more\ than\ 10,\ and\ which\ is\ 10\ more\ than\ 20"{}},}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ Explain(m,\ 30));}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ All\ matchers\ need\ to\ explain.\ \ The\ second}}
\DoxyCodeLine{00573\ \ \ \textcolor{comment}{//\ matcher\ doesn't\ given\ an\ explanation.}}
\DoxyCodeLine{00574\ \ \ m\ =\ AllOf(GreaterThan(10),\ Lt(30),\ GreaterThan(20));}
\DoxyCodeLine{00575\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 15\ more\ than\ 10,\ and\ which\ is\ 5\ more\ than\ 20"{}},}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ Explain(m,\ 25));}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ All\ matchers\ need\ to\ explain.}}
\DoxyCodeLine{00579\ \ \ m\ =\ AllOf(GreaterThan(10),\ GreaterThan(20),\ GreaterThan(30));}
\DoxyCodeLine{00580\ \ \ EXPECT\_EQ(}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}which\ is\ 30\ more\ than\ 10,\ and\ which\ is\ 20\ more\ than\ 20,\ "{}}}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}and\ which\ is\ 10\ more\ than\ 30"{}},}
\DoxyCodeLine{00583\ \ \ \ \ \ \ Explain(m,\ 40));}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ The\ first\ matcher,\ which\ failed,\ needs\ to}}
\DoxyCodeLine{00586\ \ \ \textcolor{comment}{//\ explain.}}
\DoxyCodeLine{00587\ \ \ m\ =\ AllOf(GreaterThan(10),\ GreaterThan(20));}
\DoxyCodeLine{00588\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 10"{}},\ Explain(m,\ 5));}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ The\ second\ matcher,\ which\ failed,\ needs\ to}}
\DoxyCodeLine{00591\ \ \ \textcolor{comment}{//\ explain.\ \ Since\ it\ doesn't\ given\ an\ explanation,\ nothing\ is}}
\DoxyCodeLine{00592\ \ \ \textcolor{comment}{//\ printed.}}
\DoxyCodeLine{00593\ \ \ m\ =\ AllOf(GreaterThan(10),\ Lt(30));}
\DoxyCodeLine{00594\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}"{}},\ Explain(m,\ 40));}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ The\ second\ matcher,\ which\ failed,\ needs\ to}}
\DoxyCodeLine{00597\ \ \ \textcolor{comment}{//\ explain.}}
\DoxyCodeLine{00598\ \ \ m\ =\ AllOf(GreaterThan(10),\ GreaterThan(20));}
\DoxyCodeLine{00599\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 20"{}},\ Explain(m,\ 15));}
\DoxyCodeLine{00600\ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \textcolor{comment}{//\ Helper\ to\ allow\ easy\ testing\ of\ AnyOf\ matchers\ with\ num\ parameters.}}
\DoxyCodeLine{00603\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ AnyOfMatches(\textcolor{keywordtype}{int}\ num,\ \textcolor{keyword}{const}\ Matcher<int>\&\ m)\ \{}
\DoxyCodeLine{00604\ \ \ SCOPED\_TRACE(Describe(m));}
\DoxyCodeLine{00605\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00606\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <=\ num;\ ++i)\ \{}
\DoxyCodeLine{00607\ \ \ \ \ EXPECT\_TRUE(m.Matches(i));}
\DoxyCodeLine{00608\ \ \ \}}
\DoxyCodeLine{00609\ \ \ EXPECT\_FALSE(m.Matches(num\ +\ 1));}
\DoxyCodeLine{00610\ \}}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ AnyOfStringMatches(\textcolor{keywordtype}{int}\ num,\ \textcolor{keyword}{const}\ Matcher<std::string>\&\ m)\ \{}
\DoxyCodeLine{00613\ \ \ SCOPED\_TRACE(Describe(m));}
\DoxyCodeLine{00614\ \ \ EXPECT\_FALSE(m.Matches(std::to\_string(0)));}
\DoxyCodeLine{00615\ }
\DoxyCodeLine{00616\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <=\ num;\ ++i)\ \{}
\DoxyCodeLine{00617\ \ \ \ \ EXPECT\_TRUE(m.Matches(std::to\_string(i)));}
\DoxyCodeLine{00618\ \ \ \}}
\DoxyCodeLine{00619\ \ \ EXPECT\_FALSE(m.Matches(std::to\_string(num\ +\ 1)));}
\DoxyCodeLine{00620\ \}}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ INSTANTIATE\_GTEST\_MATCHER\_TEST\_P(AnyOfTest);}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \textcolor{comment}{//\ Tests\ that\ AnyOf(m1,\ ...,\ mn)\ matches\ any\ value\ that\ matches\ at}}
\DoxyCodeLine{00625\ \textcolor{comment}{//\ least\ one\ of\ the\ given\ matchers.}}
\DoxyCodeLine{00626\ TEST(AnyOfTest,\ MatchesWhenAnyMatches)\ \{}
\DoxyCodeLine{00627\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00628\ \ \ m\ =\ AnyOf(Le(1),\ Ge(3));}
\DoxyCodeLine{00629\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00630\ \ \ EXPECT\_TRUE(m.Matches(4));}
\DoxyCodeLine{00631\ \ \ EXPECT\_FALSE(m.Matches(2));}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2));}
\DoxyCodeLine{00634\ \ \ EXPECT\_TRUE(m.Matches(-\/1));}
\DoxyCodeLine{00635\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00636\ \ \ EXPECT\_TRUE(m.Matches(2));}
\DoxyCodeLine{00637\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2),\ Eq(3));}
\DoxyCodeLine{00640\ \ \ EXPECT\_TRUE(m.Matches(-\/1));}
\DoxyCodeLine{00641\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00642\ \ \ EXPECT\_TRUE(m.Matches(2));}
\DoxyCodeLine{00643\ \ \ EXPECT\_TRUE(m.Matches(3));}
\DoxyCodeLine{00644\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ m\ =\ AnyOf(Le(0),\ Gt(10),\ 3,\ 5,\ 7);}
\DoxyCodeLine{00647\ \ \ EXPECT\_TRUE(m.Matches(0));}
\DoxyCodeLine{00648\ \ \ EXPECT\_TRUE(m.Matches(11));}
\DoxyCodeLine{00649\ \ \ EXPECT\_TRUE(m.Matches(3));}
\DoxyCodeLine{00650\ \ \ EXPECT\_FALSE(m.Matches(2));}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \textcolor{comment}{//\ The\ following\ tests\ for\ varying\ number\ of\ sub-\/matchers.\ Due\ to\ the\ way}}
\DoxyCodeLine{00653\ \ \ \textcolor{comment}{//\ the\ sub-\/matchers\ are\ handled\ it\ is\ enough\ to\ test\ every\ sub-\/matcher\ once}}
\DoxyCodeLine{00654\ \ \ \textcolor{comment}{//\ with\ sub-\/matchers\ using\ the\ same\ matcher\ type.\ Varying\ matcher\ types\ are}}
\DoxyCodeLine{00655\ \ \ \textcolor{comment}{//\ checked\ for\ above.}}
\DoxyCodeLine{00656\ \ \ AnyOfMatches(2,\ AnyOf(1,\ 2));}
\DoxyCodeLine{00657\ \ \ AnyOfMatches(3,\ AnyOf(1,\ 2,\ 3));}
\DoxyCodeLine{00658\ \ \ AnyOfMatches(4,\ AnyOf(1,\ 2,\ 3,\ 4));}
\DoxyCodeLine{00659\ \ \ AnyOfMatches(5,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5));}
\DoxyCodeLine{00660\ \ \ AnyOfMatches(6,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6));}
\DoxyCodeLine{00661\ \ \ AnyOfMatches(7,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7));}
\DoxyCodeLine{00662\ \ \ AnyOfMatches(8,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8));}
\DoxyCodeLine{00663\ \ \ AnyOfMatches(9,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9));}
\DoxyCodeLine{00664\ \ \ AnyOfMatches(10,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10));}
\DoxyCodeLine{00665\ \}}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ \textcolor{comment}{//\ Tests\ the\ variadic\ version\ of\ the\ AnyOfMatcher.}}
\DoxyCodeLine{00668\ TEST(AnyOfTest,\ VariadicMatchesWhenAnyMatches)\ \{}
\DoxyCodeLine{00669\ \ \ \textcolor{comment}{//\ Also\ make\ sure\ AnyOf\ is\ defined\ in\ the\ right\ namespace\ and\ does\ not\ depend}}
\DoxyCodeLine{00670\ \ \ \textcolor{comment}{//\ on\ ADL.}}
\DoxyCodeLine{00671\ \ \ Matcher<int>\ m\ =\ ::testing::AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10,\ 11);}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ EXPECT\_THAT(Describe(m),\ EndsWith(\textcolor{stringliteral}{"{}or\ (is\ equal\ to\ 11)"{}}));}
\DoxyCodeLine{00674\ \ \ AnyOfMatches(11,\ m);}
\DoxyCodeLine{00675\ \ \ AnyOfMatches(50,\ AnyOf(1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9,\ 10,\ 11,\ 12,\ 13,\ 14,\ 15,\ 16,}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17,\ 18,\ 19,\ 20,\ 21,\ 22,\ 23,\ 24,\ 25,\ 26,\ 27,\ 28,\ 29,\ 30,}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 31,\ 32,\ 33,\ 34,\ 35,\ 36,\ 37,\ 38,\ 39,\ 40,\ 41,\ 42,\ 43,\ 44,}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 45,\ 46,\ 47,\ 48,\ 49,\ 50));}
\DoxyCodeLine{00679\ \ \ AnyOfStringMatches(}
\DoxyCodeLine{00680\ \ \ \ \ \ \ 50,\ AnyOf(\textcolor{stringliteral}{"{}1"{}},\ \textcolor{stringliteral}{"{}2"{}},\ \textcolor{stringliteral}{"{}3"{}},\ \textcolor{stringliteral}{"{}4"{}},\ \textcolor{stringliteral}{"{}5"{}},\ \textcolor{stringliteral}{"{}6"{}},\ \textcolor{stringliteral}{"{}7"{}},\ \textcolor{stringliteral}{"{}8"{}},\ \textcolor{stringliteral}{"{}9"{}},\ \textcolor{stringliteral}{"{}10"{}},\ \textcolor{stringliteral}{"{}11"{}},\ \textcolor{stringliteral}{"{}12"{}},}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}13"{}},\ \textcolor{stringliteral}{"{}14"{}},\ \textcolor{stringliteral}{"{}15"{}},\ \textcolor{stringliteral}{"{}16"{}},\ \textcolor{stringliteral}{"{}17"{}},\ \textcolor{stringliteral}{"{}18"{}},\ \textcolor{stringliteral}{"{}19"{}},\ \textcolor{stringliteral}{"{}20"{}},\ \textcolor{stringliteral}{"{}21"{}},\ \textcolor{stringliteral}{"{}22"{}},}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}23"{}},\ \textcolor{stringliteral}{"{}24"{}},\ \textcolor{stringliteral}{"{}25"{}},\ \textcolor{stringliteral}{"{}26"{}},\ \textcolor{stringliteral}{"{}27"{}},\ \textcolor{stringliteral}{"{}28"{}},\ \textcolor{stringliteral}{"{}29"{}},\ \textcolor{stringliteral}{"{}30"{}},\ \textcolor{stringliteral}{"{}31"{}},\ \textcolor{stringliteral}{"{}32"{}},}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}33"{}},\ \textcolor{stringliteral}{"{}34"{}},\ \textcolor{stringliteral}{"{}35"{}},\ \textcolor{stringliteral}{"{}36"{}},\ \textcolor{stringliteral}{"{}37"{}},\ \textcolor{stringliteral}{"{}38"{}},\ \textcolor{stringliteral}{"{}39"{}},\ \textcolor{stringliteral}{"{}40"{}},\ \textcolor{stringliteral}{"{}41"{}},\ \textcolor{stringliteral}{"{}42"{}},}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}43"{}},\ \textcolor{stringliteral}{"{}44"{}},\ \textcolor{stringliteral}{"{}45"{}},\ \textcolor{stringliteral}{"{}46"{}},\ \textcolor{stringliteral}{"{}47"{}},\ \textcolor{stringliteral}{"{}48"{}},\ \textcolor{stringliteral}{"{}49"{}},\ \textcolor{stringliteral}{"{}50"{}}));}
\DoxyCodeLine{00685\ \}}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ TEST(ConditionalTest,\ MatchesFirstIfCondition)\ \{}
\DoxyCodeLine{00688\ \ \ Matcher<std::string>\ eq\_red\ =\ Eq(\textcolor{stringliteral}{"{}red"{}});}
\DoxyCodeLine{00689\ \ \ Matcher<std::string>\ ne\_red\ =\ Ne(\textcolor{stringliteral}{"{}red"{}});}
\DoxyCodeLine{00690\ \ \ Matcher<std::string>\ m\ =\ Conditional(\textcolor{keyword}{true},\ eq\_red,\ ne\_red);}
\DoxyCodeLine{00691\ \ \ EXPECT\_TRUE(m.Matches(\textcolor{stringliteral}{"{}red"{}}));}
\DoxyCodeLine{00692\ \ \ EXPECT\_FALSE(m.Matches(\textcolor{stringliteral}{"{}green"{}}));}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ \ \ StringMatchResultListener\ listener;}
\DoxyCodeLine{00695\ \ \ StringMatchResultListener\ expected;}
\DoxyCodeLine{00696\ \ \ EXPECT\_FALSE(m.MatchAndExplain(\textcolor{stringliteral}{"{}green"{}},\ \&listener));}
\DoxyCodeLine{00697\ \ \ EXPECT\_FALSE(eq\_red.MatchAndExplain(\textcolor{stringliteral}{"{}green"{}},\ \&expected));}
\DoxyCodeLine{00698\ \ \ EXPECT\_THAT(listener.str(),\ Eq(expected.str()));}
\DoxyCodeLine{00699\ \}}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00701\ TEST(ConditionalTest,\ MatchesSecondIfCondition)\ \{}
\DoxyCodeLine{00702\ \ \ Matcher<std::string>\ eq\_red\ =\ Eq(\textcolor{stringliteral}{"{}red"{}});}
\DoxyCodeLine{00703\ \ \ Matcher<std::string>\ ne\_red\ =\ Ne(\textcolor{stringliteral}{"{}red"{}});}
\DoxyCodeLine{00704\ \ \ Matcher<std::string>\ m\ =\ Conditional(\textcolor{keyword}{false},\ eq\_red,\ ne\_red);}
\DoxyCodeLine{00705\ \ \ EXPECT\_FALSE(m.Matches(\textcolor{stringliteral}{"{}red"{}}));}
\DoxyCodeLine{00706\ \ \ EXPECT\_TRUE(m.Matches(\textcolor{stringliteral}{"{}green"{}}));}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ StringMatchResultListener\ listener;}
\DoxyCodeLine{00709\ \ \ StringMatchResultListener\ expected;}
\DoxyCodeLine{00710\ \ \ EXPECT\_FALSE(m.MatchAndExplain(\textcolor{stringliteral}{"{}red"{}},\ \&listener));}
\DoxyCodeLine{00711\ \ \ EXPECT\_FALSE(ne\_red.MatchAndExplain(\textcolor{stringliteral}{"{}red"{}},\ \&expected));}
\DoxyCodeLine{00712\ \ \ EXPECT\_THAT(listener.str(),\ Eq(expected.str()));}
\DoxyCodeLine{00713\ \}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \textcolor{comment}{//\ Tests\ that\ AnyOf(m1,\ ...,\ mn)\ describes\ itself\ properly.}}
\DoxyCodeLine{00716\ TEST(AnyOfTest,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00717\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00718\ \ \ m\ =\ AnyOf(Le(1),\ Ge(3));}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(is\ <=\ 1)\ or\ (is\ >=\ 3)"{}},\ Describe(m));}
\DoxyCodeLine{00721\ }
\DoxyCodeLine{00722\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2));}
\DoxyCodeLine{00723\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(is\ <\ 0)\ or\ (is\ equal\ to\ 1)\ or\ (is\ equal\ to\ 2)"{}},\ Describe(m));}
\DoxyCodeLine{00724\ }
\DoxyCodeLine{00725\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2),\ Eq(3));}
\DoxyCodeLine{00726\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(is\ <\ 0)\ or\ (is\ equal\ to\ 1)\ or\ (is\ equal\ to\ 2)\ or\ (is\ equal\ to\ 3)"{}},}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ Describe(m));}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ m\ =\ AnyOf(Le(0),\ Gt(10),\ 3,\ 5,\ 7);}
\DoxyCodeLine{00730\ \ \ EXPECT\_EQ(}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(is\ <=\ 0)\ or\ (is\ >\ 10)\ or\ (is\ equal\ to\ 3)\ or\ (is\ equal\ to\ 5)\ or\ (is\ "{}}}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}equal\ to\ 7)"{}},}
\DoxyCodeLine{00733\ \ \ \ \ \ \ Describe(m));}
\DoxyCodeLine{00734\ \}}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \textcolor{comment}{//\ Tests\ that\ AnyOf(m1,\ ...,\ mn)\ describes\ its\ negation\ properly.}}
\DoxyCodeLine{00737\ TEST(AnyOfTest,\ CanDescribeNegation)\ \{}
\DoxyCodeLine{00738\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00739\ \ \ m\ =\ AnyOf(Le(1),\ Ge(3));}
\DoxyCodeLine{00740\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(isn't\ <=\ 1)\ and\ (isn't\ >=\ 3)"{}},\ DescribeNegation(m));}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2));}
\DoxyCodeLine{00743\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}(isn't\ <\ 0)\ and\ (isn't\ equal\ to\ 1)\ and\ (isn't\ equal\ to\ 2)"{}},}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m));}
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ m\ =\ AnyOf(Lt(0),\ Eq(1),\ Eq(2),\ Eq(3));}
\DoxyCodeLine{00747\ \ \ EXPECT\_EQ(}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(isn't\ <\ 0)\ and\ (isn't\ equal\ to\ 1)\ and\ (isn't\ equal\ to\ 2)\ and\ (isn't\ "{}}}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}equal\ to\ 3)"{}},}
\DoxyCodeLine{00750\ \ \ \ \ \ \ DescribeNegation(m));}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ m\ =\ AnyOf(Le(0),\ Gt(10),\ 3,\ 5,\ 7);}
\DoxyCodeLine{00753\ \ \ EXPECT\_EQ(}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(isn't\ <=\ 0)\ and\ (isn't\ >\ 10)\ and\ (isn't\ equal\ to\ 3)\ and\ (isn't\ equal\ "{}}}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}to\ 5)\ and\ (isn't\ equal\ to\ 7)"{}},}
\DoxyCodeLine{00756\ \ \ \ \ \ \ DescribeNegation(m));}
\DoxyCodeLine{00757\ \}}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \textcolor{comment}{//\ Tests\ that\ monomorphic\ matchers\ are\ safely\ cast\ by\ the\ AnyOf\ matcher.}}
\DoxyCodeLine{00760\ TEST(AnyOfTest,\ AnyOfMatcherSafelyCastsMonomorphicMatchers)\ \{}
\DoxyCodeLine{00761\ \ \ \textcolor{comment}{//\ greater\_than\_5\ and\ less\_than\_10\ are\ monomorphic\ matchers.}}
\DoxyCodeLine{00762\ \ \ Matcher<int>\ greater\_than\_5\ =\ Gt(5);}
\DoxyCodeLine{00763\ \ \ Matcher<int>\ less\_than\_10\ =\ Lt(10);}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \ \ Matcher<const\ int\&>\ m\ =\ AnyOf(greater\_than\_5,\ less\_than\_10);}
\DoxyCodeLine{00766\ \ \ Matcher<int\&>\ m2\ =\ AnyOf(greater\_than\_5,\ less\_than\_10);}
\DoxyCodeLine{00767\ \ \ Matcher<int\&>\ m3\ =\ AnyOf(greater\_than\_5,\ m2);}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \textcolor{comment}{//\ Tests\ that\ EitherOf\ works\ when\ composing\ itself.}}
\DoxyCodeLine{00770\ \ \ Matcher<const\ int\&>\ m4\ =\ AnyOf(greater\_than\_5,\ less\_than\_10,\ less\_than\_10);}
\DoxyCodeLine{00771\ \ \ Matcher<int\&>\ m5\ =\ AnyOf(greater\_than\_5,\ less\_than\_10,\ less\_than\_10);}
\DoxyCodeLine{00772\ \}}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ TEST\_P(AnyOfTestP,\ ExplainsResult)\ \{}
\DoxyCodeLine{00775\ \ \ Matcher<int>\ m;}
\DoxyCodeLine{00776\ }
\DoxyCodeLine{00777\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ Both\ matchers\ need\ to\ explain.\ \ The\ second}}
\DoxyCodeLine{00778\ \ \ \textcolor{comment}{//\ matcher\ doesn't\ give\ an\ explanation,\ so\ only\ the\ first\ matcher's}}
\DoxyCodeLine{00779\ \ \ \textcolor{comment}{//\ explanation\ is\ printed.}}
\DoxyCodeLine{00780\ \ \ m\ =\ AnyOf(GreaterThan(10),\ Lt(0));}
\DoxyCodeLine{00781\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 10"{}},\ Explain(m,\ 5));}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ Both\ matchers\ need\ to\ explain.}}
\DoxyCodeLine{00784\ \ \ m\ =\ AnyOf(GreaterThan(10),\ GreaterThan(20));}
\DoxyCodeLine{00785\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 10,\ and\ which\ is\ 15\ less\ than\ 20"{}},}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ Explain(m,\ 5));}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ All\ matchers\ need\ to\ explain.\ \ The\ second}}
\DoxyCodeLine{00789\ \ \ \textcolor{comment}{//\ matcher\ doesn't\ given\ an\ explanation.}}
\DoxyCodeLine{00790\ \ \ m\ =\ AnyOf(GreaterThan(10),\ Gt(20),\ GreaterThan(30));}
\DoxyCodeLine{00791\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 10,\ and\ which\ is\ 25\ less\ than\ 30"{}},}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ Explain(m,\ 5));}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ \ \ \textcolor{comment}{//\ Failed\ match.\ \ All\ matchers\ need\ to\ explain.}}
\DoxyCodeLine{00795\ \ \ m\ =\ AnyOf(GreaterThan(10),\ GreaterThan(20),\ GreaterThan(30));}
\DoxyCodeLine{00796\ \ \ EXPECT\_EQ(}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}which\ is\ 5\ less\ than\ 10,\ and\ which\ is\ 15\ less\ than\ 20,\ "{}}}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}and\ which\ is\ 25\ less\ than\ 30"{}},}
\DoxyCodeLine{00799\ \ \ \ \ \ \ Explain(m,\ 5));}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ The\ first\ matcher,\ which\ succeeded,\ needs\ to}}
\DoxyCodeLine{00802\ \ \ \textcolor{comment}{//\ explain.}}
\DoxyCodeLine{00803\ \ \ m\ =\ AnyOf(GreaterThan(10),\ GreaterThan(20));}
\DoxyCodeLine{00804\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ more\ than\ 10"{}},\ Explain(m,\ 15));}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ The\ second\ matcher,\ which\ succeeded,\ needs\ to}}
\DoxyCodeLine{00807\ \ \ \textcolor{comment}{//\ explain.\ \ Since\ it\ doesn't\ given\ an\ explanation,\ nothing\ is}}
\DoxyCodeLine{00808\ \ \ \textcolor{comment}{//\ printed.}}
\DoxyCodeLine{00809\ \ \ m\ =\ AnyOf(GreaterThan(10),\ Lt(30));}
\DoxyCodeLine{00810\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}"{}},\ Explain(m,\ 0));}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \ \ \textcolor{comment}{//\ Successful\ match.\ \ The\ second\ matcher,\ which\ succeeded,\ needs\ to}}
\DoxyCodeLine{00813\ \ \ \textcolor{comment}{//\ explain.}}
\DoxyCodeLine{00814\ \ \ m\ =\ AnyOf(GreaterThan(30),\ GreaterThan(20));}
\DoxyCodeLine{00815\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 5\ more\ than\ 20"{}},\ Explain(m,\ 25));}
\DoxyCodeLine{00816\ \}}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \textcolor{comment}{//\ The\ following\ predicate\ function\ and\ predicate\ functor\ are\ for}}
\DoxyCodeLine{00819\ \textcolor{comment}{//\ testing\ the\ Truly(predicate)\ matcher.}}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \textcolor{comment}{//\ Returns\ non-\/zero\ if\ the\ input\ is\ positive.\ \ Note\ that\ the\ return}}
\DoxyCodeLine{00822\ \textcolor{comment}{//\ type\ of\ this\ function\ is\ not\ bool.\ \ It's\ OK\ as\ Truly()\ accepts\ any}}
\DoxyCodeLine{00823\ \textcolor{comment}{//\ unary\ function\ or\ functor\ whose\ return\ type\ can\ be\ implicitly}}
\DoxyCodeLine{00824\ \textcolor{comment}{//\ converted\ to\ bool.}}
\DoxyCodeLine{00825\ \textcolor{keywordtype}{int}\ IsPositive(\textcolor{keywordtype}{double}\ x)\ \{\ \textcolor{keywordflow}{return}\ x\ >\ 0\ ?\ 1\ :\ 0;\ \}}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \textcolor{comment}{//\ This\ functor\ returns\ true\ if\ the\ input\ is\ greater\ than\ the\ given}}
\DoxyCodeLine{00828\ \textcolor{comment}{//\ number.}}
\DoxyCodeLine{00829\ \textcolor{keyword}{class\ }IsGreaterThan\ \{}
\DoxyCodeLine{00830\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00831\ \ \ \textcolor{keyword}{explicit}\ IsGreaterThan(\textcolor{keywordtype}{int}\ threshold)\ :\ threshold\_(threshold)\ \{\}}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \ \ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ n\ >\ threshold\_;\ \}}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00836\ \ \ \textcolor{keywordtype}{int}\ threshold\_;}
\DoxyCodeLine{00837\ \};}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \textcolor{comment}{//\ For\ testing\ Truly().}}
\DoxyCodeLine{00840\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ foo\ =\ 0;}
\DoxyCodeLine{00841\ }
\DoxyCodeLine{00842\ \textcolor{comment}{//\ This\ predicate\ returns\ true\ if\ and\ only\ if\ the\ argument\ references\ foo\ and}}
\DoxyCodeLine{00843\ \textcolor{comment}{//\ has\ a\ zero\ value.}}
\DoxyCodeLine{00844\ \textcolor{keywordtype}{bool}\ ReferencesFooAndIsZero(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\&\ n)\ \{\ \textcolor{keywordflow}{return}\ (\&n\ ==\ \&foo)\ \&\&\ (n\ ==\ 0);\ \}}
\DoxyCodeLine{00845\ }
\DoxyCodeLine{00846\ \textcolor{comment}{//\ Tests\ that\ Truly(predicate)\ matches\ what\ satisfies\ the\ given}}
\DoxyCodeLine{00847\ \textcolor{comment}{//\ predicate.}}
\DoxyCodeLine{00848\ TEST(TrulyTest,\ MatchesWhatSatisfiesThePredicate)\ \{}
\DoxyCodeLine{00849\ \ \ Matcher<double>\ m\ =\ Truly(IsPositive);}
\DoxyCodeLine{00850\ \ \ EXPECT\_TRUE(m.Matches(2.0));}
\DoxyCodeLine{00851\ \ \ EXPECT\_FALSE(m.Matches(-\/1.5));}
\DoxyCodeLine{00852\ \}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \textcolor{comment}{//\ Tests\ that\ Truly(predicate\_functor)\ works\ too.}}
\DoxyCodeLine{00855\ TEST(TrulyTest,\ CanBeUsedWithFunctor)\ \{}
\DoxyCodeLine{00856\ \ \ Matcher<int>\ m\ =\ Truly(IsGreaterThan(5));}
\DoxyCodeLine{00857\ \ \ EXPECT\_TRUE(m.Matches(6));}
\DoxyCodeLine{00858\ \ \ EXPECT\_FALSE(m.Matches(4));}
\DoxyCodeLine{00859\ \}}
\DoxyCodeLine{00860\ }
\DoxyCodeLine{00861\ \textcolor{comment}{//\ A\ class\ that\ can\ be\ implicitly\ converted\ to\ bool.}}
\DoxyCodeLine{00862\ \textcolor{keyword}{class\ }ConvertibleToBool\ \{}
\DoxyCodeLine{00863\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00864\ \ \ \textcolor{keyword}{explicit}\ ConvertibleToBool(\textcolor{keywordtype}{int}\ number)\ :\ number\_(number)\ \{\}}
\DoxyCodeLine{00865\ \ \ \textcolor{keyword}{operator}\ bool()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ number\_\ !=\ 0;\ \}}
\DoxyCodeLine{00866\ }
\DoxyCodeLine{00867\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00868\ \ \ \textcolor{keywordtype}{int}\ number\_;}
\DoxyCodeLine{00869\ \};}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ ConvertibleToBool\ IsNotZero(\textcolor{keywordtype}{int}\ number)\ \{\ \textcolor{keywordflow}{return}\ ConvertibleToBool(number);\ \}}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \textcolor{comment}{//\ Tests\ that\ the\ predicate\ used\ in\ Truly()\ may\ return\ a\ class\ that's}}
\DoxyCodeLine{00874\ \textcolor{comment}{//\ implicitly\ convertible\ to\ bool,\ even\ when\ the\ class\ has\ no}}
\DoxyCodeLine{00875\ \textcolor{comment}{//\ operator!().}}
\DoxyCodeLine{00876\ TEST(TrulyTest,\ PredicateCanReturnAClassConvertibleToBool)\ \{}
\DoxyCodeLine{00877\ \ \ Matcher<int>\ m\ =\ Truly(IsNotZero);}
\DoxyCodeLine{00878\ \ \ EXPECT\_TRUE(m.Matches(1));}
\DoxyCodeLine{00879\ \ \ EXPECT\_FALSE(m.Matches(0));}
\DoxyCodeLine{00880\ \}}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \textcolor{comment}{//\ Tests\ that\ Truly(predicate)\ can\ describe\ itself\ properly.}}
\DoxyCodeLine{00883\ TEST(TrulyTest,\ CanDescribeSelf)\ \{}
\DoxyCodeLine{00884\ \ \ Matcher<double>\ m\ =\ Truly(IsPositive);}
\DoxyCodeLine{00885\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}satisfies\ the\ given\ predicate"{}},\ Describe(m));}
\DoxyCodeLine{00886\ \}}
\DoxyCodeLine{00887\ }
\DoxyCodeLine{00888\ \textcolor{comment}{//\ Tests\ that\ Truly(predicate)\ works\ when\ the\ matcher\ takes\ its}}
\DoxyCodeLine{00889\ \textcolor{comment}{//\ argument\ by\ reference.}}
\DoxyCodeLine{00890\ TEST(TrulyTest,\ WorksForByRefArguments)\ \{}
\DoxyCodeLine{00891\ \ \ Matcher<const\ int\&>\ m\ =\ Truly(ReferencesFooAndIsZero);}
\DoxyCodeLine{00892\ \ \ EXPECT\_TRUE(m.Matches(foo));}
\DoxyCodeLine{00893\ \ \ \textcolor{keywordtype}{int}\ n\ =\ 0;}
\DoxyCodeLine{00894\ \ \ EXPECT\_FALSE(m.Matches(n));}
\DoxyCodeLine{00895\ \}}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \textcolor{comment}{//\ Tests\ that\ Truly(predicate)\ provides\ a\ helpful\ reason\ when\ it\ fails.}}
\DoxyCodeLine{00898\ TEST(TrulyTest,\ ExplainsFailures)\ \{}
\DoxyCodeLine{00899\ \ \ StringMatchResultListener\ listener;}
\DoxyCodeLine{00900\ \ \ EXPECT\_FALSE(ExplainMatchResult(Truly(IsPositive),\ -\/1,\ \&listener));}
\DoxyCodeLine{00901\ \ \ EXPECT\_EQ(listener.str(),\ \textcolor{stringliteral}{"{}didn't\ satisfy\ the\ given\ predicate"{}});}
\DoxyCodeLine{00902\ \}}
\DoxyCodeLine{00903\ }
\DoxyCodeLine{00904\ \textcolor{comment}{//\ Tests\ that\ Matches(m)\ is\ a\ predicate\ satisfied\ by\ whatever\ that}}
\DoxyCodeLine{00905\ \textcolor{comment}{//\ matches\ matcher\ m.}}
\DoxyCodeLine{00906\ TEST(MatchesTest,\ IsSatisfiedByWhatMatchesTheMatcher)\ \{}
\DoxyCodeLine{00907\ \ \ EXPECT\_TRUE(Matches(Ge(0))(1));}
\DoxyCodeLine{00908\ \ \ EXPECT\_FALSE(Matches(Eq(\textcolor{charliteral}{'a'}))(\textcolor{charliteral}{'b'}));}
\DoxyCodeLine{00909\ \}}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \textcolor{comment}{//\ Tests\ that\ Matches(m)\ works\ when\ the\ matcher\ takes\ its\ argument\ by}}
\DoxyCodeLine{00912\ \textcolor{comment}{//\ reference.}}
\DoxyCodeLine{00913\ TEST(MatchesTest,\ WorksOnByRefArguments)\ \{}
\DoxyCodeLine{00914\ \ \ \textcolor{keywordtype}{int}\ m\ =\ 0,\ n\ =\ 0;}
\DoxyCodeLine{00915\ \ \ EXPECT\_TRUE(Matches(AllOf(Ref(n),\ Eq(0)))(n));}
\DoxyCodeLine{00916\ \ \ EXPECT\_FALSE(Matches(Ref(m))(n));}
\DoxyCodeLine{00917\ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \textcolor{comment}{//\ Tests\ that\ a\ Matcher\ on\ non-\/reference\ type\ can\ be\ used\ in}}
\DoxyCodeLine{00920\ \textcolor{comment}{//\ Matches().}}
\DoxyCodeLine{00921\ TEST(MatchesTest,\ WorksWithMatcherOnNonRefType)\ \{}
\DoxyCodeLine{00922\ \ \ Matcher<int>\ eq5\ =\ Eq(5);}
\DoxyCodeLine{00923\ \ \ EXPECT\_TRUE(Matches(eq5)(5));}
\DoxyCodeLine{00924\ \ \ EXPECT\_FALSE(Matches(eq5)(2));}
\DoxyCodeLine{00925\ \}}
\DoxyCodeLine{00926\ }
\DoxyCodeLine{00927\ \textcolor{comment}{//\ Tests\ Value(value,\ matcher).\ \ Since\ Value()\ is\ a\ simple\ wrapper\ for}}
\DoxyCodeLine{00928\ \textcolor{comment}{//\ Matches(),\ which\ has\ been\ tested\ already,\ we\ don't\ spend\ a\ lot\ of}}
\DoxyCodeLine{00929\ \textcolor{comment}{//\ effort\ on\ testing\ Value().}}
\DoxyCodeLine{00930\ TEST(ValueTest,\ WorksWithPolymorphicMatcher)\ \{}
\DoxyCodeLine{00931\ \ \ EXPECT\_TRUE(Value(\textcolor{stringliteral}{"{}hi"{}},\ StartsWith(\textcolor{stringliteral}{"{}h"{}})));}
\DoxyCodeLine{00932\ \ \ EXPECT\_FALSE(Value(5,\ Gt(10)));}
\DoxyCodeLine{00933\ \}}
\DoxyCodeLine{00934\ }
\DoxyCodeLine{00935\ TEST(ValueTest,\ WorksWithMonomorphicMatcher)\ \{}
\DoxyCodeLine{00936\ \ \ \textcolor{keyword}{const}\ Matcher<int>\ is\_zero\ =\ Eq(0);}
\DoxyCodeLine{00937\ \ \ EXPECT\_TRUE(Value(0,\ is\_zero));}
\DoxyCodeLine{00938\ \ \ EXPECT\_FALSE(Value(\textcolor{charliteral}{'a'},\ is\_zero));}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \ \ \textcolor{keywordtype}{int}\ n\ =\ 0;}
\DoxyCodeLine{00941\ \ \ \textcolor{keyword}{const}\ Matcher<const\ int\&>\ ref\_n\ =\ Ref(n);}
\DoxyCodeLine{00942\ \ \ EXPECT\_TRUE(Value(n,\ ref\_n));}
\DoxyCodeLine{00943\ \ \ EXPECT\_FALSE(Value(1,\ ref\_n));}
\DoxyCodeLine{00944\ \}}
\DoxyCodeLine{00945\ }
\DoxyCodeLine{00946\ TEST(AllArgsTest,\ WorksForTuple)\ \{}
\DoxyCodeLine{00947\ \ \ EXPECT\_THAT(std::make\_tuple(1,\ 2L),\ AllArgs(Lt()));}
\DoxyCodeLine{00948\ \ \ EXPECT\_THAT(std::make\_tuple(2L,\ 1),\ Not(AllArgs(Lt())));}
\DoxyCodeLine{00949\ \}}
\DoxyCodeLine{00950\ }
\DoxyCodeLine{00951\ TEST(AllArgsTest,\ WorksForNonTuple)\ \{}
\DoxyCodeLine{00952\ \ \ EXPECT\_THAT(42,\ AllArgs(Gt(0)));}
\DoxyCodeLine{00953\ \ \ EXPECT\_THAT(\textcolor{charliteral}{'a'},\ Not(AllArgs(Eq(\textcolor{charliteral}{'b'}))));}
\DoxyCodeLine{00954\ \}}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \textcolor{keyword}{class\ }AllArgsHelper\ \{}
\DoxyCodeLine{00957\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00958\ \ \ AllArgsHelper()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00959\ }
\DoxyCodeLine{00960\ \ \ MOCK\_METHOD2(Helper,\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{char}\ x,\ \textcolor{keywordtype}{int}\ y));}
\DoxyCodeLine{00961\ }
\DoxyCodeLine{00962\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00963\ \ \ AllArgsHelper(\textcolor{keyword}{const}\ AllArgsHelper\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00964\ \ \ AllArgsHelper\&\ operator=(\textcolor{keyword}{const}\ AllArgsHelper\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00965\ \};}
\DoxyCodeLine{00966\ }
\DoxyCodeLine{00967\ TEST(AllArgsTest,\ WorksInWithClause)\ \{}
\DoxyCodeLine{00968\ \ \ AllArgsHelper\ helper;}
\DoxyCodeLine{00969\ \ \ ON\_CALL(helper,\ Helper(\_,\ \_)).With(AllArgs(Lt())).WillByDefault(Return(1));}
\DoxyCodeLine{00970\ \ \ EXPECT\_CALL(helper,\ Helper(\_,\ \_));}
\DoxyCodeLine{00971\ \ \ EXPECT\_CALL(helper,\ Helper(\_,\ \_)).With(AllArgs(Gt())).WillOnce(Return(2));}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ EXPECT\_EQ(1,\ helper.Helper(\textcolor{charliteral}{'\(\backslash\)1'},\ 2));}
\DoxyCodeLine{00974\ \ \ EXPECT\_EQ(2,\ helper.Helper(\textcolor{charliteral}{'a'},\ 1));}
\DoxyCodeLine{00975\ \}}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \textcolor{keyword}{class\ }OptionalMatchersHelper\ \{}
\DoxyCodeLine{00978\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00979\ \ \ OptionalMatchersHelper()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ MOCK\_METHOD0(NoArgs,\ \textcolor{keywordtype}{int}());}
\DoxyCodeLine{00982\ }
\DoxyCodeLine{00983\ \ \ MOCK\_METHOD1(OneArg,\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{int}\ y));}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \ \ MOCK\_METHOD2(TwoArgs,\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{char}\ x,\ \textcolor{keywordtype}{int}\ y));}
\DoxyCodeLine{00986\ }
\DoxyCodeLine{00987\ \ \ MOCK\_METHOD1(Overloaded,\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{char}\ x));}
\DoxyCodeLine{00988\ \ \ MOCK\_METHOD2(Overloaded,\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{char}\ x,\ \textcolor{keywordtype}{int}\ y));}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00991\ \ \ OptionalMatchersHelper(\textcolor{keyword}{const}\ OptionalMatchersHelper\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00992\ \ \ OptionalMatchersHelper\&\ operator=(\textcolor{keyword}{const}\ OptionalMatchersHelper\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00993\ \};}
\DoxyCodeLine{00994\ }
\DoxyCodeLine{00995\ TEST(AllArgsTest,\ WorksWithoutMatchers)\ \{}
\DoxyCodeLine{00996\ \ \ OptionalMatchersHelper\ helper;}
\DoxyCodeLine{00997\ }
\DoxyCodeLine{00998\ \ \ ON\_CALL(helper,\ NoArgs).WillByDefault(Return(10));}
\DoxyCodeLine{00999\ \ \ ON\_CALL(helper,\ OneArg).WillByDefault(Return(20));}
\DoxyCodeLine{01000\ \ \ ON\_CALL(helper,\ TwoArgs).WillByDefault(Return(30));}
\DoxyCodeLine{01001\ }
\DoxyCodeLine{01002\ \ \ EXPECT\_EQ(10,\ helper.NoArgs());}
\DoxyCodeLine{01003\ \ \ EXPECT\_EQ(20,\ helper.OneArg(1));}
\DoxyCodeLine{01004\ \ \ EXPECT\_EQ(30,\ helper.TwoArgs(\textcolor{charliteral}{'\(\backslash\)1'},\ 2));}
\DoxyCodeLine{01005\ }
\DoxyCodeLine{01006\ \ \ EXPECT\_CALL(helper,\ NoArgs).Times(1);}
\DoxyCodeLine{01007\ \ \ EXPECT\_CALL(helper,\ OneArg).WillOnce(Return(100));}
\DoxyCodeLine{01008\ \ \ EXPECT\_CALL(helper,\ OneArg(17)).WillOnce(Return(200));}
\DoxyCodeLine{01009\ \ \ EXPECT\_CALL(helper,\ TwoArgs).Times(0);}
\DoxyCodeLine{01010\ }
\DoxyCodeLine{01011\ \ \ EXPECT\_EQ(10,\ helper.NoArgs());}
\DoxyCodeLine{01012\ \ \ EXPECT\_EQ(100,\ helper.OneArg(1));}
\DoxyCodeLine{01013\ \ \ EXPECT\_EQ(200,\ helper.OneArg(17));}
\DoxyCodeLine{01014\ \}}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ \textcolor{comment}{//\ Tests\ floating-\/point\ matchers.}}
\DoxyCodeLine{01017\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RawType>}
\DoxyCodeLine{01018\ \textcolor{keyword}{class\ }FloatingPointTest\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtesting_1_1Test}{testing::Test}}\ \{}
\DoxyCodeLine{01019\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01020\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classtesting_1_1internal_1_1FloatingPoint}{testing::internal::FloatingPoint<RawType>}}\ Floating;}
\DoxyCodeLine{01021\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Floating::Bits\ Bits;}
\DoxyCodeLine{01022\ }
\DoxyCodeLine{01023\ \ \ FloatingPointTest()}
\DoxyCodeLine{01024\ \ \ \ \ \ \ :\ max\_ulps\_(Floating::kMaxUlps),}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ zero\_bits\_(Floating(0).bits()),}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ one\_bits\_(Floating(1).bits()),}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ infinity\_bits\_(Floating(Floating::Infinity()).bits()),}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ close\_to\_positive\_zero\_(}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \ \ \ \ Floating::ReinterpretBits(zero\_bits\_\ +\ max\_ulps\_\ /\ 2)),}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ close\_to\_negative\_zero\_(}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ -\/Floating::ReinterpretBits(zero\_bits\_\ +\ max\_ulps\_\ -\/\ max\_ulps\_\ /\ 2)),}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ further\_from\_negative\_zero\_(-\/Floating::ReinterpretBits(}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \ \ \ \ \ \ zero\_bits\_\ +\ max\_ulps\_\ +\ 1\ -\/\ max\_ulps\_\ /\ 2)),}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ close\_to\_one\_(Floating::ReinterpretBits(one\_bits\_\ +\ max\_ulps\_)),}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ further\_from\_one\_(Floating::ReinterpretBits(one\_bits\_\ +\ max\_ulps\_\ +\ 1)),}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ infinity\_(Floating::Infinity()),}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ close\_to\_infinity\_(}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \ \ \ \ Floating::ReinterpretBits(infinity\_bits\_\ -\/\ max\_ulps\_)),}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ further\_from\_infinity\_(}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \ \ \ \ Floating::ReinterpretBits(infinity\_bits\_\ -\/\ max\_ulps\_\ -\/\ 1)),}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ max\_(std::numeric\_limits<RawType>::max()),}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ nan1\_(Floating::ReinterpretBits(Floating::kExponentBitMask\ |\ 1)),}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ nan2\_(Floating::ReinterpretBits(Floating::kExponentBitMask\ |\ 200))\ \{\}}
\DoxyCodeLine{01044\ }
\DoxyCodeLine{01045\ \ \ \textcolor{keywordtype}{void}\ TestSize()\ \{\ EXPECT\_EQ(\textcolor{keyword}{sizeof}(RawType),\ \textcolor{keyword}{sizeof}(Bits));\ \}}
\DoxyCodeLine{01046\ }
\DoxyCodeLine{01047\ \ \ \textcolor{comment}{//\ A\ battery\ of\ tests\ for\ FloatingEqMatcher::Matches.}}
\DoxyCodeLine{01048\ \ \ \textcolor{comment}{//\ matcher\_maker\ is\ a\ pointer\ to\ a\ function\ which\ creates\ a\ FloatingEqMatcher.}}
\DoxyCodeLine{01049\ \ \ \textcolor{keywordtype}{void}\ TestMatches(}
\DoxyCodeLine{01050\ \ \ \ \ \ \ testing::internal::FloatingEqMatcher<RawType>\ (*matcher\_maker)(RawType))\ \{}
\DoxyCodeLine{01051\ \ \ \ \ Matcher<RawType>\ m1\ =\ matcher\_maker(0.0);}
\DoxyCodeLine{01052\ \ \ \ \ EXPECT\_TRUE(m1.Matches(-\/0.0));}
\DoxyCodeLine{01053\ \ \ \ \ EXPECT\_TRUE(m1.Matches(close\_to\_positive\_zero\_));}
\DoxyCodeLine{01054\ \ \ \ \ EXPECT\_TRUE(m1.Matches(close\_to\_negative\_zero\_));}
\DoxyCodeLine{01055\ \ \ \ \ EXPECT\_FALSE(m1.Matches(1.0));}
\DoxyCodeLine{01056\ }
\DoxyCodeLine{01057\ \ \ \ \ Matcher<RawType>\ m2\ =\ matcher\_maker(close\_to\_positive\_zero\_);}
\DoxyCodeLine{01058\ \ \ \ \ EXPECT\_FALSE(m2.Matches(further\_from\_negative\_zero\_));}
\DoxyCodeLine{01059\ }
\DoxyCodeLine{01060\ \ \ \ \ Matcher<RawType>\ m3\ =\ matcher\_maker(1.0);}
\DoxyCodeLine{01061\ \ \ \ \ EXPECT\_TRUE(m3.Matches(close\_to\_one\_));}
\DoxyCodeLine{01062\ \ \ \ \ EXPECT\_FALSE(m3.Matches(further\_from\_one\_));}
\DoxyCodeLine{01063\ }
\DoxyCodeLine{01064\ \ \ \ \ \textcolor{comment}{//\ Test\ commutativity:\ matcher\_maker(0.0).Matches(1.0)\ was\ tested\ above.}}
\DoxyCodeLine{01065\ \ \ \ \ EXPECT\_FALSE(m3.Matches(0.0));}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ \ \ Matcher<RawType>\ m4\ =\ matcher\_maker(-\/infinity\_);}
\DoxyCodeLine{01068\ \ \ \ \ EXPECT\_TRUE(m4.Matches(-\/close\_to\_infinity\_));}
\DoxyCodeLine{01069\ }
\DoxyCodeLine{01070\ \ \ \ \ Matcher<RawType>\ m5\ =\ matcher\_maker(infinity\_);}
\DoxyCodeLine{01071\ \ \ \ \ EXPECT\_TRUE(m5.Matches(close\_to\_infinity\_));}
\DoxyCodeLine{01072\ }
\DoxyCodeLine{01073\ \ \ \ \ \textcolor{comment}{//\ This\ is\ interesting\ as\ the\ representations\ of\ infinity\_\ and\ nan1\_}}
\DoxyCodeLine{01074\ \ \ \ \ \textcolor{comment}{//\ are\ only\ 1\ DLP\ apart.}}
\DoxyCodeLine{01075\ \ \ \ \ EXPECT\_FALSE(m5.Matches(nan1\_));}
\DoxyCodeLine{01076\ }
\DoxyCodeLine{01077\ \ \ \ \ \textcolor{comment}{//\ matcher\_maker\ can\ produce\ a\ Matcher<const\ RawType\&>,\ which\ is\ needed\ in}}
\DoxyCodeLine{01078\ \ \ \ \ \textcolor{comment}{//\ some\ cases.}}
\DoxyCodeLine{01079\ \ \ \ \ Matcher<const\ RawType\&>\ m6\ =\ matcher\_maker(0.0);}
\DoxyCodeLine{01080\ \ \ \ \ EXPECT\_TRUE(m6.Matches(-\/0.0));}
\DoxyCodeLine{01081\ \ \ \ \ EXPECT\_TRUE(m6.Matches(close\_to\_positive\_zero\_));}
\DoxyCodeLine{01082\ \ \ \ \ EXPECT\_FALSE(m6.Matches(1.0));}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \ \ \ \ \textcolor{comment}{//\ matcher\_maker\ can\ produce\ a\ Matcher<RawType\&>,\ which\ is\ needed\ in\ some}}
\DoxyCodeLine{01085\ \ \ \ \ \textcolor{comment}{//\ cases.}}
\DoxyCodeLine{01086\ \ \ \ \ Matcher<RawType\&>\ m7\ =\ matcher\_maker(0.0);}
\DoxyCodeLine{01087\ \ \ \ \ RawType\ x\ =\ 0.0;}
\DoxyCodeLine{01088\ \ \ \ \ EXPECT\_TRUE(m7.Matches(x));}
\DoxyCodeLine{01089\ \ \ \ \ x\ =\ 0.01f;}
\DoxyCodeLine{01090\ \ \ \ \ EXPECT\_FALSE(m7.Matches(x));}
\DoxyCodeLine{01091\ \ \ \}}
\DoxyCodeLine{01092\ }
\DoxyCodeLine{01093\ \ \ \textcolor{comment}{//\ Pre-\/calculated\ numbers\ to\ be\ used\ by\ the\ tests.}}
\DoxyCodeLine{01094\ }
\DoxyCodeLine{01095\ \ \ \textcolor{keyword}{const}\ Bits\ max\_ulps\_;}
\DoxyCodeLine{01096\ }
\DoxyCodeLine{01097\ \ \ \textcolor{keyword}{const}\ Bits\ zero\_bits\_;\ \ \ \ \ \ \textcolor{comment}{//\ The\ bits\ that\ represent\ 0.0.}}
\DoxyCodeLine{01098\ \ \ \textcolor{keyword}{const}\ Bits\ one\_bits\_;\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ bits\ that\ represent\ 1.0.}}
\DoxyCodeLine{01099\ \ \ \textcolor{keyword}{const}\ Bits\ infinity\_bits\_;\ \ \textcolor{comment}{//\ The\ bits\ that\ represent\ +infinity.}}
\DoxyCodeLine{01100\ }
\DoxyCodeLine{01101\ \ \ \textcolor{comment}{//\ Some\ numbers\ close\ to\ 0.0.}}
\DoxyCodeLine{01102\ \ \ \textcolor{keyword}{const}\ RawType\ close\_to\_positive\_zero\_;}
\DoxyCodeLine{01103\ \ \ \textcolor{keyword}{const}\ RawType\ close\_to\_negative\_zero\_;}
\DoxyCodeLine{01104\ \ \ \textcolor{keyword}{const}\ RawType\ further\_from\_negative\_zero\_;}
\DoxyCodeLine{01105\ }
\DoxyCodeLine{01106\ \ \ \textcolor{comment}{//\ Some\ numbers\ close\ to\ 1.0.}}
\DoxyCodeLine{01107\ \ \ \textcolor{keyword}{const}\ RawType\ close\_to\_one\_;}
\DoxyCodeLine{01108\ \ \ \textcolor{keyword}{const}\ RawType\ further\_from\_one\_;}
\DoxyCodeLine{01109\ }
\DoxyCodeLine{01110\ \ \ \textcolor{comment}{//\ Some\ numbers\ close\ to\ +infinity.}}
\DoxyCodeLine{01111\ \ \ \textcolor{keyword}{const}\ RawType\ infinity\_;}
\DoxyCodeLine{01112\ \ \ \textcolor{keyword}{const}\ RawType\ close\_to\_infinity\_;}
\DoxyCodeLine{01113\ \ \ \textcolor{keyword}{const}\ RawType\ further\_from\_infinity\_;}
\DoxyCodeLine{01114\ }
\DoxyCodeLine{01115\ \ \ \textcolor{comment}{//\ Maximum\ representable\ value\ that's\ not\ infinity.}}
\DoxyCodeLine{01116\ \ \ \textcolor{keyword}{const}\ RawType\ max\_;}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \textcolor{comment}{//\ Some\ NaNs.}}
\DoxyCodeLine{01119\ \ \ \textcolor{keyword}{const}\ RawType\ nan1\_;}
\DoxyCodeLine{01120\ \ \ \textcolor{keyword}{const}\ RawType\ nan2\_;}
\DoxyCodeLine{01121\ \};}
\DoxyCodeLine{01122\ }
\DoxyCodeLine{01123\ \textcolor{comment}{//\ Tests\ floating-\/point\ matchers\ with\ fixed\ epsilons.}}
\DoxyCodeLine{01124\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RawType>}
\DoxyCodeLine{01125\ \textcolor{keyword}{class\ }FloatingPointNearTest\ :\ \textcolor{keyword}{public}\ FloatingPointTest<RawType>\ \{}
\DoxyCodeLine{01126\ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01127\ \ \ \textcolor{keyword}{typedef}\ FloatingPointTest<RawType>\ ParentType;}
\DoxyCodeLine{01128\ }
\DoxyCodeLine{01129\ \ \ \textcolor{comment}{//\ A\ battery\ of\ tests\ for\ FloatingEqMatcher::Matches\ with\ a\ fixed\ epsilon.}}
\DoxyCodeLine{01130\ \ \ \textcolor{comment}{//\ matcher\_maker\ is\ a\ pointer\ to\ a\ function\ which\ creates\ a\ FloatingEqMatcher.}}
\DoxyCodeLine{01131\ \ \ \textcolor{keywordtype}{void}\ TestNearMatches(testing::internal::FloatingEqMatcher<RawType>\ (}
\DoxyCodeLine{01132\ \ \ \ \ \ \ *matcher\_maker)(RawType,\ RawType))\ \{}
\DoxyCodeLine{01133\ \ \ \ \ Matcher<RawType>\ m1\ =\ matcher\_maker(0.0,\ 0.0);}
\DoxyCodeLine{01134\ \ \ \ \ EXPECT\_TRUE(m1.Matches(0.0));}
\DoxyCodeLine{01135\ \ \ \ \ EXPECT\_TRUE(m1.Matches(-\/0.0));}
\DoxyCodeLine{01136\ \ \ \ \ EXPECT\_FALSE(m1.Matches(ParentType::close\_to\_positive\_zero\_));}
\DoxyCodeLine{01137\ \ \ \ \ EXPECT\_FALSE(m1.Matches(ParentType::close\_to\_negative\_zero\_));}
\DoxyCodeLine{01138\ \ \ \ \ EXPECT\_FALSE(m1.Matches(1.0));}
\DoxyCodeLine{01139\ }
\DoxyCodeLine{01140\ \ \ \ \ Matcher<RawType>\ m2\ =\ matcher\_maker(0.0,\ 1.0);}
\DoxyCodeLine{01141\ \ \ \ \ EXPECT\_TRUE(m2.Matches(0.0));}
\DoxyCodeLine{01142\ \ \ \ \ EXPECT\_TRUE(m2.Matches(-\/0.0));}
\DoxyCodeLine{01143\ \ \ \ \ EXPECT\_TRUE(m2.Matches(1.0));}
\DoxyCodeLine{01144\ \ \ \ \ EXPECT\_TRUE(m2.Matches(-\/1.0));}
\DoxyCodeLine{01145\ \ \ \ \ EXPECT\_FALSE(m2.Matches(ParentType::close\_to\_one\_));}
\DoxyCodeLine{01146\ \ \ \ \ EXPECT\_FALSE(m2.Matches(-\/ParentType::close\_to\_one\_));}
\DoxyCodeLine{01147\ }
\DoxyCodeLine{01148\ \ \ \ \ \textcolor{comment}{//\ Check\ that\ inf\ matches\ inf,\ regardless\ of\ the\ of\ the\ specified\ max}}
\DoxyCodeLine{01149\ \ \ \ \ \textcolor{comment}{//\ absolute\ error.}}
\DoxyCodeLine{01150\ \ \ \ \ Matcher<RawType>\ m3\ =\ matcher\_maker(ParentType::infinity\_,\ 0.0);}
\DoxyCodeLine{01151\ \ \ \ \ EXPECT\_TRUE(m3.Matches(ParentType::infinity\_));}
\DoxyCodeLine{01152\ \ \ \ \ EXPECT\_FALSE(m3.Matches(ParentType::close\_to\_infinity\_));}
\DoxyCodeLine{01153\ \ \ \ \ EXPECT\_FALSE(m3.Matches(-\/ParentType::infinity\_));}
\DoxyCodeLine{01154\ }
\DoxyCodeLine{01155\ \ \ \ \ Matcher<RawType>\ m4\ =\ matcher\_maker(-\/ParentType::infinity\_,\ 0.0);}
\DoxyCodeLine{01156\ \ \ \ \ EXPECT\_TRUE(m4.Matches(-\/ParentType::infinity\_));}
\DoxyCodeLine{01157\ \ \ \ \ EXPECT\_FALSE(m4.Matches(-\/ParentType::close\_to\_infinity\_));}
\DoxyCodeLine{01158\ \ \ \ \ EXPECT\_FALSE(m4.Matches(ParentType::infinity\_));}
\DoxyCodeLine{01159\ }
\DoxyCodeLine{01160\ \ \ \ \ \textcolor{comment}{//\ Test\ various\ overflow\ scenarios.}}
\DoxyCodeLine{01161\ \ \ \ \ Matcher<RawType>\ m5\ =\ matcher\_maker(ParentType::max\_,\ ParentType::max\_);}
\DoxyCodeLine{01162\ \ \ \ \ EXPECT\_TRUE(m5.Matches(ParentType::max\_));}
\DoxyCodeLine{01163\ \ \ \ \ EXPECT\_FALSE(m5.Matches(-\/ParentType::max\_));}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \ \ \ \ Matcher<RawType>\ m6\ =\ matcher\_maker(-\/ParentType::max\_,\ ParentType::max\_);}
\DoxyCodeLine{01166\ \ \ \ \ EXPECT\_FALSE(m6.Matches(ParentType::max\_));}
\DoxyCodeLine{01167\ \ \ \ \ EXPECT\_TRUE(m6.Matches(-\/ParentType::max\_));}
\DoxyCodeLine{01168\ }
\DoxyCodeLine{01169\ \ \ \ \ Matcher<RawType>\ m7\ =\ matcher\_maker(ParentType::max\_,\ 0);}
\DoxyCodeLine{01170\ \ \ \ \ EXPECT\_TRUE(m7.Matches(ParentType::max\_));}
\DoxyCodeLine{01171\ \ \ \ \ EXPECT\_FALSE(m7.Matches(-\/ParentType::max\_));}
\DoxyCodeLine{01172\ }
\DoxyCodeLine{01173\ \ \ \ \ Matcher<RawType>\ m8\ =\ matcher\_maker(-\/ParentType::max\_,\ 0);}
\DoxyCodeLine{01174\ \ \ \ \ EXPECT\_FALSE(m8.Matches(ParentType::max\_));}
\DoxyCodeLine{01175\ \ \ \ \ EXPECT\_TRUE(m8.Matches(-\/ParentType::max\_));}
\DoxyCodeLine{01176\ }
\DoxyCodeLine{01177\ \ \ \ \ \textcolor{comment}{//\ The\ difference\ between\ max()\ and\ -\/max()\ normally\ overflows\ to\ infinity,}}
\DoxyCodeLine{01178\ \ \ \ \ \textcolor{comment}{//\ but\ it\ should\ still\ match\ if\ the\ max\_abs\_error\ is\ also\ infinity.}}
\DoxyCodeLine{01179\ \ \ \ \ Matcher<RawType>\ m9\ =}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ matcher\_maker(ParentType::max\_,\ ParentType::infinity\_);}
\DoxyCodeLine{01181\ \ \ \ \ EXPECT\_TRUE(m8.Matches(-\/ParentType::max\_));}
\DoxyCodeLine{01182\ }
\DoxyCodeLine{01183\ \ \ \ \ \textcolor{comment}{//\ matcher\_maker\ can\ produce\ a\ Matcher<const\ RawType\&>,\ which\ is\ needed\ in}}
\DoxyCodeLine{01184\ \ \ \ \ \textcolor{comment}{//\ some\ cases.}}
\DoxyCodeLine{01185\ \ \ \ \ Matcher<const\ RawType\&>\ m10\ =\ matcher\_maker(0.0,\ 1.0);}
\DoxyCodeLine{01186\ \ \ \ \ EXPECT\_TRUE(m10.Matches(-\/0.0));}
\DoxyCodeLine{01187\ \ \ \ \ EXPECT\_TRUE(m10.Matches(ParentType::close\_to\_positive\_zero\_));}
\DoxyCodeLine{01188\ \ \ \ \ EXPECT\_FALSE(m10.Matches(ParentType::close\_to\_one\_));}
\DoxyCodeLine{01189\ }
\DoxyCodeLine{01190\ \ \ \ \ \textcolor{comment}{//\ matcher\_maker\ can\ produce\ a\ Matcher<RawType\&>,\ which\ is\ needed\ in\ some}}
\DoxyCodeLine{01191\ \ \ \ \ \textcolor{comment}{//\ cases.}}
\DoxyCodeLine{01192\ \ \ \ \ Matcher<RawType\&>\ m11\ =\ matcher\_maker(0.0,\ 1.0);}
\DoxyCodeLine{01193\ \ \ \ \ RawType\ x\ =\ 0.0;}
\DoxyCodeLine{01194\ \ \ \ \ EXPECT\_TRUE(m11.Matches(x));}
\DoxyCodeLine{01195\ \ \ \ \ x\ =\ 1.0f;}
\DoxyCodeLine{01196\ \ \ \ \ EXPECT\_TRUE(m11.Matches(x));}
\DoxyCodeLine{01197\ \ \ \ \ x\ =\ -\/1.0f;}
\DoxyCodeLine{01198\ \ \ \ \ EXPECT\_TRUE(m11.Matches(x));}
\DoxyCodeLine{01199\ \ \ \ \ x\ =\ 1.1f;}
\DoxyCodeLine{01200\ \ \ \ \ EXPECT\_FALSE(m11.Matches(x));}
\DoxyCodeLine{01201\ \ \ \ \ x\ =\ -\/1.1f;}
\DoxyCodeLine{01202\ \ \ \ \ EXPECT\_FALSE(m11.Matches(x));}
\DoxyCodeLine{01203\ \ \ \}}
\DoxyCodeLine{01204\ \};}
\DoxyCodeLine{01205\ }
\DoxyCodeLine{01206\ \textcolor{comment}{//\ Instantiate\ FloatingPointTest\ for\ testing\ floats.}}
\DoxyCodeLine{01207\ \textcolor{keyword}{typedef}\ FloatingPointTest<float>\ FloatTest;}
\DoxyCodeLine{01208\ }
\DoxyCodeLine{01209\ TEST\_F(FloatTest,\ FloatEqApproximatelyMatchesFloats)\ \{\ TestMatches(\&FloatEq);\ \}}
\DoxyCodeLine{01210\ }
\DoxyCodeLine{01211\ TEST\_F(FloatTest,\ NanSensitiveFloatEqApproximatelyMatchesFloats)\ \{}
\DoxyCodeLine{01212\ \ \ TestMatches(\&NanSensitiveFloatEq);}
\DoxyCodeLine{01213\ \}}
\DoxyCodeLine{01214\ }
\DoxyCodeLine{01215\ TEST\_F(FloatTest,\ FloatEqCannotMatchNaN)\ \{}
\DoxyCodeLine{01216\ \ \ \textcolor{comment}{//\ FloatEq\ never\ matches\ NaN.}}
\DoxyCodeLine{01217\ \ \ Matcher<float>\ m\ =\ FloatEq(nan1\_);}
\DoxyCodeLine{01218\ \ \ EXPECT\_FALSE(m.Matches(nan1\_));}
\DoxyCodeLine{01219\ \ \ EXPECT\_FALSE(m.Matches(nan2\_));}
\DoxyCodeLine{01220\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01221\ \}}
\DoxyCodeLine{01222\ }
\DoxyCodeLine{01223\ TEST\_F(FloatTest,\ NanSensitiveFloatEqCanMatchNaN)\ \{}
\DoxyCodeLine{01224\ \ \ \textcolor{comment}{//\ NanSensitiveFloatEq\ will\ match\ NaN.}}
\DoxyCodeLine{01225\ \ \ Matcher<float>\ m\ =\ NanSensitiveFloatEq(nan1\_);}
\DoxyCodeLine{01226\ \ \ EXPECT\_TRUE(m.Matches(nan1\_));}
\DoxyCodeLine{01227\ \ \ EXPECT\_TRUE(m.Matches(nan2\_));}
\DoxyCodeLine{01228\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01229\ \}}
\DoxyCodeLine{01230\ }
\DoxyCodeLine{01231\ TEST\_F(FloatTest,\ FloatEqCanDescribeSelf)\ \{}
\DoxyCodeLine{01232\ \ \ Matcher<float>\ m1\ =\ FloatEq(2.0f);}
\DoxyCodeLine{01233\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2"{}},\ Describe(m1));}
\DoxyCodeLine{01234\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2"{}},\ DescribeNegation(m1));}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ Matcher<float>\ m2\ =\ FloatEq(0.5f);}
\DoxyCodeLine{01237\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5"{}},\ Describe(m2));}
\DoxyCodeLine{01238\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5"{}},\ DescribeNegation(m2));}
\DoxyCodeLine{01239\ }
\DoxyCodeLine{01240\ \ \ Matcher<float>\ m3\ =\ FloatEq(nan1\_);}
\DoxyCodeLine{01241\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}never\ matches"{}},\ Describe(m3));}
\DoxyCodeLine{01242\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ anything"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01243\ \}}
\DoxyCodeLine{01244\ }
\DoxyCodeLine{01245\ TEST\_F(FloatTest,\ NanSensitiveFloatEqCanDescribeSelf)\ \{}
\DoxyCodeLine{01246\ \ \ Matcher<float>\ m1\ =\ NanSensitiveFloatEq(2.0f);}
\DoxyCodeLine{01247\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2"{}},\ Describe(m1));}
\DoxyCodeLine{01248\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2"{}},\ DescribeNegation(m1));}
\DoxyCodeLine{01249\ }
\DoxyCodeLine{01250\ \ \ Matcher<float>\ m2\ =\ NanSensitiveFloatEq(0.5f);}
\DoxyCodeLine{01251\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5"{}},\ Describe(m2));}
\DoxyCodeLine{01252\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5"{}},\ DescribeNegation(m2));}
\DoxyCodeLine{01253\ }
\DoxyCodeLine{01254\ \ \ Matcher<float>\ m3\ =\ NanSensitiveFloatEq(nan1\_);}
\DoxyCodeLine{01255\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(m3));}
\DoxyCodeLine{01256\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01257\ \}}
\DoxyCodeLine{01258\ }
\DoxyCodeLine{01259\ \textcolor{comment}{//\ Instantiate\ FloatingPointTest\ for\ testing\ floats\ with\ a\ user-\/specified}}
\DoxyCodeLine{01260\ \textcolor{comment}{//\ max\ absolute\ error.}}
\DoxyCodeLine{01261\ \textcolor{keyword}{typedef}\ FloatingPointNearTest<float>\ FloatNearTest;}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ TEST\_F(FloatNearTest,\ FloatNearMatches)\ \{\ TestNearMatches(\&FloatNear);\ \}}
\DoxyCodeLine{01264\ }
\DoxyCodeLine{01265\ TEST\_F(FloatNearTest,\ NanSensitiveFloatNearApproximatelyMatchesFloats)\ \{}
\DoxyCodeLine{01266\ \ \ TestNearMatches(\&NanSensitiveFloatNear);}
\DoxyCodeLine{01267\ \}}
\DoxyCodeLine{01268\ }
\DoxyCodeLine{01269\ TEST\_F(FloatNearTest,\ FloatNearCanDescribeSelf)\ \{}
\DoxyCodeLine{01270\ \ \ Matcher<float>\ m1\ =\ FloatNear(2.0f,\ 0.5f);}
\DoxyCodeLine{01271\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m1));}
\DoxyCodeLine{01272\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01273\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m1));}
\DoxyCodeLine{01274\ }
\DoxyCodeLine{01275\ \ \ Matcher<float>\ m2\ =\ FloatNear(0.5f,\ 0.5f);}
\DoxyCodeLine{01276\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m2));}
\DoxyCodeLine{01277\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m2));}
\DoxyCodeLine{01279\ }
\DoxyCodeLine{01280\ \ \ Matcher<float>\ m3\ =\ FloatNear(nan1\_,\ 0.0);}
\DoxyCodeLine{01281\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}never\ matches"{}},\ Describe(m3));}
\DoxyCodeLine{01282\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ anything"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01283\ \}}
\DoxyCodeLine{01284\ }
\DoxyCodeLine{01285\ TEST\_F(FloatNearTest,\ NanSensitiveFloatNearCanDescribeSelf)\ \{}
\DoxyCodeLine{01286\ \ \ Matcher<float>\ m1\ =\ NanSensitiveFloatNear(2.0f,\ 0.5f);}
\DoxyCodeLine{01287\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m1));}
\DoxyCodeLine{01288\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m1));}
\DoxyCodeLine{01290\ }
\DoxyCodeLine{01291\ \ \ Matcher<float>\ m2\ =\ NanSensitiveFloatNear(0.5f,\ 0.5f);}
\DoxyCodeLine{01292\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m2));}
\DoxyCodeLine{01293\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m2));}
\DoxyCodeLine{01295\ }
\DoxyCodeLine{01296\ \ \ Matcher<float>\ m3\ =\ NanSensitiveFloatNear(nan1\_,\ 0.1f);}
\DoxyCodeLine{01297\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(m3));}
\DoxyCodeLine{01298\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01299\ \}}
\DoxyCodeLine{01300\ }
\DoxyCodeLine{01301\ TEST\_F(FloatNearTest,\ FloatNearCannotMatchNaN)\ \{}
\DoxyCodeLine{01302\ \ \ \textcolor{comment}{//\ FloatNear\ never\ matches\ NaN.}}
\DoxyCodeLine{01303\ \ \ Matcher<float>\ m\ =\ FloatNear(ParentType::nan1\_,\ 0.1f);}
\DoxyCodeLine{01304\ \ \ EXPECT\_FALSE(m.Matches(nan1\_));}
\DoxyCodeLine{01305\ \ \ EXPECT\_FALSE(m.Matches(nan2\_));}
\DoxyCodeLine{01306\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01307\ \}}
\DoxyCodeLine{01308\ }
\DoxyCodeLine{01309\ TEST\_F(FloatNearTest,\ NanSensitiveFloatNearCanMatchNaN)\ \{}
\DoxyCodeLine{01310\ \ \ \textcolor{comment}{//\ NanSensitiveFloatNear\ will\ match\ NaN.}}
\DoxyCodeLine{01311\ \ \ Matcher<float>\ m\ =\ NanSensitiveFloatNear(nan1\_,\ 0.1f);}
\DoxyCodeLine{01312\ \ \ EXPECT\_TRUE(m.Matches(nan1\_));}
\DoxyCodeLine{01313\ \ \ EXPECT\_TRUE(m.Matches(nan2\_));}
\DoxyCodeLine{01314\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01315\ \}}
\DoxyCodeLine{01316\ }
\DoxyCodeLine{01317\ \textcolor{comment}{//\ Instantiate\ FloatingPointTest\ for\ testing\ doubles.}}
\DoxyCodeLine{01318\ \textcolor{keyword}{typedef}\ FloatingPointTest<double>\ DoubleTest;}
\DoxyCodeLine{01319\ }
\DoxyCodeLine{01320\ TEST\_F(DoubleTest,\ DoubleEqApproximatelyMatchesDoubles)\ \{}
\DoxyCodeLine{01321\ \ \ TestMatches(\&DoubleEq);}
\DoxyCodeLine{01322\ \}}
\DoxyCodeLine{01323\ }
\DoxyCodeLine{01324\ TEST\_F(DoubleTest,\ NanSensitiveDoubleEqApproximatelyMatchesDoubles)\ \{}
\DoxyCodeLine{01325\ \ \ TestMatches(\&NanSensitiveDoubleEq);}
\DoxyCodeLine{01326\ \}}
\DoxyCodeLine{01327\ }
\DoxyCodeLine{01328\ TEST\_F(DoubleTest,\ DoubleEqCannotMatchNaN)\ \{}
\DoxyCodeLine{01329\ \ \ \textcolor{comment}{//\ DoubleEq\ never\ matches\ NaN.}}
\DoxyCodeLine{01330\ \ \ Matcher<double>\ m\ =\ DoubleEq(nan1\_);}
\DoxyCodeLine{01331\ \ \ EXPECT\_FALSE(m.Matches(nan1\_));}
\DoxyCodeLine{01332\ \ \ EXPECT\_FALSE(m.Matches(nan2\_));}
\DoxyCodeLine{01333\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01334\ \}}
\DoxyCodeLine{01335\ }
\DoxyCodeLine{01336\ TEST\_F(DoubleTest,\ NanSensitiveDoubleEqCanMatchNaN)\ \{}
\DoxyCodeLine{01337\ \ \ \textcolor{comment}{//\ NanSensitiveDoubleEq\ will\ match\ NaN.}}
\DoxyCodeLine{01338\ \ \ Matcher<double>\ m\ =\ NanSensitiveDoubleEq(nan1\_);}
\DoxyCodeLine{01339\ \ \ EXPECT\_TRUE(m.Matches(nan1\_));}
\DoxyCodeLine{01340\ \ \ EXPECT\_TRUE(m.Matches(nan2\_));}
\DoxyCodeLine{01341\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01342\ \}}
\DoxyCodeLine{01343\ }
\DoxyCodeLine{01344\ TEST\_F(DoubleTest,\ DoubleEqCanDescribeSelf)\ \{}
\DoxyCodeLine{01345\ \ \ Matcher<double>\ m1\ =\ DoubleEq(2.0);}
\DoxyCodeLine{01346\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2"{}},\ Describe(m1));}
\DoxyCodeLine{01347\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2"{}},\ DescribeNegation(m1));}
\DoxyCodeLine{01348\ }
\DoxyCodeLine{01349\ \ \ Matcher<double>\ m2\ =\ DoubleEq(0.5);}
\DoxyCodeLine{01350\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5"{}},\ Describe(m2));}
\DoxyCodeLine{01351\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5"{}},\ DescribeNegation(m2));}
\DoxyCodeLine{01352\ }
\DoxyCodeLine{01353\ \ \ Matcher<double>\ m3\ =\ DoubleEq(nan1\_);}
\DoxyCodeLine{01354\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}never\ matches"{}},\ Describe(m3));}
\DoxyCodeLine{01355\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ anything"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01356\ \}}
\DoxyCodeLine{01357\ }
\DoxyCodeLine{01358\ TEST\_F(DoubleTest,\ NanSensitiveDoubleEqCanDescribeSelf)\ \{}
\DoxyCodeLine{01359\ \ \ Matcher<double>\ m1\ =\ NanSensitiveDoubleEq(2.0);}
\DoxyCodeLine{01360\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2"{}},\ Describe(m1));}
\DoxyCodeLine{01361\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2"{}},\ DescribeNegation(m1));}
\DoxyCodeLine{01362\ }
\DoxyCodeLine{01363\ \ \ Matcher<double>\ m2\ =\ NanSensitiveDoubleEq(0.5);}
\DoxyCodeLine{01364\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5"{}},\ Describe(m2));}
\DoxyCodeLine{01365\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5"{}},\ DescribeNegation(m2));}
\DoxyCodeLine{01366\ }
\DoxyCodeLine{01367\ \ \ Matcher<double>\ m3\ =\ NanSensitiveDoubleEq(nan1\_);}
\DoxyCodeLine{01368\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(m3));}
\DoxyCodeLine{01369\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01370\ \}}
\DoxyCodeLine{01371\ }
\DoxyCodeLine{01372\ \textcolor{comment}{//\ Instantiate\ FloatingPointTest\ for\ testing\ floats\ with\ a\ user-\/specified}}
\DoxyCodeLine{01373\ \textcolor{comment}{//\ max\ absolute\ error.}}
\DoxyCodeLine{01374\ \textcolor{keyword}{typedef}\ FloatingPointNearTest<double>\ DoubleNearTest;}
\DoxyCodeLine{01375\ }
\DoxyCodeLine{01376\ TEST\_F(DoubleNearTest,\ DoubleNearMatches)\ \{\ TestNearMatches(\&DoubleNear);\ \}}
\DoxyCodeLine{01377\ }
\DoxyCodeLine{01378\ TEST\_F(DoubleNearTest,\ NanSensitiveDoubleNearApproximatelyMatchesDoubles)\ \{}
\DoxyCodeLine{01379\ \ \ TestNearMatches(\&NanSensitiveDoubleNear);}
\DoxyCodeLine{01380\ \}}
\DoxyCodeLine{01381\ }
\DoxyCodeLine{01382\ TEST\_F(DoubleNearTest,\ DoubleNearCanDescribeSelf)\ \{}
\DoxyCodeLine{01383\ \ \ Matcher<double>\ m1\ =\ DoubleNear(2.0,\ 0.5);}
\DoxyCodeLine{01384\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m1));}
\DoxyCodeLine{01385\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m1));}
\DoxyCodeLine{01387\ }
\DoxyCodeLine{01388\ \ \ Matcher<double>\ m2\ =\ DoubleNear(0.5,\ 0.5);}
\DoxyCodeLine{01389\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m2));}
\DoxyCodeLine{01390\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m2));}
\DoxyCodeLine{01392\ }
\DoxyCodeLine{01393\ \ \ Matcher<double>\ m3\ =\ DoubleNear(nan1\_,\ 0.0);}
\DoxyCodeLine{01394\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}never\ matches"{}},\ Describe(m3));}
\DoxyCodeLine{01395\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ anything"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01396\ \}}
\DoxyCodeLine{01397\ }
\DoxyCodeLine{01398\ TEST\_F(DoubleNearTest,\ ExplainsResultWhenMatchFails)\ \{}
\DoxyCodeLine{01399\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}"{}},\ Explain(DoubleNear(2.0,\ 0.1),\ 2.05));}
\DoxyCodeLine{01400\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ 0.2\ from\ 2"{}},\ Explain(DoubleNear(2.0,\ 0.1),\ 2.2));}
\DoxyCodeLine{01401\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}which\ is\ -\/0.3\ from\ 2"{}},\ Explain(DoubleNear(2.0,\ 0.1),\ 1.7));}
\DoxyCodeLine{01402\ }
\DoxyCodeLine{01403\ \ \ \textcolor{keyword}{const}\ std::string\ explanation\ =}
\DoxyCodeLine{01404\ \ \ \ \ \ \ Explain(DoubleNear(2.1,\ 1e-\/10),\ 2.1\ +\ 1.2e-\/10);}
\DoxyCodeLine{01405\ \ \ \textcolor{comment}{//\ Different\ C++\ implementations\ may\ print\ floating-\/point\ numbers}}
\DoxyCodeLine{01406\ \ \ \textcolor{comment}{//\ slightly\ differently.}}
\DoxyCodeLine{01407\ \ \ EXPECT\_TRUE(explanation\ ==\ \textcolor{stringliteral}{"{}which\ is\ 1.2e-\/10\ from\ 2.1"{}}\ ||\ \ \textcolor{comment}{//\ GCC}}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ explanation\ ==\ \textcolor{stringliteral}{"{}which\ is\ 1.2e-\/010\ from\ 2.1"{}})\ \ \ \textcolor{comment}{//\ MSVC}}
\DoxyCodeLine{01409\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ where\ explanation\ is\ \(\backslash\)"{}"{}}\ <<\ explanation\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)"{}."{}};}
\DoxyCodeLine{01410\ \}}
\DoxyCodeLine{01411\ }
\DoxyCodeLine{01412\ TEST\_F(DoubleNearTest,\ NanSensitiveDoubleNearCanDescribeSelf)\ \{}
\DoxyCodeLine{01413\ \ \ Matcher<double>\ m1\ =\ NanSensitiveDoubleNear(2.0,\ 0.5);}
\DoxyCodeLine{01414\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 2\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m1));}
\DoxyCodeLine{01415\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 2\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m1));}
\DoxyCodeLine{01417\ }
\DoxyCodeLine{01418\ \ \ Matcher<double>\ m2\ =\ NanSensitiveDoubleNear(0.5,\ 0.5);}
\DoxyCodeLine{01419\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ approximately\ 0.5\ (absolute\ error\ <=\ 0.5)"{}},\ Describe(m2));}
\DoxyCodeLine{01420\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ approximately\ 0.5\ (absolute\ error\ >\ 0.5)"{}},}
\DoxyCodeLine{01421\ \ \ \ \ \ \ \ \ \ \ \ \ DescribeNegation(m2));}
\DoxyCodeLine{01422\ }
\DoxyCodeLine{01423\ \ \ Matcher<double>\ m3\ =\ NanSensitiveDoubleNear(nan1\_,\ 0.1);}
\DoxyCodeLine{01424\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}is\ NaN"{}},\ Describe(m3));}
\DoxyCodeLine{01425\ \ \ EXPECT\_EQ(\textcolor{stringliteral}{"{}isn't\ NaN"{}},\ DescribeNegation(m3));}
\DoxyCodeLine{01426\ \}}
\DoxyCodeLine{01427\ }
\DoxyCodeLine{01428\ TEST\_F(DoubleNearTest,\ DoubleNearCannotMatchNaN)\ \{}
\DoxyCodeLine{01429\ \ \ \textcolor{comment}{//\ DoubleNear\ never\ matches\ NaN.}}
\DoxyCodeLine{01430\ \ \ Matcher<double>\ m\ =\ DoubleNear(ParentType::nan1\_,\ 0.1);}
\DoxyCodeLine{01431\ \ \ EXPECT\_FALSE(m.Matches(nan1\_));}
\DoxyCodeLine{01432\ \ \ EXPECT\_FALSE(m.Matches(nan2\_));}
\DoxyCodeLine{01433\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01434\ \}}
\DoxyCodeLine{01435\ }
\DoxyCodeLine{01436\ TEST\_F(DoubleNearTest,\ NanSensitiveDoubleNearCanMatchNaN)\ \{}
\DoxyCodeLine{01437\ \ \ \textcolor{comment}{//\ NanSensitiveDoubleNear\ will\ match\ NaN.}}
\DoxyCodeLine{01438\ \ \ Matcher<double>\ m\ =\ NanSensitiveDoubleNear(nan1\_,\ 0.1);}
\DoxyCodeLine{01439\ \ \ EXPECT\_TRUE(m.Matches(nan1\_));}
\DoxyCodeLine{01440\ \ \ EXPECT\_TRUE(m.Matches(nan2\_));}
\DoxyCodeLine{01441\ \ \ EXPECT\_FALSE(m.Matches(1.0));}
\DoxyCodeLine{01442\ \}}
\DoxyCodeLine{01443\ }
\DoxyCodeLine{01444\ TEST(NotTest,\ WorksOnMoveOnlyType)\ \{}
\DoxyCodeLine{01445\ \ \ std::unique\_ptr<int>\ p(\textcolor{keyword}{new}\ \textcolor{keywordtype}{int}(3));}
\DoxyCodeLine{01446\ \ \ EXPECT\_THAT(p,\ Pointee(Eq(3)));}
\DoxyCodeLine{01447\ \ \ EXPECT\_THAT(p,\ Not(Pointee(Eq(2))));}
\DoxyCodeLine{01448\ \}}
\DoxyCodeLine{01449\ }
\DoxyCodeLine{01450\ TEST(AllOfTest,\ HugeMatcher)\ \{}
\DoxyCodeLine{01451\ \ \ \textcolor{comment}{//\ Verify\ that\ using\ AllOf\ with\ many\ arguments\ doesn't\ cause}}
\DoxyCodeLine{01452\ \ \ \textcolor{comment}{//\ the\ compiler\ to\ exceed\ template\ instantiation\ depth\ limit.}}
\DoxyCodeLine{01453\ \ \ EXPECT\_THAT(0,\ testing::AllOf(\_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,}
\DoxyCodeLine{01454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ testing::AllOf(\_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_)));}
\DoxyCodeLine{01455\ \}}
\DoxyCodeLine{01456\ }
\DoxyCodeLine{01457\ TEST(AnyOfTest,\ HugeMatcher)\ \{}
\DoxyCodeLine{01458\ \ \ \textcolor{comment}{//\ Verify\ that\ using\ AnyOf\ with\ many\ arguments\ doesn't\ cause}}
\DoxyCodeLine{01459\ \ \ \textcolor{comment}{//\ the\ compiler\ to\ exceed\ template\ instantiation\ depth\ limit.}}
\DoxyCodeLine{01460\ \ \ EXPECT\_THAT(0,\ testing::AnyOf(\_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ testing::AnyOf(\_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_,\ \_)));}
\DoxyCodeLine{01462\ \}}
\DoxyCodeLine{01463\ }
\DoxyCodeLine{01464\ \textcolor{keyword}{namespace\ }adl\_test\ \{}
\DoxyCodeLine{01465\ }
\DoxyCodeLine{01466\ \textcolor{comment}{//\ Verifies\ that\ the\ implementation\ of\ ::testing::AllOf\ and\ ::testing::AnyOf}}
\DoxyCodeLine{01467\ \textcolor{comment}{//\ don't\ issue\ unqualified\ recursive\ calls.\ \ If\ they\ do,\ the\ argument\ dependent}}
\DoxyCodeLine{01468\ \textcolor{comment}{//\ name\ lookup\ will\ cause\ AllOf/AnyOf\ in\ the\ 'adl\_test'\ namespace\ to\ be\ found}}
\DoxyCodeLine{01469\ \textcolor{comment}{//\ as\ a\ candidate\ and\ the\ compilation\ will\ break\ due\ to\ an\ ambiguous\ overload.}}
\DoxyCodeLine{01470\ }
\DoxyCodeLine{01471\ \textcolor{comment}{//\ The\ matcher\ must\ be\ in\ the\ same\ namespace\ as\ AllOf/AnyOf\ to\ make\ argument}}
\DoxyCodeLine{01472\ \textcolor{comment}{//\ dependent\ lookup\ find\ those.}}
\DoxyCodeLine{01473\ MATCHER(M,\ \textcolor{stringliteral}{"{}"{}})\ \{}
\DoxyCodeLine{01474\ \ \ (void)arg;}
\DoxyCodeLine{01475\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01476\ \}}
\DoxyCodeLine{01477\ }
\DoxyCodeLine{01478\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2>}
\DoxyCodeLine{01479\ \textcolor{keywordtype}{bool}\ AllOf(\textcolor{keyword}{const}\ T1\&\ \textcolor{comment}{/*t1*/},\ \textcolor{keyword}{const}\ T2\&\ \textcolor{comment}{/*t2*/})\ \{}
\DoxyCodeLine{01480\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01481\ \}}
\DoxyCodeLine{01482\ }
\DoxyCodeLine{01483\ TEST(AllOfTest,\ DoesNotCallAllOfUnqualified)\ \{}
\DoxyCodeLine{01484\ \ \ EXPECT\_THAT(42,}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ testing::AllOf(M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M()));}
\DoxyCodeLine{01486\ \}}
\DoxyCodeLine{01487\ }
\DoxyCodeLine{01488\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T1,\ \textcolor{keyword}{typename}\ T2>}
\DoxyCodeLine{01489\ \textcolor{keywordtype}{bool}\ AnyOf(\textcolor{keyword}{const}\ T1\&,\ \textcolor{keyword}{const}\ T2\&)\ \{}
\DoxyCodeLine{01490\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01491\ \}}
\DoxyCodeLine{01492\ }
\DoxyCodeLine{01493\ TEST(AnyOfTest,\ DoesNotCallAnyOfUnqualified)\ \{}
\DoxyCodeLine{01494\ \ \ EXPECT\_THAT(42,}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ testing::AnyOf(M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M(),\ M()));}
\DoxyCodeLine{01496\ \}}
\DoxyCodeLine{01497\ }
\DoxyCodeLine{01498\ \}\ \ \textcolor{comment}{//\ namespace\ adl\_test}}
\DoxyCodeLine{01499\ }
\DoxyCodeLine{01500\ TEST(AllOfTest,\ WorksOnMoveOnlyType)\ \{}
\DoxyCodeLine{01501\ \ \ std::unique\_ptr<int>\ p(\textcolor{keyword}{new}\ \textcolor{keywordtype}{int}(3));}
\DoxyCodeLine{01502\ \ \ EXPECT\_THAT(p,\ AllOf(Pointee(Eq(3)),\ Pointee(Gt(0)),\ Pointee(Lt(5))));}
\DoxyCodeLine{01503\ \ \ EXPECT\_THAT(p,\ Not(AllOf(Pointee(Eq(3)),\ Pointee(Gt(0)),\ Pointee(Lt(3)))));}
\DoxyCodeLine{01504\ \}}
\DoxyCodeLine{01505\ }
\DoxyCodeLine{01506\ TEST(AnyOfTest,\ WorksOnMoveOnlyType)\ \{}
\DoxyCodeLine{01507\ \ \ std::unique\_ptr<int>\ p(\textcolor{keyword}{new}\ \textcolor{keywordtype}{int}(3));}
\DoxyCodeLine{01508\ \ \ EXPECT\_THAT(p,\ AnyOf(Pointee(Eq(5)),\ Pointee(Lt(0)),\ Pointee(Lt(5))));}
\DoxyCodeLine{01509\ \ \ EXPECT\_THAT(p,\ Not(AnyOf(Pointee(Eq(5)),\ Pointee(Lt(0)),\ Pointee(Gt(5)))));}
\DoxyCodeLine{01510\ \}}
\DoxyCodeLine{01511\ }
\DoxyCodeLine{01512\ \}\ \ \textcolor{comment}{//\ namespace}}
\DoxyCodeLine{01513\ \}\ \ \textcolor{comment}{//\ namespace\ gmock\_matchers\_test}}
\DoxyCodeLine{01514\ \}\ \ \textcolor{comment}{//\ namespace\ testing}}
\DoxyCodeLine{01515\ }
\DoxyCodeLine{01516\ GTEST\_DISABLE\_MSC\_WARNINGS\_POP\_()\ \ \textcolor{comment}{//\ 4244\ 4100}}

\end{DoxyCode}
